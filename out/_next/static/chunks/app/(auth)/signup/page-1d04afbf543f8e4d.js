(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{4622:function(e,r,n){Promise.resolve().then(n.bind(n,19))},9376:function(e,r,n){"use strict";var o=n(5475);n.o(o,"usePathname")&&n.d(r,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(r,{useRouter:function(){return o.useRouter}})},19:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return V}});var o=n(7437),i=n(2265),s=n(3954);let t=s.ZP.div.withConfig({componentId:"sc-a8429544-0"})(["margin-bottom:3rem;text-align:center;"]),a=s.ZP.h1.withConfig({componentId:"sc-a8429544-1"})(["font-size:2rem;font-weight:600;color:#000000;margin-bottom:0.5rem;@media (min-width:769px){font-size:2.5rem;}"]),d=s.ZP.p.withConfig({componentId:"sc-a8429544-2"})(["font-size:1rem;color:#6c757d;margin:0;"]);function l(e){let{mode:r}=e,n="login"===r;return(0,o.jsxs)(t,{children:[(0,o.jsx)(a,{children:n?"로그인":"회원가입"}),(0,o.jsx)(d,{children:n?"다시 돌아오신 것을 환영합니다":"새 계정을 만들어보세요"})]})}var c=n(9376),m=n(419);let u=s.ZP.div.withConfig({componentId:"sc-137e3f78-0"})(["background:#f8d7da;border:1px solid #f5c6cb;color:#721c24;padding:1rem;border-radius:0;margin-bottom:1.5rem;"]),f=s.ZP.div.withConfig({componentId:"sc-137e3f78-1"})(["display:flex;flex-direction:column;gap:0.75rem;"]),p=s.ZP.button.withConfig({componentId:"sc-137e3f78-2"})(["width:100%;padding:1rem;border:2px solid #000000;background:#ffffff;color:#000000;font-size:0.875rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;&:hover{background:#f8f9fa;}"]);function h(e){let{onModeChange:r}=e,n=(0,c.useRouter)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{children:"현재 로그인 상태입니다. 다른 계정을 생성하려면 로그아웃이 필요합니다."}),(0,o.jsxs)(f,{children:[(0,o.jsx)(p,{type:"button",onClick:()=>n.push("/main"),children:"대시보드로 이동"}),(0,o.jsx)(p,{type:"button",onClick:()=>r("signup"),children:"새 계정 만들기"})]})]})}var g=n(5583),w=n(1780);let b={passwordRequirements:[{label:"6자 이상",check:e=>e.length>=6},{label:"영문 포함",check:e=>/[a-zA-Z]/.test(e)},{label:"숫자 포함",check:e=>/[0-9]/.test(e)}],isPasswordValid(e){return this.passwordRequirements.every(r=>r.check(e))}},x={username:"",email:"",password:"",confirmPassword:""},j=s.ZP.form.withConfig({componentId:"sc-94b76b90-0"})(["display:flex;flex-direction:column;gap:1.5rem;"]),v=s.ZP.div.withConfig({componentId:"sc-94b76b90-1"})(["display:flex;flex-direction:column;gap:0.5rem;"]),P=s.ZP.label.withConfig({componentId:"sc-94b76b90-2"})(["font-size:0.875rem;font-weight:500;color:#000000;text-transform:uppercase;letter-spacing:0.05em;"]),C=s.ZP.input.withConfig({componentId:"sc-94b76b90-3"})(["width:100%;padding:1rem;border:2px solid ",";border-radius:0;font-size:1rem;color:#000000;background:#ffffff;transition:border-color 0.2s ease;&:focus{outline:none;border-color:#000000;}&::placeholder{color:#adb5bd;}"],e=>e.$error?"#dc3545":"#e9ecef"),k=s.ZP.div.withConfig({componentId:"sc-94b76b90-4"})(["color:#dc3545;font-size:0.875rem;"]),y=s.ZP.button.withConfig({componentId:"sc-94b76b90-5"})(["width:100%;padding:1rem;background:#000000;color:#ffffff;border:none;font-size:1rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;&:hover:not(:disabled){background:#333333;}&:disabled{background:#adb5bd;cursor:not-allowed;}"]),_=s.ZP.div.withConfig({componentId:"sc-94b76b90-6"})(["font-size:0.75rem;color:#6c757d;"]),Z=s.ZP.div.withConfig({componentId:"sc-94b76b90-7"})(["height:4px;background:#e9ecef;border-radius:2px;overflow:hidden;div{height:100%;transition:width 0.3s ease,background 0.3s ease;&.weak{width:33%;background:#dc3545;}&.medium{width:66%;background:#ffc107;}&.strong{width:100%;background:#28a745;}}"]),z=s.ZP.ul.withConfig({componentId:"sc-94b76b90-8"})(["margin:0;padding-left:1rem;font-size:0.75rem;color:#6c757d;li{margin-bottom:0.25rem;&.valid{color:#28a745;}&.invalid{color:#dc3545;}}"]);function I(e){let{mode:r,onModeChange:n}=e,s=(0,c.useRouter)(),{registerUser:t,authLoading:a,currentUser:d}=(0,m.a)(),{formData:l,errors:u,passwordStrength:f,isChecking:p,handleChange:I,validateForm:q}=function(){let{validateUsername:e,validateEmail:r,checkPasswordStrength:n,userManager:o}=(0,m.a)(),[s,t]=(0,i.useState)(x),[a,d]=(0,i.useState)({}),[l,c]=(0,i.useState)({username:!1,email:!1}),u=(0,i.useMemo)(()=>{var e;if(!s.password)return null;let r=n(s.password);return(0,w._)((0,g._)({},r),{requirements:b.passwordRequirements.map(e=>({label:e.label,met:e.check(s.password)})),level:r.score>=3?"strong":2===r.score?"medium":"weak",message:(null===(e=r.feedback)||void 0===e?void 0:e[0])||"비밀번호는 최소 6자 이상이어야 합니다."})},[s.password,n]),f=(0,i.useCallback)((n,i)=>{t(e=>(0,w._)((0,g._)({},e),{[n]:i}));let l=e=>d(r=>(0,w._)((0,g._)({},r),{[e]:void 0})),m=(e,r)=>d(n=>(0,w._)((0,g._)({},n),{[e]:r}));if("username"===n){c(e=>(0,w._)((0,g._)({},e),{username:!0}));let r=e(i);try{if(r.isValid){let e=r.normalizedUsername;o.isUsernameUnique(e)?l("username"):m("username","이미 사용 중인 사용자명입니다.")}else m("username",r.error)}catch(e){console.error("Username validation error:",e),m("username","사용자명 확인 중 오류가 발생했습니다.")}finally{c(e=>(0,w._)((0,g._)({},e),{username:!1}))}}if("email"===n){c(e=>(0,w._)((0,g._)({},e),{email:!0}));try{let e=r(i);if(e.isValid){let r=e.normalizedEmail;o.isEmailUnique(r)?l("email"):m("email","이미 사용 중인 이메일 주소입니다.")}else m("email",e.error)}catch(e){console.error("Email validation error:",e),m("email","이메일 확인 중 오류가 발생했습니다.")}finally{c(e=>(0,w._)((0,g._)({},e),{email:!1}))}}"username"!==n&&"email"!==n&&a[n]&&l(n),("confirmPassword"===n||"password"===n&&s.confirmPassword)&&(("confirmPassword"===n?i!==s.password:s.confirmPassword&&s.confirmPassword!==i)?m("confirmPassword","비밀번호가 일치하지 않습니다."):l("confirmPassword"))},[a,e,r,o,s.password,s.confirmPassword]),p=(0,i.useCallback)(async()=>{let n={},i=e(s.username);i.isValid?o.isUsernameUnique(i.normalizedUsername)||(n.username="이미 사용 중인 사용자명입니다."):n.username=i.error;let t=r(s.email);return t.isValid?o.isEmailUnique(t.normalizedEmail)||(n.email="이미 사용 중인 이메일 주소입니다."):n.email=t.error,s.password?b.isPasswordValid(s.password)||(n.password="비밀번호가 요구사항을 충족하지 않습니다."):n.password="비밀번호를 입력해주세요.",s.password!==s.confirmPassword&&(n.confirmPassword="비밀번호가 일치하지 않습니다."),d(n),0===Object.keys(n).length},[s,e,r,o]);return{formData:s,errors:a,isChecking:l,passwordStrength:u,handleChange:f,validateForm:p}}(),[U,E]=(0,i.useState)(!1),[R,S]=(0,i.useState)("");if("login"===r)return(0,o.jsx)(h,{onModeChange:n});if(a)return(0,o.jsx)(_,{children:"Loading..."});if(!a&&d)return s.push("/main"),null;let N=async e=>{if(e.preventDefault(),!U&&await q()){E(!0);try{await t(l.username.trim(),{displayName:l.username.trim(),email:l.email.trim(),password:l.password,confirmPassword:l.confirmPassword}),S(""),s.push("/login")}catch(e){console.error(e),S((null==e?void 0:e.message)||"회원가입에 실패했습니다. 다시 시도해주세요.")}finally{E(!1)}}};return(0,o.jsxs)(j,{onSubmit:N,children:[(0,o.jsxs)(v,{children:[(0,o.jsx)(P,{children:"사용자명"}),(0,o.jsx)(C,{type:"text",value:l.username,onChange:e=>I("username",e.target.value),placeholder:"사용자명 입력 (4-20자)",$error:u.username,autoComplete:"username"}),p.username&&!u.username&&(0,o.jsx)(_,{children:"사용자명 확인 중..."}),u.username&&(0,o.jsx)(k,{children:u.username})]}),(0,o.jsxs)(v,{children:[(0,o.jsx)(P,{children:"이메일"}),(0,o.jsx)(C,{type:"email",value:l.email,onChange:e=>I("email",e.target.value),placeholder:"이메일 주소 입력",$error:u.email,autoComplete:"email"}),p.email&&(0,o.jsx)(_,{children:"이메일 확인 중..."}),u.email&&(0,o.jsx)(k,{children:u.email})]}),(0,o.jsxs)(v,{children:[(0,o.jsx)(P,{children:"비밀번호"}),(0,o.jsx)(C,{type:"password",value:l.password,onChange:e=>I("password",e.target.value),placeholder:"비밀번호 입력",$error:u.password,autoComplete:"new-password"}),f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z,{children:(0,o.jsx)("div",{className:f.level})}),(0,o.jsx)(_,{children:f.message}),(0,o.jsx)(z,{children:f.requirements.map(e=>(0,o.jsx)("li",{className:e.met?"valid":"invalid",children:e.label},e.label))})]}),u.password&&(0,o.jsx)(k,{children:u.password})]}),(0,o.jsxs)(v,{children:[(0,o.jsx)(P,{children:"비밀번호 확인"}),(0,o.jsx)(C,{type:"password",value:l.confirmPassword,onChange:e=>I("confirmPassword",e.target.value),placeholder:"비밀번호 다시 입력",$error:u.confirmPassword,autoComplete:"new-password"}),u.confirmPassword&&(0,o.jsx)(k,{children:u.confirmPassword})]}),(0,o.jsx)(y,{type:"submit",disabled:U,children:U?"가입 중...":"회원가입"}),R&&(0,o.jsx)(k,{children:R})]})}let q=s.ZP.div.withConfig({componentId:"sc-c82c99c5-0"})(["text-align:center;margin-top:2rem;color:#6c757d;font-size:0.875rem;button{background:none;border:none;color:#000000;text-decoration:underline;cursor:pointer;font-size:inherit;&:hover{opacity:0.7;}}"]);function U(e){let{mode:r,onModeChange:n}=e;return"login"===r?(0,o.jsxs)(q,{children:["계정이 없나요?"," ",(0,o.jsx)("button",{type:"button",onClick:()=>n("signup"),children:"회원가입"})]}):(0,o.jsxs)(q,{children:["이미 계정이 있나요?"," ",(0,o.jsx)("button",{type:"button",onClick:()=>n("login"),children:"로그인"})]})}let E=s.ZP.div.withConfig({componentId:"sc-f4f14ce1-0"})(["height:100%;display:flex;flex-direction:column;background:#ffffff;position:relative;@media (min-width:769px){justify-content:center;align-items:center;min-height:100vh;background:#f8f9fa;}"]),R=s.ZP.div.withConfig({componentId:"sc-f4f14ce1-1"})(["flex:1;padding:4rem 2rem 2rem;display:flex;flex-direction:column;justify-content:center;@media (min-width:769px){max-width:450px;width:100%;padding:3rem;background:#ffffff;border:1px solid #e9ecef;flex:none;}@media (min-width:1200px){max-width:500px;padding:4rem;}"]),S=s.ZP.button.withConfig({componentId:"sc-f4f14ce1-2"})(["position:absolute;top:1rem;left:1.5rem;background:none;border:none;color:#000000;font-size:1rem;font-weight:500;cursor:pointer;padding:0.5rem;z-index:100;&:hover{opacity:0.7;}@media (min-width:769px){top:2rem;left:2rem;}"]);function N(){let[e,r]=(0,i.useState)("signup");return(0,o.jsxs)(E,{children:[(0,o.jsx)(S,{onClick:()=>r("login"),children:"← 뒤로"}),(0,o.jsxs)(R,{children:[(0,o.jsx)(l,{mode:e,onModeChange:r}),(0,o.jsx)(I,{mode:e,onModeChange:r}),(0,o.jsx)(U,{mode:e,onModeChange:r})]})]})}function V(){return(0,o.jsx)(N,{})}}},function(e){e.O(0,[954,439,81,419,971,966,744],function(){return e(e.s=4622)}),_N_E=e.O()}]);