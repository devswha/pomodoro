(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{3205:function(e,r,n){Promise.resolve().then(n.bind(n,5836))},9376:function(e,r,n){"use strict";var o=n(5475);n.o(o,"usePathname")&&n.d(r,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(r,{useRouter:function(){return o.useRouter}})},5836:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return S}});var o=n(5583),t=n(1780),i=n(7437),a=n(2265),d=n(9376),s=n(3954),c=n(419);let l=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-0"})(["height:100%;display:flex;flex-direction:column;background:var(--background-secondary);"]),p=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-1"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--background-primary);border-bottom:1px solid var(--gray-5);"]),u=s.ZP.button.withConfig({componentId:"sc-6f6db1c4-2"})(["background:none;border:none;color:var(--primary-blue);font-size:16px;font-weight:500;cursor:pointer;padding:8px 0;min-width:60px;&:hover{opacity:0.7;}&:disabled{color:var(--text-secondary);cursor:not-allowed;}"]),x=s.ZP.h1.withConfig({componentId:"sc-6f6db1c4-3"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0;text-align:center;"]),g=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-4"})(["flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:24px;@media (min-width:769px){padding:30px;gap:32px;}"]),h=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-5"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);"]),b=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-6"})(["font-size:14px;font-weight:600;color:var(--text-secondary);margin-bottom:16px;text-transform:uppercase;letter-spacing:0.5px;"]),f=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-7"})(["display:flex;align-items:center;padding:12px 0;border-bottom:1px solid var(--gray-6);&:last-child{border-bottom:none;}"]),m=s.ZP.label.withConfig({componentId:"sc-6f6db1c4-8"})(["font-size:16px;font-weight:500;color:var(--text-primary);width:80px;min-width:80px;margin-right:16px;"]),v=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-9"})(["display:flex;gap:8px;flex:1;"]),w=s.ZP.button.withConfig({componentId:"sc-6f6db1c4-10"})(["background:var(--gray-6);border:none;border-radius:var(--border-radius-medium);padding:8px 12px;font-size:14px;font-weight:500;color:var(--text-primary);cursor:pointer;transition:var(--transition-fast);flex:1;&:hover{background:var(--gray-5);}&:active{transform:scale(0.98);}"]),y=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-11"})(["flex:1;"]),C=s.ZP.input.withConfig({componentId:"sc-6f6db1c4-12"})(["width:100%;background:transparent;border:none;font-size:16px;color:var(--text-primary);padding:8px 0;&::placeholder{color:var(--text-tertiary);}&:focus{outline:none;}"]);s.ZP.div.withConfig({componentId:"sc-6f6db1c4-13"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);display:flex;flex-direction:column;gap:16px;"]),s.ZP.div.withConfig({componentId:"sc-6f6db1c4-14"})(["display:flex;justify-content:space-between;align-items:center;padding:12px 0;"]),s.ZP.label.withConfig({componentId:"sc-6f6db1c4-15"})(["font-size:16px;font-weight:500;color:var(--text-primary);"]),s.ZP.button.withConfig({componentId:"sc-6f6db1c4-16"})(["width:52px;height:32px;background:",";border:none;border-radius:16px;position:relative;cursor:pointer;transition:var(--transition-medium);outline:none;&:focus{box-shadow:0 0 0 2px rgba(0,122,255,0.2);}"],e=>e.active?"var(--primary-blue)":"var(--gray-4)"),s.ZP.div.withConfig({componentId:"sc-6f6db1c4-17"})(["width:28px;height:28px;background:white;border-radius:50%;position:absolute;top:2px;left:",";transition:var(--transition-medium);box-shadow:0 2px 4px rgba(0,0,0,0.1);"],e=>e.active?"22px":"2px");let j=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-18"})(["display:flex;align-items:center;gap:12px;flex:1;"]),k=s.ZP.button.withConfig({componentId:"sc-6f6db1c4-19"})(["background:",";color:",";border:none;border-radius:var(--border-radius-medium);padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:var(--transition-fast);&:hover{background:",";}"],e=>e.active?"var(--primary-blue)":"var(--gray-6)",e=>e.active?"white":"var(--text-primary)",e=>e.active?"#0056CC":"var(--gray-5)"),P=s.ZP.div.withConfig({componentId:"sc-6f6db1c4-20"})(["padding:20px;background:var(--background-primary);border-top:1px solid var(--gray-5);margin-top:auto;"]),I=s.ZP.button.withConfig({componentId:"sc-6f6db1c4-21"})(["width:100%;height:56px;background:var(--primary-blue);border:none;border-radius:var(--border-radius-2xl);font-size:18px;font-weight:600;color:white;cursor:pointer;transition:var(--transition-medium);box-shadow:0 4px 20px rgba(0,122,255,0.3);&:hover:not(:disabled){background:#0056CC;transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,122,255,0.4);}&:active:not(:disabled){transform:translateY(0);box-shadow:0 2px 15px rgba(0,122,255,0.3);}&:disabled{background:var(--gray-3);color:var(--text-secondary);cursor:not-allowed;box-shadow:none;transform:none;}"]),Z=[{label:"25분",value:25},{label:"50분",value:50}];function S(){let e=(0,d.useRouter)(),{createSTEPSession:r,currentUser:n}=(0,c.a)(),[s,S]=(0,a.useState)({goal:"",duration:25,scheduledTime:null}),[E,T]=(0,a.useState)(!1),[_,z]=(0,a.useState)(new Date),[D,R]=(0,a.useState)(new Date),[O,H]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=new Date;z(e),R(e)},[]);let N=(e,r)=>{S(n=>(0,t._)((0,o._)({},n),{[e]:r}))},F=e=>{S(r=>(0,t._)((0,o._)({},r),{duration:e}))},K=async()=>{try{if(!n){alert("로그인이 필요합니다."),e.push("/login");return}let o=new Date(_);o.setHours(D.getHours(),D.getMinutes(),0,0);let t={title:s.goal||"STEP 세션",goal:s.goal||"",duration:s.duration,scheduledTime:o.toISOString()};console.log("Creating STEP session with data:",t);let i=await r(t);console.log("STEP session created successfully:",i),e.push("/main")}catch(e){console.error("Failed to start STEP session:",e),console.error("Error details:",e.message,e.stack),alert("STEP 세션 시작에 실패했습니다.\n에러: ".concat(e.message||"알 수 없는 오류"))}};return(0,i.jsxs)(l,{children:[(0,i.jsxs)(p,{children:[(0,i.jsx)(u,{onClick:()=>{e.push("/main")},children:"취소"}),(0,i.jsx)(x,{children:"STEP 시작하기"}),(0,i.jsx)(u,{onClick:K,children:"시작"})]}),(0,i.jsx)(g,{children:(0,i.jsxs)(h,{children:[(0,i.jsx)(b,{children:"STEP 설정"}),O?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{children:"날짜"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"date",value:_.toISOString().split("T")[0],onChange:e=>z(new Date(e.target.value))})})]}),(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{children:"시간"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"time",value:D.toTimeString().slice(0,5),onChange:e=>{let[r,n]=e.target.value.split(":"),o=new Date(D);o.setHours(parseInt(r),parseInt(n)),R(o)}})})]}),(0,i.jsx)(f,{children:(0,i.jsx)("div",{style:{width:"100%",textAlign:"right"},children:(0,i.jsx)(u,{onClick:()=>H(!1),children:"완료"})})})]}):(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{children:"시간"}),(0,i.jsxs)(v,{children:[(0,i.jsx)(w,{onClick:()=>H(!0),children:_.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})}),(0,i.jsx)(w,{onClick:()=>H(!0),children:D.toLocaleTimeString("ko-KR",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{children:"길이"}),(0,i.jsx)(j,{children:Z.map(e=>(0,i.jsx)(k,{active:s.duration===e.value,onClick:()=>F(e.value),children:e.label},e.value))})]}),(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{children:"목표"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"text",placeholder:"목표 입력 (선택사항)",value:s.goal,onChange:e=>N("goal",e.target.value)})})]})]})}),(0,i.jsx)(P,{children:(0,i.jsx)(I,{onClick:K,children:"시작"})})]})}}},function(e){e.O(0,[954,439,81,419,971,966,744],function(){return e(e.s=3205)}),_N_E=e.O()}]);