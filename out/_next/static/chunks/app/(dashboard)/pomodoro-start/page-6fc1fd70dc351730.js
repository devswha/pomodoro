(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{7122:function(e,r,t){Promise.resolve().then(t.bind(t,3544))},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}})},3544:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return D}});var o=t(5583),n=t(1780),i=t(7437),a=t(2265),s=t(9376),l=t(3954),d=t(419);let c=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-0"})(["height:100%;display:flex;flex-direction:column;background:var(--background-secondary);"]),u=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-1"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--background-primary);border-bottom:1px solid var(--gray-5);"]),g=l.ZP.button.withConfig({componentId:"sc-5b0d01b3-2"})(["background:none;border:none;color:var(--primary-blue);font-size:16px;font-weight:500;cursor:pointer;padding:8px 0;min-width:60px;&:hover{opacity:0.7;}&:disabled{color:var(--text-secondary);cursor:not-allowed;}"]),h=l.ZP.h1.withConfig({componentId:"sc-5b0d01b3-3"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0;text-align:center;"]),p=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-4"})(["flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:24px;@media (min-width:769px){padding:30px;gap:32px;}"]),x=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-5"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);"]),m=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-6"})(["font-size:14px;font-weight:600;color:var(--text-secondary);margin-bottom:16px;text-transform:uppercase;letter-spacing:0.5px;"]),b=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-7"})(["display:flex;align-items:center;padding:12px 0;border-bottom:1px solid var(--gray-6);&:last-child{border-bottom:none;}"]),f=l.ZP.label.withConfig({componentId:"sc-5b0d01b3-8"})(["font-size:16px;font-weight:500;color:var(--text-primary);width:80px;min-width:80px;margin-right:16px;"]),v=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-9"})(["display:flex;gap:8px;flex:1;"]),w=l.ZP.button.withConfig({componentId:"sc-5b0d01b3-10"})(["background:var(--gray-6);border:none;border-radius:var(--border-radius-medium);padding:8px 12px;font-size:14px;font-weight:500;color:var(--text-primary);cursor:pointer;transition:var(--transition-fast);flex:1;&:hover{background:var(--gray-5);}&:active{transform:scale(0.98);}"]),y=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-11"})(["flex:1;"]),C=l.ZP.input.withConfig({componentId:"sc-5b0d01b3-12"})(["width:100%;background:transparent;border:none;font-size:16px;color:var(--text-primary);padding:8px 0;&::placeholder{color:var(--text-tertiary);}&:focus{outline:none;}"]),j=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-13"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);display:flex;flex-direction:column;gap:16px;"]),S=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-14"})(["display:flex;justify-content:space-between;align-items:center;padding:12px 0;"]),k=l.ZP.label.withConfig({componentId:"sc-5b0d01b3-15"})(["font-size:16px;font-weight:500;color:var(--text-primary);"]),P=l.ZP.button.withConfig({componentId:"sc-5b0d01b3-16"})(["width:52px;height:32px;background:",";border:none;border-radius:16px;position:relative;cursor:pointer;transition:var(--transition-medium);outline:none;&:focus{box-shadow:0 0 0 2px rgba(0,122,255,0.2);}"],e=>e.active?"var(--primary-blue)":"var(--gray-4)"),I=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-17"})(["width:28px;height:28px;background:white;border-radius:50%;position:absolute;top:2px;left:",";transition:var(--transition-medium);box-shadow:0 2px 4px rgba(0,0,0,0.1);"],e=>e.active?"22px":"2px"),Z=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-18"})(["display:flex;align-items:center;gap:12px;flex:1;"]),E=l.ZP.button.withConfig({componentId:"sc-5b0d01b3-19"})(["background:",";color:",";border:none;border-radius:var(--border-radius-medium);padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:var(--transition-fast);&:hover{background:",";}"],e=>e.active?"var(--primary-blue)":"var(--gray-6)",e=>e.active?"white":"var(--text-primary)",e=>e.active?"#0056CC":"var(--gray-5)"),U=l.ZP.div.withConfig({componentId:"sc-5b0d01b3-20"})(["padding:20px;background:var(--background-primary);border-top:1px solid var(--gray-5);margin-top:auto;"]),z=l.ZP.button.withConfig({componentId:"sc-5b0d01b3-21"})(["width:100%;height:56px;background:var(--primary-blue);border:none;border-radius:var(--border-radius-2xl);font-size:18px;font-weight:600;color:white;cursor:pointer;transition:var(--transition-medium);box-shadow:0 4px 20px rgba(0,122,255,0.3);&:hover:not(:disabled){background:#0056CC;transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,122,255,0.4);}&:active:not(:disabled){transform:translateY(0);box-shadow:0 2px 15px rgba(0,122,255,0.3);}&:disabled{background:var(--gray-3);color:var(--text-secondary);cursor:not-allowed;box-shadow:none;transform:none;}"]),_=[{label:"25분",value:25},{label:"30분",value:30},{label:"45분",value:45},{label:"50분",value:50},{label:"60분",value:60}];function D(){let e=(0,s.useRouter)(),{createPomodoroSession:r}=(0,d.a)(),[t,l]=(0,a.useState)({goal:"",duration:25,scheduledTime:null}),[D,T]=(0,a.useState)(!1),[V,R]=(0,a.useState)(new Date),[A,L]=(0,a.useState)(new Date),[N,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=new Date;R(e),L(e)},[]);let O=(e,r)=>{l(t=>(0,n._)((0,o._)({},t),{[e]:r}))},H=e=>{l(r=>(0,n._)((0,o._)({},r),{duration:e}))},F=async()=>{try{let o=new Date(V);o.setHours(A.getHours(),A.getMinutes(),0,0);let n={title:"뽀모도로 세션",goal:t.goal||"",duration:t.duration,scheduledTime:o.toISOString()};r(n),e.push("/main")}catch(e){console.error("Failed to start pomodoro session:",e)}};return(0,i.jsxs)(c,{children:[(0,i.jsxs)(u,{children:[(0,i.jsx)(g,{onClick:()=>{e.push("/main")},children:"취소"}),(0,i.jsx)(h,{children:"뽀모도로 시작하기"}),(0,i.jsx)(g,{onClick:F,children:"시작"})]}),(0,i.jsxs)(p,{children:[(0,i.jsxs)(x,{children:[(0,i.jsx)(m,{children:"뽀모도로 설정"}),N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{children:"날짜"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"date",value:V.toISOString().split("T")[0],onChange:e=>R(new Date(e.target.value))})})]}),(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{children:"시간"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"time",value:A.toTimeString().slice(0,5),onChange:e=>{let[r,t]=e.target.value.split(":"),o=new Date(A);o.setHours(parseInt(r),parseInt(t)),L(o)}})})]}),(0,i.jsx)(b,{children:(0,i.jsx)("div",{style:{width:"100%",textAlign:"right"},children:(0,i.jsx)(g,{onClick:()=>M(!1),children:"완료"})})})]}):(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{children:"시간"}),(0,i.jsxs)(v,{children:[(0,i.jsx)(w,{onClick:()=>M(!0),children:V.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})}),(0,i.jsx)(w,{onClick:()=>M(!0),children:A.toLocaleTimeString("ko-KR",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{children:"길이"}),(0,i.jsx)(Z,{children:_.map(e=>(0,i.jsx)(E,{active:t.duration===e.value,onClick:()=>H(e.value),children:e.label},e.value))})]}),(0,i.jsxs)(b,{children:[(0,i.jsx)(f,{children:"목표"}),(0,i.jsx)(y,{children:(0,i.jsx)(C,{type:"text",placeholder:"목표 입력 (선택사항)",value:t.goal,onChange:e=>O("goal",e.target.value)})})]})]}),(0,i.jsx)(j,{children:(0,i.jsxs)(S,{children:[(0,i.jsx)(k,{children:"50분 뽀모도로 활성화"}),(0,i.jsx)(P,{active:D,onClick:()=>{T(!D),D?H(25):H(50)},children:(0,i.jsx)(I,{active:D})})]})})]}),(0,i.jsx)(U,{children:(0,i.jsx)(z,{onClick:F,children:"시작"})})]})}},419:function(e,r,t){"use strict";t.d(r,{UserProvider:function(){return c},a:function(){return d}});var o=t(5583),n=t(1780),i=t(7437),a=t(2265),s=t(81);let l=(0,a.createContext)(),d=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useUser must be used within a UserProvider");return e},c=e=>{let{children:r}=e,[t,d]=(0,a.useState)(null),[c]=(0,a.useState)(()=>new s.w),[u,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!0),[v,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=c.getCurrentSession();if(e){let r=c.getUser(e.userId);r?(d(r),p(e.token),m(!0),S(e.userId)):c.logoutSession()}}catch(e){console.error("Error initializing auth:",e),c.logoutSession()}finally{f(!1)}})();let e=setInterval(()=>{if(h){let e=c.validateSession(h);if(e){let r=new Date(e.expiresAt),t=new Date,o=r.getTime()-t.getTime();o>0&&o<=3e5&&!e.rememberMe?w("세션이 ".concat(Math.ceil(o/6e4),"분 후 만료됩니다.")):w(null)}else w("세션이 만료되어 자동으로 로그아웃됩니다."),setTimeout(()=>j(),3e3)}},3e4);return()=>clearInterval(e)},[c,h]);let y=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(f(!0),w(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!r)throw Error("비밀번호를 입력해주세요.");let o=await c.loginUser(e.trim(),r,t);return d(o.user),p(o.sessionToken),m(!0),S(o.user.id),o.user}catch(e){if(console.error("Login failed:",e),e.message.includes("존재하지 않는"))throw Error("존재하지 않는 사용자입니다. 사용자명을 확인해주세요.");if(e.message.includes("비밀번호가 올바르지"))throw e;if(e.message.includes("일시적으로 잠겼습니다"))throw e;throw Error("로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요.")}finally{f(!1)}},C=async(e,r)=>{try{var t;if(f(!0),w(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!(null==r?void 0:null===(t=r.email)||void 0===t?void 0:t.trim()))throw Error("이메일을 입력해주세요.");if(!(null==r?void 0:r.password))throw Error("비밀번호를 입력해주세요.");return await c.registerUser(e.trim(),(0,n._)((0,o._)({},r),{email:r.email.trim()}))}catch(e){if(console.error("Registration failed:",e),e.message.includes("이미 존재하는"))throw Error("이미 사용 중인 사용자명입니다. 다른 사용자명을 선택해주세요.");if(e.message.includes("이미 사용 중인 이메일"))throw Error("이미 사용 중인 이메일 주소입니다. 다른 이메일을 사용해주세요.");if(e.message.includes("비밀번호"))throw e;if(e.message.includes("이메일"))throw e;else if(e.message.includes("사용자명"))throw e;else throw Error("회원가입에 실패했습니다. 입력 정보를 확인하고 다시 시도해주세요.")}finally{f(!1)}},j=()=>{try{c.logoutSession(h),d(null),g(null),p(null),m(!1),w(null)}catch(e){console.error("Logout error:",e),d(null),g(null),p(null),m(!1),w(null)}},S=e=>{let r=c.getActiveSession(e);r&&(new Date<new Date(r.endTime)?g(r):(c.clearActiveSession(e),g(null)))},k=async e=>{if(!t)throw Error("No user logged in");try{let r=await c.updateUserProfile(t.id,e);return d(r),r}catch(e){throw console.error("Profile update failed:",e),e}};return(0,i.jsx)(l.Provider,{value:{currentUser:t,activeSession:u,sessionToken:h,isSessionValid:x,authLoading:b,sessionWarning:v,loginUser:y,registerUser:C,logoutUser:j,createPomodoroSession:e=>{if(!t)throw Error("No user logged in");let r=c.createPomodoroSession(t.id,e);return g(r),r},completePomodoroSession:()=>{t&&u&&(c.completePomodoroSession(t.id,u.id),g(null))},stopPomodoroSession:()=>{t&&u&&(c.stopPomodoroSession(t.id,u.id),g(null))},getUserStats:()=>t?c.getUserStats(t.id):null,getUserSessions:()=>t?c.getUserSessions(t.id):[],updateUserProfile:k,getUserActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return t?c.getUserActivity(t.id,e):null},validateCurrentSession:()=>!!h&&(!!c.validateSession(h)||(j(),!1)),checkPasswordStrength:e=>{if(!e)return{isValid:!1,errors:["비밀번호를 입력해주세요"],warnings:[],score:0,strength:"weak"};let r=[];e.length<4&&r.push("비밀번호는 4자 이상이어야 합니다");let t=Math.min(10*e.length,100),o={medium:t>=50&&t<80,strong:t>=80};return{isValid:0===r.length,errors:r,warnings:[],score:t,strength:o.strong?"strong":o.medium?"medium":"weak"}},validateEmail:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"이메일을 입력해주세요."};let r=e.trim().toLowerCase();return r.includes("@")?{isValid:!0,normalizedEmail:r}:{isValid:!1,error:"이메일에 @가 포함되어야 합니다."}},validateUsername:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"사용자명을 입력해주세요."};let r=e.trim();return r.length<1?{isValid:!1,error:"사용자명을 입력해주세요."}:r.length>50?{isValid:!1,error:"사용자명은 50자 이하여야 합니다."}:{isValid:!0,normalizedUsername:r.toLowerCase()}},extendSession:()=>!!(h&&c.validateSession(h))&&(w(null),!0),dismissSessionWarning:()=>{w(null)},userManager:c},children:r})}}},function(e){e.O(0,[954,81,971,966,744],function(){return e(e.s=7122)}),_N_E=e.O()}]);