(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{9762:function(e,t,n){Promise.resolve().then(n.bind(n,7438))},9376:function(e,t,n){"use strict";var o=n(5475);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})},7438:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var o=n(5583),r=n(1780),i=n(7437),a=n(2265),s=n(9376),d=n(3954),c=n(419);let l=d.ZP.div.withConfig({componentId:"sc-8bdb2009-0"})(["height:100vh;display:flex;flex-direction:column;background:#ffffff;overflow:hidden;"]),f=d.ZP.div.withConfig({componentId:"sc-8bdb2009-1"})(["display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:2px solid #e9ecef;@media (min-width:769px){padding:2rem;}"]),m=d.ZP.button.withConfig({componentId:"sc-8bdb2009-2"})(["background:none;border:none;font-size:1rem;color:#000000;cursor:pointer;padding:0.5rem;&:hover{opacity:0.7;}"]),p=d.ZP.h1.withConfig({componentId:"sc-8bdb2009-3"})(["font-size:1.5rem;font-weight:600;color:#000000;margin:0;text-transform:uppercase;letter-spacing:0.05em;@media (min-width:769px){font-size:1.75rem;}"]),h=d.ZP.button.withConfig({componentId:"sc-8bdb2009-4"})(["background:#000000;color:#ffffff;border:none;padding:0.5rem 1rem;font-size:0.875rem;font-weight:500;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;&:hover{background:#333333;}"]),g=d.ZP.div.withConfig({componentId:"sc-8bdb2009-5"})(["flex:1;padding:1.5rem;overflow-y:auto;@media (min-width:769px){padding:2rem;}"]),b=d.ZP.div.withConfig({componentId:"sc-8bdb2009-6"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1rem;border:2px solid #e9ecef;"]),x=d.ZP.button.withConfig({componentId:"sc-8bdb2009-7"})(["background:none;border:none;font-size:1.5rem;color:#000000;cursor:pointer;padding:0.5rem;&:hover{opacity:0.7;}"]),u=d.ZP.h2.withConfig({componentId:"sc-8bdb2009-8"})(["font-size:1.125rem;font-weight:500;color:#000000;margin:0;"]),w=d.ZP.div.withConfig({componentId:"sc-8bdb2009-9"})(["display:grid;grid-template-columns:repeat(7,1fr);gap:1px;border:2px solid #e9ecef;margin-bottom:2rem;"]),j=d.ZP.div.withConfig({componentId:"sc-8bdb2009-10"})(["background:#f8f9fa;padding:1rem 0.5rem;text-align:center;font-weight:600;font-size:0.875rem;color:#000000;text-transform:uppercase;letter-spacing:0.05em;border-bottom:1px solid #e9ecef;"]),v=d.ZP.div.withConfig({componentId:"sc-8bdb2009-11"})(["background:#ffffff;min-height:120px;padding:0.5rem;border-bottom:1px solid #e9ecef;position:relative;cursor:pointer;&:hover{background:#f8f9fa;}&.other-month{background:#f8f9fa;color:#6c757d;}&.today{background:#000000;color:#ffffff;}"]),C=d.ZP.div.withConfig({componentId:"sc-8bdb2009-12"})(["font-size:0.875rem;font-weight:500;margin-bottom:0.25rem;"]),y=d.ZP.div.withConfig({componentId:"sc-8bdb2009-13"})(["background:",";color:#ffffff;padding:0.25rem 0.5rem;margin-bottom:0.25rem;font-size:0.75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&:hover{opacity:0.8;}"],e=>e.color||"#000000"),k=d.ZP.div.withConfig({componentId:"sc-8bdb2009-14"})(["margin-top:2rem;"]),P=d.ZP.div.withConfig({componentId:"sc-8bdb2009-15"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1.5rem;text-align:center;border:2px dashed #e9ecef;background:#ffffff;min-height:280px;border-radius:8px;position:relative;overflow:hidden;transition:all 0.3s ease;&:hover{border-color:#000000;background:#fafafa;}&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#000000,#6c757d,#000000);opacity:0;transition:opacity 0.3s ease;}&:hover::before{opacity:1;}@media (min-width:769px){padding:4rem 2rem;min-height:320px;border-radius:12px;}"]),I=d.ZP.div.withConfig({componentId:"sc-8bdb2009-16"})(["font-size:4rem;color:#000000;margin-bottom:1.5rem;opacity:0.8;transition:all 0.3s ease;position:relative;&::after{content:'✨';position:absolute;top:-10px;right:-10px;font-size:1.5rem;opacity:0;transition:all 0.3s ease;transform:scale(0.5);}",":hover &{transform:scale(1.1);opacity:1;&::after{opacity:1;transform:scale(1);}}@media (min-width:769px){font-size:5rem;margin-bottom:2rem;}"],P),Z=d.ZP.h3.withConfig({componentId:"sc-8bdb2009-17"})(["font-size:1.25rem;font-weight:700;color:#000000;margin:0 0 0.75rem 0;text-transform:uppercase;letter-spacing:0.1em;transition:all 0.3s ease;",":hover &{color:#000000;transform:translateY(-2px);}@media (min-width:769px){font-size:1.5rem;margin-bottom:1rem;}"],P),z=d.ZP.p.withConfig({componentId:"sc-8bdb2009-18"})(["font-size:0.95rem;color:#6c757d;margin:0 0 2rem 0;line-height:1.6;max-width:320px;transition:all 0.3s ease;",":hover &{color:#495057;transform:translateY(-1px);}@media (min-width:769px){font-size:1.1rem;max-width:450px;margin-bottom:2.5rem;}"],P),D=d.ZP.button.withConfig({componentId:"sc-8bdb2009-19"})(["background:#000000;color:#ffffff;border:none;padding:1rem 2rem;font-size:0.9rem;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;cursor:pointer;border-radius:4px;transition:all 0.3s ease;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s ease;}&:hover{background:#333333;transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.2);&::before{left:100%;}}&:active{transform:translateY(0);box-shadow:0 4px 12px rgba(0,0,0,0.15);}@media (min-width:769px){padding:1.25rem 2.5rem;font-size:1rem;border-radius:6px;}"]),S=d.ZP.h3.withConfig({componentId:"sc-8bdb2009-20"})(["font-size:1.25rem;font-weight:600;color:#000000;margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.05em;"]),Y=d.ZP.div.withConfig({componentId:"sc-8bdb2009-21"})(["border:2px solid #e9ecef;padding:1.5rem;margin-bottom:1rem;cursor:pointer;transition:all 0.3s ease;border-radius:8px;background:#ffffff;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:#000000;transform:scaleY(0);transition:transform 0.3s ease;}&:hover{border-color:#000000;transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,0.1);&::before{transform:scaleY(1);}}@media (min-width:769px){border-radius:12px;padding:2rem;}"]),T=d.ZP.h4.withConfig({componentId:"sc-8bdb2009-22"})(["font-size:1rem;font-weight:600;color:#000000;margin:0 0 0.5rem 0;"]),_=d.ZP.div.withConfig({componentId:"sc-8bdb2009-23"})(["display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:0.5rem;"]),O=d.ZP.span.withConfig({componentId:"sc-8bdb2009-24"})(["font-size:0.875rem;color:#6c757d;strong{color:#000000;}"]),E=d.ZP.p.withConfig({componentId:"sc-8bdb2009-25"})(["font-size:0.875rem;color:#6c757d;margin:0;line-height:1.4;"]),N=d.ZP.div.withConfig({componentId:"sc-8bdb2009-26"})(["margin-top:0.25rem;font-size:0.75rem;color:#6c757d;"]),F=d.ZP.div.withConfig({componentId:"sc-8bdb2009-27"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:1000;"]),A=d.ZP.div.withConfig({componentId:"sc-8bdb2009-28"})(["background:#ffffff;padding:2rem;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;"]),M=d.ZP.h3.withConfig({componentId:"sc-8bdb2009-29"})(["font-size:1.25rem;font-weight:600;color:#000000;margin:0 0 1.5rem 0;text-transform:uppercase;letter-spacing:0.05em;"]),R=d.ZP.div.withConfig({componentId:"sc-8bdb2009-30"})(["margin-bottom:1.5rem;"]),B=d.ZP.label.withConfig({componentId:"sc-8bdb2009-31"})(["display:block;font-size:0.875rem;font-weight:500;color:#000000;margin-bottom:0.5rem;text-transform:uppercase;letter-spacing:0.05em;"]),J=d.ZP.input.withConfig({componentId:"sc-8bdb2009-32"})(["width:100%;padding:1rem;border:2px solid #e9ecef;font-size:1rem;color:#000000;background:#ffffff;transition:all 0.2s ease;&:focus{outline:none;border-color:#000000;transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.1);}&:hover{border-color:#6c757d;}&::placeholder{color:#adb5bd;font-style:italic;}"]),G=d.ZP.textarea.withConfig({componentId:"sc-8bdb2009-33"})(["width:100%;padding:1rem;border:2px solid #e9ecef;font-size:1rem;color:#000000;background:#ffffff;min-height:100px;resize:vertical;font-family:inherit;transition:all 0.2s ease;&:focus{outline:none;border-color:#000000;transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.1);}&:hover{border-color:#6c757d;}&::placeholder{color:#adb5bd;font-style:italic;}"]),K=d.ZP.div.withConfig({componentId:"sc-8bdb2009-34"})(["display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;"]),L=d.ZP.button.withConfig({componentId:"sc-8bdb2009-35"})(["padding:1rem 1.5rem;border:2px solid #000000;font-size:0.875rem;font-weight:500;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;",""],e=>e.primary?"\n    background: #000000;\n    color: #ffffff;\n    \n    &:hover {\n      background: #333333;\n      transform: translateY(-1px);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  ":"\n    background: #ffffff;\n    color: #000000;\n    \n    &:hover {\n      background: #f8f9fa;\n      transform: translateY(-1px);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    }\n    \n    &:active {\n      transform: translateY(0);\n    }\n  "),q=d.ZP.div.withConfig({componentId:"sc-8bdb2009-36"})(["margin-top:1rem;"]),H=d.ZP.button.withConfig({componentId:"sc-8bdb2009-37"})(["padding:0.5rem 1rem;background:#000000;color:#ffffff;border:none;font-size:0.75rem;cursor:pointer;text-transform:uppercase;transition:all 0.2s ease;&:hover{background:#333333;}"]),Q=["일","월","화","수","목","금","토"],U=e=>{if(!e)return"";let[t,n]=e.split(":"),o=parseInt(t,10);return 0===o?"12:".concat(n," AM"):o<12?"".concat(o,":").concat(n," AM"):12===o?"12:".concat(n," PM"):"".concat(o-12,":").concat(n," PM")};function V(){let e=(0,s.useRouter)(),{currentUser:t,sessionToken:n}=(0,c.a)(),[d,V]=(0,a.useState)(new Date),[W,X]=(0,a.useState)([]),[$,ee]=(0,a.useState)(!1),[et,en]=(0,a.useState)(null),[eo,er]=(0,a.useState)({title:"",date:"",time:"",location:"",description:""});(0,a.useEffect)(()=>{t&&n&&ei()},[t,n]);let ei=async()=>{try{let e=await fetch("/api/meetings",{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});if(e.ok){let t=await e.json();X(t.meetings||[])}else console.error("Failed to load meetings:",e.statusText)}catch(e){console.error("Error loading meetings:",e)}},ea=async e=>{try{let t=await fetch("/api/meetings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({title:e.title,meeting_date:e.date,meeting_time:e.time,duration:60,description:e.description,location:e.location})});if(t.ok){let e=await t.json();return await ei(),e.meeting}{let e=await t.json();throw Error(e.error||"Failed to create meeting")}}catch(e){throw console.error("Error creating meeting:",e),e}},es=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||new Date;en(t),er({title:"",date:t.toISOString().split("T")[0],time:"10:00",location:"",description:""}),ee(!0)},ed=()=>{ee(!1),en(null),er({title:"",date:"",time:"",location:"",description:""})},ec=(e,t)=>{er(n=>(0,r._)((0,o._)({},n),{[e]:t}))},el=async()=>{if(!eo.title.trim()){alert("모임 제목을 입력해주세요.");return}if(!eo.date){alert("모임 날짜를 선택해주세요.");return}if(!eo.time){alert("모임 시간을 선택해주세요.");return}if(new Date(eo.date+"T"+eo.time)<new Date){alert("과거 시간으로는 모임을 만들 수 없습니다.");return}try{await ea(eo),ed(),alert("모임이 성공적으로 생성되었습니다!")}catch(e){alert("모임 생성에 실패했습니다: "+e.message)}},ef=async e=>{if(!n){alert("로그인이 필요합니다.");return}try{let t=await fetch("/api/meetings/participants",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({meeting_id:e})}),o=await t.json();if(!t.ok){alert(o.error||"모임 참가에 실패했습니다.");return}await ei(),alert("모임에 참가 신청되었습니다.")}catch(e){console.error("Join meeting error:",e),alert("모임 참가 중 오류가 발생했습니다.")}},em=e=>{let t=new Date(e);return t.setDate(e.getDate()-e.getDay()),t},ep=e=>{let t=new Date(d);t.setDate(d.getDate()+7*e),V(t)},eh=W.filter(e=>new Date(e.date+"T"+e.time)>=new Date).sort((e,t)=>new Date(e.date+"T"+e.time)-new Date(t.date+"T"+t.time)).slice(0,5);return(0,i.jsxs)(l,{children:[(0,i.jsxs)(f,{children:[(0,i.jsx)(m,{onClick:()=>{e.push("/main")},children:"뒤로"}),(0,i.jsx)(p,{children:"모임 일정"}),(0,i.jsx)(h,{onClick:()=>es(),children:"추가"})]}),(0,i.jsxs)(g,{children:[(0,i.jsxs)(b,{children:[(0,i.jsx)(x,{onClick:()=>ep(-1),children:"‹"}),(0,i.jsx)(u,{children:(()=>{let e=em(d),t=new Date(e);return t.setDate(e.getDate()+6),"".concat(e.getMonth()+1,"월 ").concat(e.getDate(),"일 - ").concat(t.getMonth()+1,"월 ").concat(t.getDate(),"일")})()}),(0,i.jsx)(x,{onClick:()=>ep(1),children:"›"})]}),(0,i.jsxs)(w,{children:[Q.map(e=>(0,i.jsx)(j,{children:e},e)),(()=>{let e=em(d),t=[];for(let n=0;n<7;n++){let o=new Date(e);o.setDate(e.getDate()+n);let r=W.filter(e=>e.date===o.toISOString().split("T")[0]),a=o.toDateString()===new Date().toDateString();t.push((0,i.jsxs)(v,{className:a?"today":"",onClick:()=>es(o),children:[(0,i.jsx)(C,{children:o.getDate()}),r.map(e=>(0,i.jsxs)(y,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:U(e.time)})," ",e.title]}),e.participants&&e.participants.length>0&&(0,i.jsx)(N,{children:e.participants.map(e=>e.displayName||e.username||"이름 없음").join(", ")})]},e.id))]},o.toISOString()))}return t})()]}),(0,i.jsxs)(k,{children:[(0,i.jsx)(S,{children:"다가오는 모임"}),0===eh.length?(0,i.jsxs)(P,{children:[(0,i.jsx)(I,{children:"\uD83D\uDCC5"}),(0,i.jsx)(Z,{children:"예정된 모임이 없습니다"}),(0,i.jsxs)(z,{children:["아직 등록된 모임이 없습니다.",(0,i.jsx)("br",{}),"첫 번째 모임을 계획해보세요!"]}),(0,i.jsx)(D,{onClick:()=>es(),children:"첫 모임 만들기"})]}):eh.map(e=>(0,i.jsxs)(Y,{children:[(0,i.jsx)(T,{children:e.title}),(0,i.jsxs)(_,{children:[(0,i.jsxs)(O,{children:[(0,i.jsx)("strong",{children:"날짜:"})," ",new Date(e.date).toLocaleDateString("ko-KR")]}),(0,i.jsxs)(O,{children:[(0,i.jsx)("strong",{children:"시간:"})," ",U(e.time)]}),e.location&&(0,i.jsxs)(O,{children:[(0,i.jsx)("strong",{children:"장소:"})," ",e.location]})]}),e.description&&(0,i.jsx)(E,{children:e.description}),(0,i.jsxs)(O,{children:[(0,i.jsx)("strong",{children:"참석자:"})," ",e.participants&&e.participants.length>0?e.participants.map(e=>e.displayName||e.username||"이름 없음").join(", "):"참석자가 없습니다."]}),!e.isAttending&&(0,i.jsx)(q,{children:(0,i.jsx)(H,{onClick:()=>ef(e.id),children:"참가하기"})})]},e.id))]})]}),$&&(0,i.jsx)(F,{onClick:ed,children:(0,i.jsxs)(A,{onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(M,{children:"모임 만들기"}),(0,i.jsxs)(R,{children:[(0,i.jsx)(B,{htmlFor:"title",children:"모임 제목"}),(0,i.jsx)(J,{id:"title",type:"text",value:eo.title,onChange:e=>ec("title",e.target.value),placeholder:"모임 제목을 입력하세요"})]}),(0,i.jsxs)(R,{children:[(0,i.jsx)(B,{htmlFor:"date",children:"날짜"}),(0,i.jsx)(J,{id:"date",type:"date",value:eo.date,onChange:e=>ec("date",e.target.value)})]}),(0,i.jsxs)(R,{children:[(0,i.jsx)(B,{htmlFor:"time",children:"시간"}),(0,i.jsx)(J,{id:"time",type:"time",value:eo.time,onChange:e=>ec("time",e.target.value)})]}),(0,i.jsxs)(R,{children:[(0,i.jsx)(B,{htmlFor:"location",children:"장소"}),(0,i.jsx)(J,{id:"location",type:"text",value:eo.location,onChange:e=>ec("location",e.target.value),placeholder:"모임 장소를 입력하세요"})]}),(0,i.jsxs)(R,{children:[(0,i.jsx)(B,{htmlFor:"description",children:"설명"}),(0,i.jsx)(G,{id:"description",value:eo.description,onChange:e=>ec("description",e.target.value),placeholder:"모임에 대한 설명을 입력하세요"})]}),(0,i.jsxs)(K,{children:[(0,i.jsx)(L,{onClick:ed,children:"취소"}),(0,i.jsx)(L,{primary:!0,onClick:el,children:"저장"})]})]})})]})}}},function(e){e.O(0,[954,439,81,419,971,966,744],function(){return e(e.s=9762)}),_N_E=e.O()}]);