(()=>{var e={};e.id=337,e.ids=[337],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9219:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>m,tree:()=>c}),i(8929),i(6065),i(5866),i(4378);var n=i(3191),o=i(8716),a=i(7922),s=i.n(a),r=i(5231),d={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);i.d(t,d);let c=["",{children:["(dashboard)",{children:["main",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,8929)),"/home/devswha/workspace/pomodoro/app/(dashboard)/main/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,6065)),"/home/devswha/workspace/pomodoro/app/(dashboard)/layout.js"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,4378)),"/home/devswha/workspace/pomodoro/app/layout.js"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/home/devswha/workspace/pomodoro/app/(dashboard)/main/page.js"],p="/(dashboard)/main/page",u={require:i,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(dashboard)/main/page",pathname:"/main",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},715:(e,t,i)=>{Promise.resolve().then(i.bind(i,4447))},2655:(e,t,i)=>{Promise.resolve().then(i.bind(i,1408))},5047:(e,t,i)=>{"use strict";var n=i(7389);i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}})},4447:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i(326);i(7577);var o=i(5047),a=i(3987);function s({children:e,requireAuth:t=!1}){let{currentUser:i}=(0,a.a)();return((0,o.useRouter)(),t&&!i)?n.jsx("div",{children:"Loading..."}):e}function r({children:e}){return n.jsx(s,{requireAuth:!0,children:e})}},1408:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>e0});var n=i(326),o=i(7577),a=i(5047),s=i(3500),r=i(3987),d=i(6887);let c=s.ZP.nav.withConfig({componentId:"sc-b7e1182c-0"})(["position:fixed;bottom:0;left:0;right:0;background:#ffffff;border-top:2px solid #e9ecef;padding:0.75rem 1rem;z-index:100;backdrop-filter:blur(10px);box-shadow:0 -4px 20px rgba(0,0,0,0.08);transition:all 0.3s ease;&::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#000000,#6c757d,#000000);opacity:0.1;}@media (min-width:769px){position:static;border-top:none;border-bottom:2px solid #e9ecef;padding:1rem 2rem;backdrop-filter:none;box-shadow:none;&::before{display:none;}}"]),l=s.ZP.div.withConfig({componentId:"sc-b7e1182c-1"})(["display:grid;grid-template-columns:repeat(5,1fr);gap:0.5rem;max-width:600px;margin:0 auto;@media (min-width:769px){display:flex;justify-content:center;gap:2rem;max-width:none;}"]),p=s.ZP.button.withConfig({componentId:"sc-b7e1182c-2"})(["display:flex;flex-direction:column;align-items:center;gap:0.25rem;background:none;border:none;padding:0.5rem;cursor:pointer;transition:all 0.3s ease;color:",";font-weight:",";border-radius:8px;position:relative;overflow:hidden;&::before{content:'';position:absolute;bottom:0;left:50%;width:0;height:2px;background:#000000;transition:all 0.3s ease;transform:translateX(-50%);}"," &:hover{color:#000000;background:rgba(0,0,0,0.05);transform:translateY(-1px);&::before{width:20px;}}&:active{transform:translateY(0);}@media (min-width:769px){flex-direction:row;gap:0.5rem;padding:0.75rem 1rem;border-radius:8px;&::before{display:none;}&:hover{background:#f8f9fa;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1);}","}"],e=>e.active?"#000000":"#6c757d",e=>e.active?"600":"400",e=>e.active&&`
    &::before {
      width: 20px;
    }
  `,e=>e.active&&`
      background: #000000;
      color: #ffffff;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
      
      &:hover {
        background: #333333;
        color: #ffffff;
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      }
    `),u=s.ZP.span.withConfig({componentId:"sc-b7e1182c-3"})(["font-size:1.25rem;line-height:1;@media (min-width:769px){font-size:1rem;}"]),m=s.ZP.span.withConfig({componentId:"sc-b7e1182c-4"})(["font-size:0.625rem;font-weight:inherit;text-transform:uppercase;letter-spacing:0.05em;@media (min-width:769px){font-size:0.875rem;}"]),f=s.ZP.div.withConfig({componentId:"sc-b7e1182c-5"})(["display:none;@media (min-width:769px){display:flex;align-items:center;gap:0.5rem;padding:1rem 2rem;background:#f8f9fa;border-bottom:1px solid #e9ecef;font-size:0.875rem;color:#6c757d;}"]),g=s.ZP.button.withConfig({componentId:"sc-b7e1182c-6"})(["background:none;border:none;color:#000000;font-size:0.875rem;font-weight:500;cursor:pointer;padding:0;text-decoration:underline;&:hover{opacity:0.7;}"]),h=s.ZP.span.withConfig({componentId:"sc-b7e1182c-7"})(["color:#adb5bd;font-weight:400;"]),b=s.ZP.span.withConfig({componentId:"sc-b7e1182c-8"})(["color:#000000;font-weight:600;"]),x=s.ZP.div.withConfig({componentId:"sc-b7e1182c-9"})(["height:80px;@media (min-width:769px){display:none;}"]),w=[{path:"/main",icon:"\uD83C\uDFE0",label:"홈",breadcrumb:"대시보드"},{path:"/pomodoro-start",icon:"⏰",label:"시작",breadcrumb:"뽀모도로 시작"},{path:"/meetings",icon:"\uD83D\uDCC5",label:"모임",breadcrumb:"모임 일정"},{path:"/pomodoro-ranking",icon:"\uD83C\uDFC6",label:"랭킹",breadcrumb:"뽀모도로 랭킹"},{path:"/mypage",icon:"\uD83D\uDC64",label:"마이",breadcrumb:"내 정보"}],y=e=>{let t=[{path:"/main",label:"대시보드"},{path:"/pomodoro-start",label:"뽀모도로 시작"},{path:"/meetings",label:"모임 일정"},{path:"/pomodoro-ranking",label:"뽀모도로 랭킹"},{path:"/mypage",label:"내 정보"},{path:"/monthly",label:"월별 통계"},{path:"/full-schedule",label:"전체 일정"},{path:"/onboarding",label:"사용법"},{path:"/dashboard-onboarding",label:"온보딩"}].find(t=>t.path===e);return t?t.label:"페이지"};function v({showBreadcrumb:e=!0}){let t=(0,a.useRouter)(),i=(0,a.usePathname)(),{currentUser:o}=(0,r.a)();if(!o)return null;let s=e=>{i!==e&&t.push(e)};return(0,n.jsxs)(n.Fragment,{children:[e&&"/main"!==i&&(0,n.jsxs)(f,{children:[n.jsx(g,{onClick:()=>{"/main"!==i&&t.push("/main")},children:"홈"}),n.jsx(h,{children:"›"}),n.jsx(b,{children:y(i)})]}),n.jsx(c,{children:n.jsx(l,{children:w.map(e=>(0,n.jsxs)(p,{active:i===e.path,onClick:()=>s(e.path),children:[n.jsx(u,{children:e.icon}),n.jsx(m,{children:e.label})]},e.path))})})]})}var k=i(785);let C=()=>{let{currentUser:e}=(0,r.a)(),{realtimeSession:t,optimisticUpdate:i,isConnected:n,isOnline:a,addToSyncQueue:s}=(0,d.r)(),[c,l]=(0,o.useState)({session:null,timeRemaining:0,isRunning:!1,isPaused:!1,progress:0}),[p,u]=(0,o.useState)([]),m=(0,o.useRef)(),f=(0,o.useRef)(Date.now()),g=(0,o.useRef)(3e3),h=(0,o.useCallback)(()=>{m.current&&clearInterval(m.current),m.current=setInterval(()=>{l(e=>{if(!e.session||!e.isRunning)return e;let t=Date.now(),i=new Date(e.session.end_time).getTime(),n=6e4*e.session.duration,o=t-new Date(e.session.start_time).getTime(),a=Math.max(0,i-t);return a<=0&&"active"===e.session.status?(C(),{...e,timeRemaining:0,progress:100,isRunning:!1}):{...e,timeRemaining:Math.floor(a/1e3),progress:Math.min(100,o/n*100)}})},1e3)},[]),b=(0,o.useCallback)(()=>{m.current&&(clearInterval(m.current),m.current=null)},[]),x=(0,o.useCallback)(async t=>{if(!e)throw Error("User not authenticated");let n=new Date,o=6e4*(t.duration||25),a=t.scheduledTime?new Date(t.scheduledTime):n,s=new Date(a.getTime()+o),r={id:`session_${Date.now()}_${e.id}`,user_id:e.id,title:t.title||"Pomodoro Session",goal:t.goal||"",tags:t.tags||"",location:t.location||"",duration:t.duration||25,start_time:a.toISOString(),end_time:s.toISOString(),status:"active",shared:t.shared||!1,created_at:n.toISOString(),updated_at:n.toISOString()};return await i({type:"INSERT",table:k.ji.POMODORO_SESSIONS,data:r},r),r},[e,i]),w=(0,o.useCallback)(async(t,n)=>{if(!e||!c.session)return;let o={...c.session,...n,updated_at:new Date().toISOString()};if(Date.now()-f.current<g.current){s({type:"UPDATE",table:k.ji.POMODORO_SESSIONS,id:t,data:n,conflict_resolution:"last_write_wins"});return}await i({type:"UPDATE",table:k.ji.POMODORO_SESSIONS,id:t,data:n},o)},[e,c.session,i,s]),y=(0,o.useCallback)(async()=>{if(!c.session||c.isPaused)return;let e=new Date().toISOString();l(e=>({...e,isPaused:!0,isRunning:!1})),b(),await w(c.session.id,{status:"paused",paused_at:e,updated_at:e})},[c.session,c.isPaused,w]),v=(0,o.useCallback)(async()=>{if(!c.session||!c.isPaused)return;let e=new Date().toISOString(),t=c.session.paused_at?Date.now()-new Date(c.session.paused_at).getTime():0,i=new Date(new Date(c.session.end_time).getTime()+t).toISOString();l(e=>({...e,isPaused:!1,isRunning:!0})),h(),await w(c.session.id,{status:"active",end_time:i,paused_at:null,updated_at:e})},[c.session,c.isPaused,w,h]),C=(0,o.useCallback)(async()=>{if(!c.session)return;let t=new Date().toISOString();if(l(e=>({...e,isRunning:!1,isPaused:!1})),b(),await w(c.session.id,{status:"completed",completed_at:t,updated_at:t}),n){let n={type:"UPDATE",table:k.ji.USER_STATS,id:e.id,data:{completed_sessions:"increment",completed_minutes:c.session.duration,updated_at:t}};await i(n,{completed_sessions:"incremented",completed_minutes:"incremented"})}},[c.session,w,b,n,e,i]),S=(0,o.useCallback)(async()=>{if(!c.session)return;let e=new Date().toISOString();l(e=>({...e,isRunning:!1,isPaused:!1,session:null})),b(),await w(c.session.id,{status:"stopped",stopped_at:e,updated_at:e})},[c.session,w,b]),_=(0,o.useCallback)(async(e,t)=>{let n=p.find(t=>t.id===e);if(n)try{switch(t){case"accept_server":l(e=>({...e,session:n.serverVersion}));break;case"accept_local":await i({type:"UPDATE",table:k.ji.POMODORO_SESSIONS,id:n.sessionId,data:n.localVersion},n.localVersion);break;case"merge":let o=j(n.localVersion,n.serverVersion);await i({type:"UPDATE",table:k.ji.POMODORO_SESSIONS,id:n.sessionId,data:o},o),l(e=>({...e,session:o}))}u(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Conflict resolution failed:",e)}},[p,i]),j=(0,o.useCallback)((e,t)=>{let i={...t};return e.updated_at>t.updated_at&&(i.status=e.status,i.updated_at=e.updated_at),e.paused_at&&!t.paused_at&&(i.paused_at=e.paused_at),e.completed_at&&t.completed_at?i.completed_at=new Date(e.completed_at)>new Date(t.completed_at)?e.completed_at:t.completed_at:e.completed_at&&!t.completed_at&&(i.completed_at=e.completed_at,i.status="completed"),i},[]),D=(0,o.useCallback)(async()=>{if(e&&n)try{let{data:t,error:i}=await k.OQ.from(k.ji.POMODORO_SESSIONS).select("*").eq("user_id",e.id).eq("status","active").single();if(i&&"PGRST116"!==i.code)throw i;if(t&&c.session){let e=new Date(c.session.updated_at),i=new Date(t.updated_at);if(Math.abs(e-i)<g.current){let e=`conflict_${Date.now()}`;u(i=>[...i,{id:e,sessionId:c.session.id,localVersion:c.session,serverVersion:t,timestamp:Date.now(),type:"session_update"}]);return}i>e&&l(e=>({...e,session:t}))}else t&&!c.session&&(l(e=>({...e,session:t,isRunning:"active"===t.status,isPaused:"paused"===t.status})),"active"===t.status&&h());f.current=Date.now()}catch(e){console.error("Session sync failed:",e)}},[e,n,c.session,h]);return(0,o.useEffect)(()=>{if(t){let e=c.isRunning;c.isPaused,l(e=>({...e,session:t,isRunning:"active"===t.status,isPaused:"paused"===t.status})),"active"!==t.status||e?"active"!==t.status&&e&&b():h()}else c.session&&(l(e=>({...e,session:null,isRunning:!1,isPaused:!1})),b())},[t,c.isRunning,c.isPaused,h,b]),(0,o.useEffect)(()=>{if(!n||!e)return;let t=setInterval(D,1e4);return()=>clearInterval(t)},[n,e,D]),(0,o.useEffect)(()=>()=>{m.current&&clearInterval(m.current)},[]),{session:c.session,timeRemaining:c.timeRemaining,progress:c.progress,isRunning:c.isRunning,isPaused:c.isPaused,createSession:x,pauseSession:y,resumeSession:v,completeSession:C,stopSession:S,conflicts:p,resolveConflict:_,syncSessionAcrossDevices:D,isConnected:n,isOnline:a}},S=()=>{let{currentUser:e}=(0,r.a)(),{realtimeStats:t,leaderboard:i,isConnected:n,optimisticUpdate:a,broadcastMessage:s}=(0,d.r)(),[c,l]=(0,o.useState)(null),[p,u]=(0,o.useState)([]),[m,f]=(0,o.useState)([]),[g,h]=(0,o.useState)([]),[b,x]=(0,o.useState)([]),[w,y]=(0,o.useState)({}),[v,k]=(0,o.useState)({current:0,longest:0,today:!1}),[C,S]=(0,o.useState)({dailyChallenges:[],weeklyChallenge:null,monthlyChallenge:null,groupChallenges:[]}),_=(0,o.useRef)(0),j=(0,o.useRef)(),D=(0,o.useCallback)(t=>{if(!t||!e)return;let i=Date.now();if(i-_.current<1e3)return;_.current=i;let n=c||{},o={completedSessions:(t.completed_sessions||0)-(n.completed_sessions||0),completedMinutes:(t.completed_minutes||0)-(n.completed_minutes||0),streakDays:(t.streak_days||0)-(n.streak_days||0)};l(t),k({current:t.streak_days||0,longest:t.longest_streak||0,today:F(t.last_session_date)}),I(t,n),R(t),o.completedSessions>0&&N("session_completed",{userId:e.id,username:e.displayName||e.id,totalSessions:t.completed_sessions,delta:o.completedSessions}),o.streakDays>0&&N("streak_increased",{userId:e.id,username:e.displayName||e.id,currentStreak:t.streak_days,delta:o.streakDays})},[c,e,s]),I=(0,o.useCallback)((t,i)=>{let n=[{id:"first_session",condition:t.completed_sessions>=1&&0===i.completed_sessions,title:"First Session Complete!",description:"Completed your first Pomodoro session",icon:"\uD83C\uDF45",points:50},{id:"sessions_10",condition:t.completed_sessions>=10&&i.completed_sessions<10,title:"Getting Started",description:"Completed 10 Pomodoro sessions",icon:"⭐",points:100},{id:"sessions_50",condition:t.completed_sessions>=50&&i.completed_sessions<50,title:"Dedicated Learner",description:"Completed 50 Pomodoro sessions",icon:"\uD83C\uDFAF",points:250},{id:"sessions_100",condition:t.completed_sessions>=100&&i.completed_sessions<100,title:"Pomodoro Master",description:"Completed 100 Pomodoro sessions",icon:"\uD83C\uDFC6",points:500},{id:"hours_10",condition:t.completed_minutes>=600&&i.completed_minutes<600,title:"10 Hours Focus",description:"Focused for 10 hours total",icon:"⏰",points:200},{id:"hours_50",condition:t.completed_minutes>=3e3&&i.completed_minutes<3e3,title:"Focus Champion",description:"Focused for 50 hours total",icon:"\uD83D\uDCAA",points:500},{id:"streak_3",condition:t.streak_days>=3&&i.streak_days<3,title:"3-Day Streak",description:"Maintained focus for 3 consecutive days",icon:"\uD83D\uDD25",points:150},{id:"streak_7",condition:t.streak_days>=7&&i.streak_days<7,title:"Week Warrior",description:"Maintained focus for 7 consecutive days",icon:"⚡",points:300},{id:"streak_30",condition:t.streak_days>=30&&i.streak_days<30,title:"Monthly Master",description:"Maintained focus for 30 consecutive days",icon:"\uD83D\uDC51",points:1e3},{id:"completion_rate_80",condition:t.completion_rate>=80&&i.completion_rate<80,title:"Efficient Focuser",description:"80% session completion rate",icon:"\uD83C\uDFAF",points:200},{id:"completion_rate_95",condition:t.completion_rate>=95&&i.completion_rate<95,title:"Focus Perfectionist",description:"95% session completion rate",icon:"\uD83D\uDC8E",points:500},{id:"early_bird",condition:P(t),title:"Early Bird",description:"Complete 10 sessions before 8 AM",icon:"\uD83C\uDF05",points:300},{id:"night_owl",condition:O(t),title:"Night Owl",description:"Complete 10 sessions after 10 PM",icon:"\uD83E\uDD89",points:300}].filter(e=>e.condition).map(t=>({...t,unlockedAt:new Date().toISOString(),userId:e.id}));n.length>0&&(h(e=>[...n,...e]),n.forEach(t=>{N("achievement_unlocked",{userId:e.id,username:e.displayName||e.id,achievement:t})}))},[e,s]),P=(0,o.useCallback)(e=>!1,[]),O=(0,o.useCallback)(e=>!1,[]),R=(0,o.useCallback)(e=>{y(t=>{let i={...t};return(!t.longestStreak||e.longest_streak>t.longestStreak)&&(i.longestStreak=e.longest_streak,i.longestStreakDate=new Date().toISOString()),(!t.bestCompletionRate||e.completion_rate>t.bestCompletionRate)&&(i.bestCompletionRate=e.completion_rate,i.bestCompletionRateDate=new Date().toISOString()),i})},[]),Z=(0,o.useCallback)(t=>{u(i=>{let n=i.filter(t=>t.user_id!==e?.id),o={user_id:e.id,username:e.displayName||e.id,completed_sessions:t.completed_sessions,completed_minutes:t.completed_minutes,streak_days:t.streak_days,completion_rate:t.completion_rate,total_points:E(t),last_active:new Date().toISOString()};return n.push(o),n.sort((e,t)=>t.total_points!==e.total_points?t.total_points-e.total_points:t.completed_minutes-e.completed_minutes)})},[e]),E=(0,o.useCallback)(e=>{let t;return t=0+10*e.completed_sessions+Math.min(20*e.streak_days,1e3),e.completion_rate>=90?t+=500:e.completion_rate>=80?t+=250:e.completion_rate>=70&&(t+=100),t+=g.reduce((e,t)=>e+(t.points||0),0)},[g]),T=(0,o.useCallback)(async t=>{let i={id:`challenge_${Date.now()}`,...t,created_by:e.id,created_at:new Date().toISOString(),status:"active",participants:[e.id]};return x(e=>[...e,i]),t.isPublic&&await s("global-challenges","challenge_created",i),i},[e,s]),z=(0,o.useCallback)(async t=>{x(i=>i.map(i=>i.id===t?{...i,participants:[...i.participants,e.id]}:i)),await s("global-challenges","challenge_joined",{challengeId:t,userId:e.id,username:e.displayName||e.id})},[e,s]),$=(0,o.useCallback)(()=>{let e=new Date().toISOString().split("T")[0],t=[{id:`daily_sessions_${e}`,title:"Daily Focus",description:"Complete 5 Pomodoro sessions today",target:5,type:"sessions",period:"daily",reward:100,deadline:new Date().setHours(23,59,59,999)},{id:`daily_minutes_${e}`,title:"Time Master",description:"Focus for 2 hours today",target:120,type:"minutes",period:"daily",reward:150,deadline:new Date().setHours(23,59,59,999)}];S(e=>({...e,dailyChallenges:t}))},[]),N=(0,o.useCallback)(async(e,t)=>{if(n)try{await s("global-activity",e,{...t,timestamp:new Date().toISOString()})}catch(e){console.error("Failed to broadcast achievement:",e)}},[n,s]),F=(0,o.useCallback)(e=>{if(!e)return!1;let t=new Date().toISOString().split("T")[0];return e.split("T")[0]===t},[]),M=(0,o.useCallback)((t=p)=>{let i=t.findIndex(t=>t.user_id===e?.id);return i>=0?i+1:null},[p,e]),A=(0,o.useCallback)((e=0,t=10)=>p.slice(e,e+t),[p]),q=(0,o.useCallback)((e=5)=>{let t=M();if(!t)return[];let i=Math.min(p.length,t+e);return p.slice(Math.max(0,t-e-1),i)},[M,p]);return(0,o.useEffect)(()=>{t&&(D(t),Z(t))},[t,D,Z]),(0,o.useEffect)(()=>{i&&i.length>0&&u(i)},[i]),(0,o.useEffect)(()=>{e&&$()},[e,$]),(0,o.useEffect)(()=>()=>{j.current&&clearTimeout(j.current)},[]),{userStats:c,streakData:v,personalBests:w,globalLeaderboard:p,friendsLeaderboard:m,getUserRank:M,getLeaderboardSlice:A,getUsersNearby:q,achievements:g,challenges:b,competitiveFeatures:C,createChallenge:T,joinChallenge:z,isConnected:n,calculateTotalPoints:E}},_=()=>{let{currentUser:e}=(0,r.a)(),{onlineUsers:t,updatePresence:i,isConnected:n,broadcastMessage:a}=(0,d.r)(),[s,c]=(0,o.useState)({status:"online",activity:"idle",lastSeen:new Date().toISOString(),customStatus:null}),[l,p]=(0,o.useState)(new Map),[u,m]=(0,o.useState)([]),[f,g]=(0,o.useState)({studyBuddies:[],activeRooms:[],invitations:[]});(0,o.useRef)();let h=(0,o.useRef)(),b=(0,o.useRef)(Date.now()),x=(0,o.useRef)(),w=(0,o.useCallback)((e="active")=>{b.current=Date.now();let t={...s,activity:e,lastSeen:new Date().toISOString(),status:"in_session"===e?"busy":"online"};c(t),n&&i(t),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{c(e=>({...e,status:"away",activity:"idle"})),n&&i({status:"away",activity:"idle",lastSeen:new Date().toISOString()})},6e5)},[s,n,i]),y=(0,o.useCallback)(async(t,o=null)=>{let r={...s,status:t,customStatus:o,lastSeen:new Date().toISOString()};c(r),n&&(await i(r),await a("user-status","status_changed",{userId:e?.id,status:t,customStatus:o,timestamp:new Date().toISOString()}))},[s,n,i,a,e]),v=(0,o.useCallback)(async(t,i={})=>{w(t);let o={id:`activity_${Date.now()}`,userId:e?.id,activity:t,metadata:i,timestamp:new Date().toISOString()};m(e=>[o,...e.slice(0,49)]),n&&["in_session","completed_session","joined_room"].includes(t)&&await a("activity-feed","user_activity",o)},[w,e,n,a]),C=(0,o.useCallback)(async(t,i=null)=>{if(!n||!e)return;let o={id:`invite_${Date.now()}`,from:e.id,to:t,type:"study_buddy",sessionId:i,message:`${e.displayName||e.id} invited you to study together`,timestamp:new Date().toISOString(),status:"pending"};return await a(`user-${t}`,"study_invitation",o),g(e=>({...e,invitations:[...e.invitations,{...o,outgoing:!0}]})),o},[n,e,a]),S=(0,o.useCallback)(async(e,t)=>{let i=f.invitations.find(t=>t.id===e);if(!i)return;let n={invitationId:e,response:t,respondedAt:new Date().toISOString()};await a(`user-${i.from}`,"invitation_response",n),"accept"===t?g(t=>({...t,studyBuddies:[...t.studyBuddies,i.from],invitations:t.invitations.filter(t=>t.id!==e)})):g(t=>({...t,invitations:t.invitations.filter(t=>t.id!==e)}))},[f.invitations,a]),_=(0,o.useCallback)(async(t,i=!1)=>{if(!n||!e)return;let o={id:`room_${Date.now()}`,name:t,creator:e.id,isPublic:i,members:[e.id],createdAt:new Date().toISOString(),status:"active"},a=k.OQ.channel(`study-room-${o.id}`,{config:{presence:{key:e.id}}});return a.on("presence",{event:"sync"},()=>{let e=Object.keys(a.presenceState());g(t=>({...t,activeRooms:t.activeRooms.map(t=>t.id===o.id?{...t,members:e}:t)}))}).on("broadcast",{event:"room_message"},({payload:e})=>{console.log("Room message:",e)}).subscribe(async t=>{"SUBSCRIBED"===t&&await a.track({user_id:e.id,username:e.displayName||e.id,joined_at:new Date().toISOString()})}),x.current=a,g(e=>({...e,activeRooms:[...e.activeRooms,o]})),await v("joined_room",{roomId:o.id,roomName:t}),o},[n,e,v]),j=(0,o.useCallback)(async t=>{if(!n||!e)return;let i=k.OQ.channel(`study-room-${t}`);await i.subscribe(async n=>{"SUBSCRIBED"===n&&(await i.track({user_id:e.id,username:e.displayName||e.id,joined_at:new Date().toISOString()}),await v("joined_room",{roomId:t}))}),x.current=i},[n,e,v]),D=(0,o.useCallback)(async e=>{x.current&&(await x.current.unsubscribe(),x.current=null),g(t=>({...t,activeRooms:t.activeRooms.filter(t=>t.id!==e)})),await v("left_room",{roomId:e})},[v]),I=(0,o.useCallback)(async(t,i,n="chat")=>{if(!x.current)return;let o={id:`msg_${Date.now()}`,userId:e?.id,username:e?.displayName||e?.id,message:i,type:n,timestamp:new Date().toISOString()};await x.current.send({type:"broadcast",event:"room_message",payload:o})},[e]),P=(0,o.useCallback)(e=>l.get(e)||{status:"offline",activity:"idle",lastSeen:null},[l]),O=(0,o.useCallback)(()=>t.filter(e=>"online"===e.status).length,[t]),R=(0,o.useCallback)(()=>t.filter(e=>"in_session"===e.activity),[t]),Z=(0,o.useCallback)(e=>t.filter(t=>t.activity===e),[t]),E=(0,o.useCallback)(e=>{w("active");let t={session_start:"in_session",session_complete:"completed_session",session_pause:"paused_session",meeting_join:"in_meeting"};t[e]&&v(t[e])},[w,v]);return(0,o.useEffect)(()=>{let e=new Map;t.forEach(t=>{e.set(t.user_id,{status:t.status||"online",activity:t.activity||"idle",lastSeen:t.last_seen||new Date().toISOString(),customStatus:t.custom_status||null,activeSession:t.active_session||null})}),p(e)},[t]),(0,o.useEffect)(()=>{let e=["mousedown","mousemove","keypress","scroll","touchstart"],t=()=>{w("active")};return e.forEach(e=>{document.addEventListener(e,t,!0)}),w("active"),()=>{e.forEach(e=>{document.removeEventListener(e,t,!0)}),h.current&&clearTimeout(h.current)}},[w]),(0,o.useEffect)(()=>{let e=()=>{n&&i({status:"offline",lastSeen:new Date().toISOString()})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[n,i]),{presenceState:s,setStatus:y,setActivity:v,trackUserInteraction:E,onlineUsers:t,userStatuses:l,getUserStatus:P,getOnlineCount:O,getActiveSessionUsers:R,getUsersInSameActivity:Z,activityHistory:u,socialFeatures:f,inviteStudyBuddy:C,respondToInvitation:S,createStudyRoom:_,joinStudyRoom:j,leaveStudyRoom:D,sendRoomMessage:I,isConnected:n}},j=()=>{let{currentUser:e}=(0,r.a)(),{notifications:t,addNotification:i,markNotificationAsRead:n,clearNotifications:a,isConnected:s}=(0,d.r)(),[c,l]=(0,o.useState)({pushEnabled:!0,soundEnabled:!0,sessionReminders:!0,meetingReminders:!0,achievementAlerts:!0,socialNotifications:!0,breakReminders:!0,streakReminders:!0,weeklyGoalReminders:!0}),[p,u]=(0,o.useState)([]),[m,f]=(0,o.useState)({volume:.7,sessionComplete:"/sounds/session-complete.mp3",breakTime:"/sounds/break-time.mp3",reminder:"/sounds/reminder.mp3",achievement:"/sounds/achievement.mp3",notification:"/sounds/notification.mp3"}),[g,h]=(0,o.useState)("default"),b=(0,o.useRef)(),x=(0,o.useRef)(new Map),w=(0,o.useRef)([]),y=(0,o.useCallback)(async()=>{if(!("Notification"in window)){console.warn("Notifications not supported");return}h(Notification.permission);try{b.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.warn("Audio context not supported:",e)}let t=localStorage.getItem(`notifications_${e?.id}`);t&&l(JSON.parse(t)),await j()},[e]),v=(0,o.useCallback)(async()=>{if(!("Notification"in window))throw Error("Notifications not supported");let e=await Notification.requestPermission();return h(e),"granted"===e},[]),k=(0,o.useCallback)(async(e,t={})=>{if(c.pushEnabled&&"granted"===g)try{let i=new Notification(e,{body:t.body||"",icon:t.icon||"/icons/pomodoro-icon-192.png",badge:"/icons/badge-72.png",tag:t.tag||"pomodoro",silent:!c.soundEnabled,timestamp:Date.now(),requireInteraction:t.requireInteraction||!1,actions:t.actions||[],data:t.data||{},...t});return i.onclick=()=>{window.focus(),t.onClick&&t.onClick(),i.close()},t.requireInteraction||setTimeout(()=>{i.close()},t.duration||5e3),i}catch(e){console.error("Failed to show notification:",e)}},[c,g]),C=(0,o.useCallback)(async(e="notification")=>{if(c.soundEnabled&&b.current)try{let t=m[e];if(!t)return;let i=new Audio(t);i.volume=m.volume,await i.play()}catch(e){console.warn("Failed to play notification sound:",e)}},[c.soundEnabled,m]),S=(0,o.useCallback)((t,i,n={})=>{let o=t-Date.now();if(o<=0)return k(i,n),null;let a=setTimeout(()=>{k(i,n),C(n.soundType),x.current.delete(a)},o);x.current.set(a,{id:a,scheduledTime:t,title:i,options:n});let s=Array.from(x.current.values());return localStorage.setItem(`scheduled_notifications_${e?.id}`,JSON.stringify(s)),a},[k,C,e]),_=(0,o.useCallback)(t=>{clearTimeout(t),x.current.delete(t);let i=Array.from(x.current.values());localStorage.setItem(`scheduled_notifications_${e?.id}`,JSON.stringify(i))},[e]),j=(0,o.useCallback)(async()=>{if(e)try{let t=localStorage.getItem(`scheduled_notifications_${e.id}`);if(!t)return;let i=JSON.parse(t),n=Date.now();i.forEach(e=>{e.scheduledTime>n&&S(e.scheduledTime,e.title,e.options)})}catch(e){console.error("Failed to resume scheduled notifications:",e)}},[e,S]),D=(0,o.useCallback)(async e=>{c.sessionReminders&&(await k("Pomodoro Complete! \uD83C\uDF45",{body:`Great job! You completed "${e.title}". Time for a break!`,tag:"session-complete",requireInteraction:!0,actions:[{action:"break",title:"Take Break"},{action:"continue",title:"Continue Working"}],data:{sessionId:e.id,type:"session_complete"},soundType:"sessionComplete"}),await C("sessionComplete"),i({type:"session_complete",title:"Session Complete!",message:`You completed "${e.title}"`,session:e,timestamp:new Date().toISOString(),actions:["break","continue"]}))},[c.sessionReminders,k,C,i]),I=(0,o.useCallback)(async(e=5)=>{c.breakReminders&&(await k("Break Time! ☕",{body:`Take a ${e}-minute break. You've earned it!`,tag:"break-time",data:{type:"break_time",duration:e},soundType:"breakTime"}),await C("breakTime"))},[c.breakReminders,k,C]),P=(0,o.useCallback)(async(e,t)=>{if(!c.meetingReminders)return;let n=t<=0?"Meeting Starting Now!":`Meeting in ${t} minutes`,o=t<=5?"urgent":"normal";await k(n,{body:`"${e.title}" ${t<=0?"is starting now":`starts in ${t} minutes`}`,tag:`meeting-${e.id}`,requireInteraction:t<=0,data:{type:"meeting_reminder",meetingId:e.id,urgency:o},soundType:"reminder"}),await C("reminder"),i({type:"meeting_reminder",title:n,message:`"${e.title}" meeting reminder`,meeting:e,minutesUntil:t,timestamp:new Date().toISOString()})},[c.meetingReminders,k,C,i]),O=(0,o.useCallback)(async e=>{c.achievementAlerts&&(await k(`Achievement Unlocked! ${e.icon}`,{body:`${e.title}: ${e.description}`,tag:"achievement",data:{type:"achievement",achievementId:e.id},soundType:"achievement"}),await C("achievement"),i({type:"achievement",title:"Achievement Unlocked!",message:`${e.title}: ${e.description}`,achievement:e,timestamp:new Date().toISOString()}))},[c.achievementAlerts,k,C,i]),R=(0,o.useCallback)(async e=>{c.streakReminders&&(await k(`${e}-Day Streak! 🔥`,{body:"Keep your focus streak alive! Start a session today.",tag:"streak-reminder",data:{type:"streak_reminder",streakDays:e}}),i({type:"streak_reminder",title:"Maintain Your Streak",message:`You have a ${e}-day streak. Don't break it!`,streakDays:e,timestamp:new Date().toISOString()}))},[c.streakReminders,k,i]),Z=(0,o.useCallback)(async(e,t)=>{if(!c.weeklyGoalReminders)return;let n=t-e,o=Math.round(e/t*100);await k("Weekly Goal Progress \uD83D\uDCCA",{body:`${o}% complete. ${n} minutes to go!`,tag:"weekly-goal",data:{type:"weekly_goal",progress:e,goal:t,percentage:o}}),i({type:"weekly_goal",title:"Weekly Goal Progress",message:`${o}% complete. ${n} minutes remaining.`,progress:e,goal:t,percentage:o,timestamp:new Date().toISOString()})},[c.weeklyGoalReminders,k,i]),E=(0,o.useCallback)(async(e,t)=>{if(!c.socialNotifications)return;let n={study_invitation:`${t.username} invited you to study together`,buddy_online:`Your study buddy ${t.username} is online`,room_joined:`${t.username} joined your study room`,challenge_invitation:`${t.username} challenged you to a focus challenge`};await k("Social Update \uD83D\uDC65",{body:n[e]||"Social notification",tag:"social",data:{type:"social",socialType:e,...t}}),i({type:"social",socialType:e,title:"Social Update",message:n[e]||"Social notification",data:t,timestamp:new Date().toISOString()})},[c.socialNotifications,k,i]),T=(0,o.useCallback)(async()=>{let e=[...w.current];if(w.current=[],0!==e.length)for(let[t,i]of Object.entries(e.reduce((e,t)=>{let i=`${t.type}_${t.tag||"default"}`;return e[i]||(e[i]=[]),e[i].push(t),e},{})))if(1===i.length){let e=i[0];await k(e.title,e.options)}else{let e=i[0].type;await k(`${i.length} ${e} notifications`,{body:"Tap to view all notifications",tag:"batch",data:{type:"batch",notifications:i}})}},[k]),z=(0,o.useCallback)((e,t={})=>{w.current.push({title:e,options:t,type:t.type||"general"})},[]),$=(0,o.useCallback)(t=>{l(i=>{let n={...i,...t};return localStorage.setItem(`notifications_${e?.id}`,JSON.stringify(n)),n})},[e]),N=(0,o.useCallback)(t=>{f(i=>{let n={...i,...t};return localStorage.setItem(`sound_settings_${e?.id}`,JSON.stringify(n)),n})},[e]),F=(0,o.useCallback)(async()=>{await k("Test Notification \uD83E\uDDEA",{body:"This is a test notification to check if everything works correctly.",tag:"test",soundType:"notification"}),await C("notification")},[k,C]);return(0,o.useEffect)(()=>{e&&y()},[e,y]),(0,o.useEffect)(()=>{let e=setInterval(T,2e3);return()=>clearInterval(e)},[T]),(0,o.useEffect)(()=>()=>{x.current.forEach((e,t)=>{clearTimeout(t)})},[]),{notifications:t,activeAlerts:p,permissionStatus:g,notificationSettings:c,soundSettings:m,updateNotificationSettings:$,updateSoundSettings:N,requestPermission:v,showNotification:k,playNotificationSound:C,queueNotification:z,scheduleNotification:S,cancelScheduledNotification:_,sessionCompleteNotification:D,breakTimeNotification:I,meetingReminderNotification:P,achievementNotification:O,streakReminderNotification:R,weeklyGoalReminderNotification:Z,socialNotification:E,markNotificationAsRead:n,clearNotifications:a,testNotification:F,isConnected:s}},D=()=>{let{currentUser:e}=(0,r.a)(),{isOnline:t,isConnected:i,addToSyncQueue:n}=(0,d.r)(),[a,s]=(0,o.useState)([]),[c,l]=(0,o.useState)("idle"),[p,u]=(0,o.useState)({sessions:[],stats:null,meetings:[],preferences:null}),[m,f]=(0,o.useState)([]),[g,h]=(0,o.useState)(null),[b,x]=(0,o.useState)({totalOperations:0,successfulSyncs:0,failedSyncs:0,conflictsResolved:0}),w=(0,o.useRef)(),y=(0,o.useRef)(),v=(0,o.useCallback)((e,t)=>{try{let i=JSON.stringify(t);return localStorage.setItem(`offline_${e}`,i),!0}catch(e){return console.error("Failed to save offline data:",e),!1}},[]),C=(0,o.useCallback)(e=>{try{let t=localStorage.getItem(`offline_${e}`);return t?JSON.parse(t):null}catch(e){return console.error("Failed to load offline data:",e),null}},[]);(0,o.useCallback)(e=>{try{return localStorage.removeItem(`offline_${e}`),!0}catch(e){return console.error("Failed to remove offline data:",e),!1}},[]);let S=(0,o.useCallback)(e=>{let t={id:`offline_${Date.now()}_${Math.random()}`,...e,timestamp:Date.now(),retries:0,status:"pending",priority:e.priority||1};return s(e=>[...e,t].sort((e,t)=>t.priority!==e.priority?t.priority-e.priority:e.timestamp-t.timestamp)),v("queue",a),t.id},[a,v]),_=(0,o.useCallback)(e=>{s(t=>{let i=t.filter(t=>t.id!==e);return v("queue",i),i})},[v]),j=(0,o.useCallback)((e,t)=>{s(i=>{let n=i.map(i=>i.id===e?{...i,...t}:i);return v("queue",n),n})},[v]),D=(0,o.useCallback)(async t=>{let i={id:`offline_session_${Date.now()}`,user_id:e.id,...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),status:"active",offline:!0};u(e=>({...e,sessions:[...e.sessions,i]}));let n=S({type:"INSERT",table:k.ji.POMODORO_SESSIONS,data:{...i,offline:void 0},localId:i.id,priority:3});return{session:i,queueId:n}},[e,S]),I=(0,o.useCallback)(async(e,t)=>(u(i=>({...i,sessions:i.sessions.map(i=>i.id===e?{...i,...t,updated_at:new Date().toISOString()}:i)})),S({type:"UPDATE",table:k.ji.POMODORO_SESSIONS,id:e,data:t,priority:2})),[S]),P=(0,o.useCallback)(async t=>{let i={...p.stats,...t,updated_at:new Date().toISOString()};return u(e=>({...e,stats:i})),S({type:"UPDATE",table:k.ji.USER_STATS,id:e.id,data:t,priority:1})},[p.stats,e,S]),O=(0,o.useCallback)(async t=>{let i={id:`offline_meeting_${Date.now()}`,user_id:e.id,...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),offline:!0};u(e=>({...e,meetings:[...e.meetings,i]}));let n=S({type:"INSERT",table:k.ji.MEETINGS,data:{...i,offline:void 0},localId:i.id,priority:2});return{meeting:i,queueId:n}},[e,S]),R=(0,o.useCallback)(async e=>{let{type:t,table:i,data:n,id:o,localId:a}=e;try{let e;switch(t){case"INSERT":let{data:s,error:r}=await k.OQ.from(i).insert(n).select().single();if(r)throw r;a&&s&&Z(i,a,s.id),e=s;break;case"UPDATE":let{data:d,error:c}=await k.OQ.from(i).update(n).eq("id",o).select().single();if(c)throw c;e=d;break;case"DELETE":let{error:l}=await k.OQ.from(i).delete().eq("id",o);if(l)throw l;e={deleted:!0};break;default:throw Error(`Unknown operation type: ${t}`)}return{success:!0,data:e}}catch(e){if(console.error("Sync operation failed:",e),"23505"===e.code||e.message.includes("conflict"))return{success:!1,conflict:!0,error:e};return{success:!1,error:e}}},[]),Z=(0,o.useCallback)((e,t,i)=>{u(n=>{let o={...n};switch(e){case k.ji.POMODORO_SESSIONS:o.sessions=o.sessions.map(e=>e.id===t?{...e,id:i,offline:!1}:e);break;case k.ji.MEETINGS:o.meetings=o.meetings.map(e=>e.id===t?{...e,id:i,offline:!1}:e)}return o})},[]),E=(0,o.useCallback)(async()=>{if(!t||!i||0===a.length)return;l("syncing");let e=a.filter(e=>"pending"===e.status),n={successful:0,failed:0,conflicts:0};for(let t of e){try{j(t.id,{status:"syncing"});let e=await R(t);if(e.success)_(t.id),n.successful++;else if(e.conflict){let i={id:`conflict_${Date.now()}`,operation:t,error:e.error,timestamp:Date.now()};f(e=>[...e,i]),j(t.id,{status:"conflict"}),n.conflicts++}else{let i=t.retries+1;i>=3?(j(t.id,{status:"failed",error:e.error.message}),n.failed++):j(t.id,{status:"pending",retries:i,lastError:e.error.message})}}catch(e){console.error("Queue processing error:",e),j(t.id,{status:"error",error:e.message}),n.failed++}await new Promise(e=>setTimeout(e,100))}l(n.failed>0?"error":"success"),h(Date.now()),x(t=>({totalOperations:t.totalOperations+e.length,successfulSyncs:t.successfulSyncs+n.successful,failedSyncs:t.failedSyncs+n.failed,conflictsResolved:t.conflictsResolved+n.conflicts}))},[t,i,a,j,R,_]),T=(0,o.useCallback)(async(e,t)=>{let i=m.find(t=>t.id===e);if(i)try{switch(t){case"retry":j(i.operation.id,{status:"pending",retries:0});break;case"skip":_(i.operation.id)}f(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Conflict resolution failed:",e)}},[m,j,_]),z=(0,o.useCallback)(async()=>{if(e&&t&&i)try{let{data:t}=await k.OQ.from(k.ji.POMODORO_SESSIONS).select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50),{data:i}=await k.OQ.from(k.ji.USER_STATS).select("*").eq("user_id",e.id).single(),{data:n}=await k.OQ.from(k.ji.MEETINGS).select("*").eq("user_id",e.id).gte("date",new Date().toISOString().split("T")[0]),o={sessions:t||[],stats:i,meetings:n||[],lastCached:Date.now()};u(o),v("data",o)}catch(e){console.error("Failed to fetch and cache data:",e)}},[e,t,i,v]),$=(0,o.useCallback)(()=>{if(!e)return;let t=C("data");t&&u(t);let i=C("queue");i&&Array.isArray(i)&&s(i);let n=C("metrics");n&&x(n)},[e,C]),N=(0,o.useCallback)(()=>{y.current&&clearInterval(y.current),y.current=setInterval(()=>{v("data",p),v("queue",a),v("metrics",b)},5e3)},[p,a,b,v]);return(0,o.useEffect)(()=>(t&&i?(E(),w.current&&clearInterval(w.current),w.current=setInterval(E,3e4)):w.current&&clearInterval(w.current),()=>{w.current&&clearInterval(w.current)}),[t,i,E]),(0,o.useEffect)(()=>{e&&($(),N(),t&&i&&z())},[e,$,N,z,t,i]),(0,o.useEffect)(()=>()=>{w.current&&clearInterval(w.current),y.current&&clearInterval(y.current)},[]),{offlineData:p,offlineQueue:a,addToOfflineQueue:S,removeFromQueue:_,updateQueueItem:j,syncStatus:c,processOfflineQueue:E,lastSyncTimestamp:g,syncMetrics:b,createOfflineSession:D,updateOfflineSession:I,updateOfflineStats:P,createOfflineMeeting:O,conflictQueue:m,resolveConflict:T,isOnline:t,isConnected:i,fetchAndCacheData:z}},I=(0,s.F4)(["0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}"]),P=(0,s.F4)(["from{transform:translateX(100%);opacity:0;}to{transform:translateX(0);opacity:1;}"]),O=(0,s.F4)(["0%{opacity:0.5;}50%{opacity:1;}100%{opacity:0.5;}"]),R=s.ZP.div.withConfig({componentId:"sc-d73fd898-0"})(["display:grid;grid-template-columns:1fr 300px;gap:20px;min-height:100vh;padding:20px;background-color:#ffffff;color:#000000;@media (max-width:768px){grid-template-columns:1fr;padding:10px;}"]),Z=s.ZP.div.withConfig({componentId:"sc-d73fd898-1"})(["display:flex;flex-direction:column;gap:20px;"]),E=s.ZP.div.withConfig({componentId:"sc-d73fd898-2"})(["display:flex;flex-direction:column;gap:15px;padding:20px;border:2px solid #e9ecef;background-color:#f8f9fa;@media (max-width:768px){order:-1;padding:15px;}"]),T=s.ZP.div.withConfig({componentId:"sc-d73fd898-3"})(["display:flex;align-items:center;gap:8px;padding:8px 12px;border:2px solid ",";background-color:",";font-size:14px;font-weight:bold;text-transform:uppercase;letter-spacing:1px;"],e=>"connected"===e.status?"#28a745":"connecting"===e.status?"#ffc107":"#dc3545",e=>"connected"===e.status?"#d4edda":"connecting"===e.status?"#fff3cd":"#f8d7da"),z=s.ZP.div.withConfig({componentId:"sc-d73fd898-4"})(["width:8px;height:8px;border-radius:50%;background-color:",";animation:"," 1.5s infinite;"],e=>"connected"===e.status?"#28a745":"connecting"===e.status?"#ffc107":"#dc3545",e=>"connecting"===e.status?O:"none"),$=s.ZP.div.withConfig({componentId:"sc-d73fd898-5"})(["border:2px solid #000000;padding:20px;background-color:",";position:relative;",""],e=>e.active?"#f8f9fa":"#ffffff",e=>e.active&&`
    animation: ${I} 2s infinite;
  `),N=s.ZP.h2.withConfig({componentId:"sc-d73fd898-6"})(["margin:0 0 10px 0;font-size:24px;font-weight:bold;text-transform:uppercase;letter-spacing:2px;"]),F=s.ZP.div.withConfig({componentId:"sc-d73fd898-7"})(["font-size:48px;font-weight:bold;font-family:monospace;text-align:center;margin:20px 0;color:",";@media (max-width:768px){font-size:36px;}"],e=>e.isRunning?"#000000":"#6c757d"),M=s.ZP.div.withConfig({componentId:"sc-d73fd898-8"})(["width:100%;height:8px;border:2px solid #000000;position:relative;background-color:#ffffff;&::after{content:'';position:absolute;top:0;left:0;height:100%;width:","%;background-color:#000000;transition:width 0.5s ease;}"],e=>e.progress),A=s.ZP.div.withConfig({componentId:"sc-d73fd898-9"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;"]),q=s.ZP.div.withConfig({componentId:"sc-d73fd898-10"})(["border:2px solid #e9ecef;padding:15px;text-align:center;background-color:#ffffff;h3{margin:0 0 5px 0;font-size:14px;text-transform:uppercase;letter-spacing:1px;color:#6c757d;}.value{font-size:32px;font-weight:bold;color:#000000;}.delta{font-size:12px;color:",";margin-top:5px;}"],e=>e.positive?"#28a745":"#dc3545"),U=s.ZP.div.withConfig({componentId:"sc-d73fd898-11"})(["h3{margin:0 0 10px 0;font-size:16px;text-transform:uppercase;letter-spacing:1px;}"]),Y=s.ZP.div.withConfig({componentId:"sc-d73fd898-12"})(["display:flex;align-items:center;gap:8px;padding:8px;border-bottom:1px solid #e9ecef;&:last-child{border-bottom:none;}"]),B=s.ZP.div.withConfig({componentId:"sc-d73fd898-13"})(["width:8px;height:8px;border-radius:50%;background-color:",";"],e=>"online"===e.status?"#28a745":"away"===e.status?"#ffc107":"busy"===e.status?"#dc3545":"#6c757d"),G=s.ZP.div.withConfig({componentId:"sc-d73fd898-14"})(["h3{margin:0 0 10px 0;font-size:16px;text-transform:uppercase;letter-spacing:1px;}max-height:300px;overflow-y:auto;"]),L=s.ZP.div.withConfig({componentId:"sc-d73fd898-15"})(["padding:10px;border:1px solid #e9ecef;margin-bottom:8px;background-color:",";animation:"," 0.3s ease;cursor:pointer;&:hover{background-color:#f8f9fa;}.title{font-weight:bold;margin-bottom:4px;}.message{font-size:14px;color:#6c757d;}.time{font-size:12px;color:#adb5bd;margin-top:4px;}"],e=>e.read?"#f8f9fa":"#ffffff",e=>e.isNew?P:"none"),Q=s.ZP.div.withConfig({componentId:"sc-d73fd898-16"})(["display:flex;align-items:center;justify-content:between;gap:10px;padding:8px;border:1px solid #e9ecef;font-size:12px;.queue-count{font-weight:bold;color:",";}"],e=>e.hasQueue?"#ffc107":"#28a745"),V=s.ZP.div.withConfig({componentId:"sc-d73fd898-17"})(["display:flex;gap:10px;margin-top:15px;button{padding:8px 16px;border:2px solid #000000;background-color:#ffffff;color:#000000;font-weight:bold;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.2s ease;&:hover{background-color:#000000;color:#ffffff;}&:disabled{border-color:#6c757d;color:#6c757d;cursor:not-allowed;&:hover{background-color:#ffffff;color:#6c757d;}}}"]),J=()=>{let{connectionStatus:e,isOnline:t}=(0,d.r)(),{session:i,timeRemaining:a,progress:s,isRunning:r,isPaused:c,createSession:l,pauseSession:p,resumeSession:u,completeSession:m,stopSession:f,conflicts:g}=C(),{userStats:h,streakData:b,globalLeaderboard:x,getUserRank:w}=S(),{onlineUsers:y,presenceState:v,setStatus:k}=_(),{notifications:I,markNotificationAsRead:P,clearNotifications:O,requestPermission:J,permissionStatus:W}=j(),{offlineQueue:X,syncStatus:H,processOfflineQueue:K}=D(),[ee,et]=(0,o.useState)(new Set);(0,o.useEffect)(()=>{et(new Set(I.filter(e=>!e.read).slice(0,3).map(e=>e.id)));let e=setTimeout(()=>{et(new Set)},3e3);return()=>clearTimeout(e)},[I]);let ei=async()=>{try{await l({title:"Focus Session",duration:25,goal:"Deep work"})}catch(e){console.error("Failed to start session:",e)}},en=e=>{P(e.id)},eo=w();return(0,n.jsxs)(R,{children:[(0,n.jsxs)(Z,{children:[(0,n.jsxs)(T,{status:e,children:[n.jsx(z,{status:e}),"connected"===e&&t&&"Real-time Connected","connecting"===e&&"Connecting...","disconnected"===e&&"Offline Mode",!t&&" (No Internet)"]}),i?(0,n.jsxs)($,{active:r,children:[n.jsx(N,{children:i.title}),n.jsx(F,{isRunning:r,children:`${Math.floor(a/60).toString().padStart(2,"0")}:${(a%60).toString().padStart(2,"0")}`}),n.jsx(M,{progress:s}),(0,n.jsxs)("div",{style:{marginTop:"15px",fontSize:"14px",color:"#6c757d"},children:["Goal: ",i.goal||"No specific goal",i.tags&&` • Tags: ${i.tags}`]}),(0,n.jsxs)(V,{children:[r&&n.jsx("button",{onClick:p,children:"Pause"}),c&&n.jsx("button",{onClick:u,children:"Resume"}),n.jsx("button",{onClick:m,disabled:!r&&!c,children:"Complete"}),n.jsx("button",{onClick:f,children:"Stop"})]}),g.length>0&&(0,n.jsxs)("div",{style:{marginTop:"10px",padding:"10px",border:"2px solid #ffc107",backgroundColor:"#fff3cd"},children:[n.jsx("strong",{children:"Sync Conflict Detected"}),n.jsx("br",{}),"Session was modified on another device. Please resolve conflicts."]})]}):(0,n.jsxs)($,{children:[n.jsx(N,{children:"No Active Session"}),n.jsx("p",{children:"Start a new Pomodoro session to begin focusing."}),n.jsx(V,{children:n.jsx("button",{onClick:ei,children:"Start Session"})})]}),(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{marginBottom:"15px",textTransform:"uppercase",letterSpacing:"2px"},children:"Statistics"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(q,{children:[n.jsx("h3",{children:"Today's Sessions"}),n.jsx("div",{className:"value",children:h?.todayStats?.completedSessions||0})]}),(0,n.jsxs)(q,{children:[n.jsx("h3",{children:"Total Sessions"}),n.jsx("div",{className:"value",children:h?.completed_sessions||0})]}),(0,n.jsxs)(q,{children:[n.jsx("h3",{children:"Current Streak"}),n.jsx("div",{className:"value",children:b?.current||0})]}),(0,n.jsxs)(q,{children:[n.jsx("h3",{children:"Global Rank"}),n.jsx("div",{className:"value",children:eo?`#${eo}`:"-"})]})]})]})]}),(0,n.jsxs)(E,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)("h3",{children:["Online Users (",y.length,")"]}),y.slice(0,10).map(e=>(0,n.jsxs)(Y,{children:[n.jsx(B,{status:e.status||"online"}),n.jsx("span",{children:e.username||e.user_id}),"in_session"===e.activity&&n.jsx("span",{style:{fontSize:"12px",color:"#6c757d"},children:"\uD83C\uDF45"})]},e.user_id)),0===y.length&&n.jsx("div",{style:{color:"#6c757d",fontSize:"14px"},children:"No other users online"})]}),(0,n.jsxs)(G,{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,n.jsxs)("h3",{children:["Notifications (",I.filter(e=>!e.read).length,")"]}),"granted"!==W&&n.jsx("button",{onClick:J,style:{padding:"4px 8px",fontSize:"12px",border:"1px solid #6c757d",background:"none",cursor:"pointer"},children:"Enable"})]}),I.slice(0,5).map(e=>(0,n.jsxs)(L,{read:e.read,isNew:ee.has(e.id),onClick:()=>en(e),children:[n.jsx("div",{className:"title",children:e.title}),n.jsx("div",{className:"message",children:e.message}),n.jsx("div",{className:"time",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id)),0===I.length&&n.jsx("div",{style:{color:"#6c757d",fontSize:"14px"},children:"No notifications"}),I.length>0&&n.jsx("button",{onClick:O,style:{width:"100%",padding:"8px",marginTop:"10px",border:"1px solid #6c757d",background:"none",cursor:"pointer",fontSize:"12px"},children:"Clear All"})]}),(0,n.jsxs)(Q,{hasQueue:X.length>0,children:[(0,n.jsxs)("div",{children:[n.jsx("strong",{children:"Sync:"})," ",H]}),n.jsx("div",{className:"queue-count",children:X.length>0?`${X.length} queued`:"Up to date"}),X.length>0&&n.jsx("button",{onClick:K,style:{padding:"4px 8px",fontSize:"11px",border:"1px solid #000",background:"none",cursor:"pointer"},children:"Sync Now"})]})]})]})},W=(0,s.F4)(["0%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,0,0,0.4);}50%{transform:scale(1.02);box-shadow:0 0 0 10px rgba(0,0,0,0.1);}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(0,0,0,0);}"]);(0,s.F4)(["from{width:0%;}to{width:var(--progress);}"]);let X=(0,s.F4)(["0%,50%{background-color:#ffffff;color:#000000;}51%,100%{background-color:#dc3545;color:#ffffff;}"]);s.ZP.div.withConfig({componentId:"sc-bd11b3a1-0"})(["display:flex;flex-direction:column;align-items:center;padding:40px 20px;border:2px solid #000000;background-color:#ffffff;position:relative;"," ",""],e=>e.isRunning&&`
    animation: ${W} 2s infinite;
  `,e=>e.isWarning&&`
    animation: ${X} 1s infinite;
  `),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-1"})(["text-align:center;margin-bottom:20px;.title{font-size:24px;font-weight:bold;text-transform:uppercase;letter-spacing:2px;margin-bottom:8px;}.goal{font-size:16px;color:#6c757d;margin-bottom:4px;}.metadata{font-size:14px;color:#adb5bd;}"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-2"})(["font-size:96px;font-weight:bold;font-family:'Courier New',monospace;text-align:center;margin:30px 0;user-select:none;"," @media (max-width:768px){font-size:64px;}@media (max-width:480px){font-size:48px;}"],e=>e.isLowTime&&`
    color: #dc3545;
  `),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-3"})(["width:100%;max-width:400px;margin:20px 0;"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-4"})(["width:100%;height:12px;border:2px solid #000000;background-color:#ffffff;position:relative;overflow:hidden;"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-5"})(["height:100%;background-color:#000000;width:","%;transition:width 0.5s ease;position:relative;",""],e=>e.progress,e=>e.isLowTime&&`
    background-color: #dc3545;
  `),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-6"})(["text-align:center;margin-top:8px;font-size:14px;font-weight:bold;text-transform:uppercase;letter-spacing:1px;color:#6c757d;"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-7"})(["display:flex;align-items:center;gap:15px;margin:20px 0;"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-8"})(["padding:4px 8px;border:1px solid #6c757d;font-size:12px;font-weight:bold;text-transform:uppercase;letter-spacing:1px;color:#6c757d;",""],e=>e.active&&`
    border-color: #000000;
    background-color: #000000;
    color: #ffffff;
  `),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-9"})(["position:absolute;top:10px;right:10px;display:flex;align-items:center;gap:8px;font-size:12px;color:#6c757d;.sync-icon{width:12px;height:12px;border-radius:50%;background-color:",";}"],e=>"synced"===e.syncStatus?"#28a745":"syncing"===e.syncStatus?"#ffc107":"#dc3545"),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-10"})(["margin:15px 0;padding:10px;border:1px solid #e9ecef;background-color:#f8f9fa;font-size:14px;.viewers{display:flex;align-items:center;gap:8px;margin-bottom:8px;}.viewer-dot{width:8px;height:8px;border-radius:50%;background-color:#28a745;}.shared-info{font-size:12px;color:#6c757d;}"]),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-11"})(["display:flex;gap:15px;margin-top:20px;flex-wrap:wrap;justify-content:center;"]),s.ZP.button.withConfig({componentId:"sc-bd11b3a1-12"})(["padding:12px 24px;border:2px solid #000000;background-color:#ffffff;color:#000000;font-weight:bold;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.2s ease;font-size:14px;&:hover:not(:disabled){background-color:#000000;color:#ffffff;}&:disabled{border-color:#6c757d;color:#6c757d;cursor:not-allowed;&:hover{background-color:#ffffff;color:#6c757d;}}"," ",""],e=>e.primary&&`
    background-color: #000000;
    color: #ffffff;
    
    &:hover:not(:disabled) {
      background-color: #ffffff;
      color: #000000;
    }
  `,e=>e.danger&&`
    border-color: #dc3545;
    color: #dc3545;
    
    &:hover:not(:disabled) {
      background-color: #dc3545;
      color: #ffffff;
    }
  `),s.ZP.div.withConfig({componentId:"sc-bd11b3a1-13"})(["display:flex;flex-direction:column;gap:15px;width:100%;max-width:400px;input,select{padding:12px;border:2px solid #6c757d;font-size:16px;background-color:#ffffff;&:focus{border-color:#000000;outline:none;}}.session-options{display:grid;grid-template-columns:1fr 1fr;gap:10px;@media (max-width:480px){grid-template-columns:1fr;}}"]);let H=s.ZP.div.withConfig({componentId:"sc-946af4ab-0"})(["min-height:100vh;display:flex;flex-direction:column;background:var(--background-secondary);@media (min-width:769px){min-height:auto;}"]),K=s.ZP.div.withConfig({componentId:"sc-946af4ab-1"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(248,249,250,0.9);display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(2px);"]),ee=s.ZP.div.withConfig({componentId:"sc-946af4ab-2"})(["width:40px;height:40px;border:3px solid #e9ecef;border-radius:50%;border-top:3px solid #000000;animation:spin 1s linear infinite;@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]),et=s.ZP.div.withConfig({componentId:"sc-946af4ab-3"})(["margin-top:1rem;font-size:0.875rem;color:#6c757d;text-align:center;"]),ei=s.ZP.div.withConfig({componentId:"sc-946af4ab-4"})(["display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;background:var(--background-primary);border-bottom:1px solid var(--gray-5);box-shadow:0 2px 8px rgba(0,0,0,0.05);@media (min-width:769px){padding:1.5rem 2rem;}@media (min-width:1200px){padding:2rem 3rem;}"]),en=s.ZP.div.withConfig({componentId:"sc-946af4ab-5"})(["display:flex;align-items:center;gap:12px;"]),eo=s.ZP.div.withConfig({componentId:"sc-946af4ab-6"})(["width:48px;height:48px;background:",";border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;color:white;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.1));"],e=>e.gradient||"linear-gradient(135deg, var(--primary-blue), var(--primary-purple))"),ea=s.ZP.div.withConfig({componentId:"sc-946af4ab-7"})(["display:flex;flex-direction:column;gap:2px;"]),es=s.ZP.span.withConfig({componentId:"sc-946af4ab-8"})(["font-size:18px;font-weight:600;color:var(--text-primary);"]),er=s.ZP.span.withConfig({componentId:"sc-946af4ab-9"})(["font-size:14px;color:var(--text-secondary);font-weight:500;"]),ed=s.ZP.div.withConfig({componentId:"sc-946af4ab-10"})(["display:flex;gap:12px;align-items:center;"]),ec=s.ZP.button.withConfig({componentId:"sc-946af4ab-11"})(["background:var(--background-secondary);border:1px solid var(--gray-5);border-radius:var(--border-radius-small);padding:8px 16px;font-size:14px;font-weight:500;color:var(--text-primary);cursor:pointer;transition:var(--transition-fast);&:hover{background:var(--gray-5);}&:active{transform:scale(0.95);}"]),el=(0,s.ZP)(ec).withConfig({componentId:"sc-946af4ab-12"})(["background:var(--primary-blue);color:white;border:1px solid var(--primary-blue);&:hover{background:var(--primary-blue-dark,#0056CC);}"]),ep=s.ZP.div.withConfig({componentId:"sc-946af4ab-13"})(["flex:1;padding:1.5rem;display:flex;flex-direction:column;gap:2rem;@media (min-width:769px){padding:2rem;gap:2.5rem;}@media (min-width:1200px){padding:3rem;gap:3rem;max-width:1400px;margin:0 auto;width:100%;}"]),eu=s.ZP.div.withConfig({componentId:"sc-946af4ab-14"})(["display:grid;grid-template-columns:1fr 1fr;gap:1rem;@media (min-width:769px){gap:1.5rem;grid-template-columns:1fr 1fr;}@media (min-width:1200px){gap:2rem;grid-template-columns:1fr 1fr 1fr 1fr;}"]),em=s.ZP.div.withConfig({componentId:"sc-946af4ab-15"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);border:1px solid var(--gray-6);@media (min-width:769px){padding:24px;}"]),ef=s.ZP.div.withConfig({componentId:"sc-946af4ab-16"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;"]),eg=s.ZP.h3.withConfig({componentId:"sc-946af4ab-17"})(["font-size:16px;font-weight:600;color:var(--text-primary);margin:0;"]),eh=s.ZP.button.withConfig({componentId:"sc-946af4ab-18"})(["background:none;border:none;color:var(--primary-blue);font-size:14px;font-weight:500;cursor:pointer;padding:4px 0;&:hover{opacity:0.7;}"]),eb=s.ZP.div.withConfig({componentId:"sc-946af4ab-19"})(["display:flex;justify-content:center;align-items:center;height:120px;position:relative;"]),ex=s.ZP.div.withConfig({componentId:"sc-946af4ab-20"})(["position:relative;width:120px;height:120px;"]),ew=s.ZP.div.withConfig({componentId:"sc-946af4ab-21"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;"]),ey=s.ZP.div.withConfig({componentId:"sc-946af4ab-22"})(["font-size:24px;font-weight:700;color:var(--text-primary);line-height:1;"]),ev=s.ZP.div.withConfig({componentId:"sc-946af4ab-23"})(["font-size:12px;color:var(--text-secondary);font-weight:500;margin-top:2px;"]),ek=s.ZP.div.withConfig({componentId:"sc-946af4ab-24"})(["display:flex;justify-content:center;align-items:center;height:100px;background:var(--gray-6);border-radius:var(--border-radius-medium);font-size:14px;color:var(--text-secondary);"]),eC=s.ZP.div.withConfig({componentId:"sc-946af4ab-25"})(["display:grid;grid-template-columns:1fr;gap:1rem;@media (min-width:769px){grid-template-columns:1fr 1fr;gap:1.5rem;}@media (min-width:1200px){grid-template-columns:1fr 1fr 1fr;gap:2rem;}"]),eS=s.ZP.button.withConfig({componentId:"sc-946af4ab-26"})(["background:var(--background-primary);border:2px solid var(--gray-5);border-radius:var(--border-radius-large);padding:1.5rem;text-align:left;cursor:pointer;transition:all 0.3s ease;box-shadow:var(--shadow-small);min-height:120px;display:flex;flex-direction:column;justify-content:center;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:var(--primary-blue);transform:scaleY(0);transition:transform 0.3s ease;}&:hover{background:var(--gray-6);transform:translateY(-4px);box-shadow:0 12px 24px rgba(0,0,0,0.1);border-color:var(--primary-blue);&::before{transform:scaleY(1);}}&:active{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,0.08);}@media (min-width:769px){padding:2rem;min-height:140px;border-radius:12px;}@media (min-width:1200px){padding:2.5rem;min-height:160px;border-radius:16px;}"]),e_=s.ZP.div.withConfig({componentId:"sc-946af4ab-27"})(["font-size:2rem;margin-bottom:1rem;opacity:0.8;transition:all 0.3s ease;",":hover &{transform:scale(1.1);opacity:1;}@media (min-width:769px){font-size:2.5rem;margin-bottom:1.25rem;}"],eS),ej=s.ZP.h3.withConfig({componentId:"sc-946af4ab-28"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0 0 6px 0;transition:all 0.3s ease;",":hover &{color:var(--primary-blue);transform:translateY(-1px);}"],eS),eD=s.ZP.div.withConfig({componentId:"sc-946af4ab-29"})(["font-size:14px;color:var(--text-secondary);font-weight:400;transition:all 0.3s ease;",":hover &{color:var(--text-primary);}"],eS),eI=s.ZP.div.withConfig({componentId:"sc-946af4ab-30"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:2rem;box-shadow:var(--shadow-medium);border:1px solid var(--gray-6);grid-column:1 / -1;@media (min-width:769px){padding:2.5rem;}@media (min-width:1200px){padding:3rem;display:grid;grid-template-columns:1fr 2fr;gap:3rem;align-items:center;}"]),eP=s.ZP.h2.withConfig({componentId:"sc-946af4ab-31"})(["font-size:20px;font-weight:600;color:var(--text-primary);margin:0 0 16px 0;"]),eO=s.ZP.div.withConfig({componentId:"sc-946af4ab-32"})(["text-align:center;padding:60px 20px;background:var(--background-primary);border-radius:12px;border:2px dashed #e9ecef;position:relative;overflow:hidden;transition:all 0.3s ease;&:hover{border-color:var(--primary-blue);background:#fafbff;transform:translateY(-2px);}&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-blue),var(--primary-purple),var(--primary-blue));opacity:0;transition:opacity 0.3s ease;}&:hover::before{opacity:1;}"]),eR=s.ZP.div.withConfig({componentId:"sc-946af4ab-33"})(["font-size:3rem;margin-bottom:1.5rem;opacity:0.8;transition:all 0.3s ease;",":hover &{transform:scale(1.1);opacity:1;}@media (min-width:769px){font-size:4rem;margin-bottom:2rem;}"],eO),eZ=s.ZP.div.withConfig({componentId:"sc-946af4ab-34"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin-bottom:8px;text-transform:uppercase;letter-spacing:0.05em;transition:all 0.3s ease;",":hover &{color:var(--primary-blue);transform:translateY(-2px);}"],eO),eE=s.ZP.div.withConfig({componentId:"sc-946af4ab-35"})(["font-size:14px;color:var(--text-tertiary);margin-bottom:1.5rem;transition:all 0.3s ease;",":hover &{color:var(--text-secondary);transform:translateY(-1px);}"],eO),eT=s.ZP.button.withConfig({componentId:"sc-946af4ab-36"})(["background:var(--primary-blue);color:white;border:none;padding:1rem 2rem;font-size:0.9rem;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;cursor:pointer;border-radius:6px;transition:all 0.3s ease;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s ease;}&:hover{background:var(--primary-blue-dark,#0056CC);transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,122,255,0.3);&::before{left:100%;}}&:active{transform:translateY(0);box-shadow:0 4px 12px rgba(0,122,255,0.2);}@media (min-width:769px){padding:1.25rem 2.5rem;font-size:1rem;border-radius:8px;}"]),ez=s.ZP.div.withConfig({componentId:"sc-946af4ab-37"})(["display:flex;flex-direction:column;gap:20px;"]),e$=s.ZP.div.withConfig({componentId:"sc-946af4ab-38"})(["text-align:center;"]),eN=s.ZP.div.withConfig({componentId:"sc-946af4ab-39"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin-bottom:4px;"]),eF=s.ZP.div.withConfig({componentId:"sc-946af4ab-40"})(["font-size:14px;color:var(--text-secondary);"]),eM=s.ZP.div.withConfig({componentId:"sc-946af4ab-41"})(["text-align:center;"]),eA=s.ZP.div.withConfig({componentId:"sc-946af4ab-42"})(["font-size:48px;font-weight:700;color:var(--primary-blue);margin-bottom:16px;font-feature-settings:'tnum';"]),eq=s.ZP.div.withConfig({componentId:"sc-946af4ab-43"})(["width:100%;height:8px;background:var(--gray-5);border-radius:4px;overflow:hidden;margin-bottom:20px;"]),eU=s.ZP.div.withConfig({componentId:"sc-946af4ab-44"})(["height:100%;background:linear-gradient(90deg,var(--primary-blue),var(--primary-purple));border-radius:4px;width:","%;transition:width 1s ease-out;"],e=>e.progress),eY=s.ZP.div.withConfig({componentId:"sc-946af4ab-45"})(["display:flex;gap:12px;justify-content:center;"]),eB=s.ZP.button.withConfig({componentId:"sc-946af4ab-46"})(["flex:1;max-width:120px;height:44px;border:none;border-radius:var(--border-radius-medium);font-size:14px;font-weight:600;cursor:pointer;transition:var(--transition-fast);&.pause{background:var(--primary-orange);color:white;&:hover{background:#E6830A;}}&.stop{background:var(--primary-red);color:white;&:hover{background:#D70015;}}&:active{transform:scale(0.95);}"]),eG=s.ZP.div.withConfig({componentId:"sc-946af4ab-47"})(["border:2px solid #e9ecef;padding:1rem;margin-bottom:0.75rem;cursor:pointer;transition:all 0.2s ease;&:hover{border-color:#000000;}&:last-child{margin-bottom:0;}"]),eL=s.ZP.h4.withConfig({componentId:"sc-946af4ab-48"})(["font-size:0.875rem;font-weight:600;color:#000000;margin:0 0 0.25rem 0;text-transform:uppercase;letter-spacing:0.05em;"]),eQ=s.ZP.div.withConfig({componentId:"sc-946af4ab-49"})(["font-size:0.75rem;color:#6c757d;margin-bottom:0.25rem;"]),eV=s.ZP.div.withConfig({componentId:"sc-946af4ab-50"})(["font-size:0.75rem;color:#6c757d;"]),eJ=s.ZP.div.withConfig({componentId:"sc-946af4ab-51"})(["padding:2rem;text-align:center;border:2px dashed #e9ecef;color:#6c757d;background:#ffffff;transition:all 0.2s ease;&:hover{border-color:#000000;cursor:pointer;}"]),eW=s.ZP.div.withConfig({componentId:"sc-946af4ab-52"})(["font-size:1rem;margin-bottom:0.5rem;color:#000000;font-weight:600;"]),eX=s.ZP.div.withConfig({componentId:"sc-946af4ab-53"})(["font-size:0.875rem;color:#6c757d;margin-bottom:1rem;"]),eH=s.ZP.button.withConfig({componentId:"sc-946af4ab-54"})(["background:#000000;color:#ffffff;border:none;padding:0.5rem 1rem;font-size:0.75rem;font-weight:500;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;&:hover{background:#333333;transform:translateY(-1px);}&:active{transform:translateY(0);}"]),eK=()=>{let{currentUser:e,userManager:t}=(0,r.a)(),[i,s]=(0,o.useState)([]),[d,c]=(0,o.useState)(!0),l=(0,a.useRouter)();(0,o.useEffect)(()=>{e&&t&&(c(!0),setTimeout(()=>{s(t.getUpcomingMeetings(e.id,3)),c(!1)},300))},[e,t]);let p=(e,t)=>{let i=new Date(e),n=new Date,o=new Date(n);o.setDate(n.getDate()+1);let a="";return a=i.toDateString()===n.toDateString()?"오늘":i.toDateString()===o.toDateString()?"내일":i.toLocaleDateString("ko-KR",{month:"long",day:"numeric"}),`${a} ${t}`};return d?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"2rem"},children:n.jsx(ee,{})}):0===i.length?(0,n.jsxs)(eJ,{onClick:()=>l.push("/meetings"),children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"\uD83D\uDCC5"}),n.jsx(eW,{children:"예정된 모임이 없습니다"}),n.jsx(eX,{children:"모임 일정을 추가해보세요!"}),n.jsx(eH,{onClick:e=>{e.stopPropagation(),l.push("/meetings")},children:"모임 추가하기"})]}):n.jsx("div",{children:i.map(e=>(0,n.jsxs)(eG,{onClick:()=>l.push("/meetings"),children:[n.jsx(eL,{children:e.title}),n.jsx(eQ,{children:p(e.date,e.time)}),e.location&&(0,n.jsxs)(eV,{children:["\uD83D\uDCCD ",e.location]})]},e.id))})};function e0(){let e=(0,a.useRouter)(),{currentUser:t,activeSession:i,logoutUser:s,getUserStats:c,completePomodoroSession:l,stopPomodoroSession:p}=(0,r.a)(),{isConnected:u,connectionStatus:m}=(0,d.r)(),[f,g]=(0,o.useState)(null),[h,b]=(0,o.useState)(0),[w,y]=(0,o.useState)(!1),[k,C]=(0,o.useState)(!1),[S,_]=(0,o.useState)(!0),[j,D]=(0,o.useState)(!1),I=(0,o.useCallback)(e=>{let t=["linear-gradient(135deg, #007AFF, #5856D6)","linear-gradient(135deg, #34C759, #32D74B)","linear-gradient(135deg, #FF9500, #FF6B00)","linear-gradient(135deg, #FF3B30, #D70015)","linear-gradient(135deg, #5856D6, #AF52DE)"];return t[(e?.split("").reduce((e,t)=>e+t.charCodeAt(0),0)||0)%t.length]},[]),P=(0,o.useCallback)(e=>`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`,[]);(0,o.useCallback)(()=>{if(!i||k)return;let e=new Date,t=Math.max(0,Math.floor((new Date(i.endTime)-e)/1e3));b(t),0===t&&(l(),y(!1))},[i,k,l]);let O=()=>{s(),e.push("/login")},R=()=>{e.push("/pomodoro-start")},Z=()=>f&&0!==f.totalSessions?Math.round(f.completedSessions/f.totalSessions*100):0;return t?S?n.jsx(K,{children:(0,n.jsxs)("div",{children:[n.jsx(ee,{}),n.jsx(et,{children:"대시보드를 불러오는 중..."})]})}):j?(0,n.jsxs)(H,{children:[(0,n.jsxs)(ei,{children:[(0,n.jsxs)(en,{children:[n.jsx(eo,{gradient:I(t.id),children:t.id.charAt(0).toUpperCase()}),(0,n.jsxs)(ea,{children:[(0,n.jsxs)(es,{children:[t.id," - Real-time Dashboard"]}),(0,n.jsxs)(er,{children:["connected"===m&&"\uD83D\uDFE2 Connected","connecting"===m&&"\uD83D\uDFE1 Connecting...","disconnected"===m&&"\uD83D\uDD34 Disconnected"]})]})]}),(0,n.jsxs)(ed,{children:[n.jsx(ec,{onClick:()=>D(!1),style:{background:"var(--primary-blue)",color:"white",borderColor:"var(--primary-blue)"},children:"← Back to Legacy"}),n.jsx(ec,{onClick:O,children:"로그아웃"})]})]}),n.jsx(J,{}),n.jsx(v,{}),n.jsx(x,{})]}):(0,n.jsxs)(H,{children:[(0,n.jsxs)(ei,{children:[(0,n.jsxs)(en,{children:[n.jsx(eo,{gradient:I(t.id),children:t.id.charAt(0).toUpperCase()}),(0,n.jsxs)(ea,{children:[n.jsx(es,{children:t.id}),n.jsx(er,{children:"안녕하세요! \uD83D\uDC4B"})]})]}),(0,n.jsxs)(ed,{children:[(0,n.jsxs)(ec,{onClick:()=>D(!j),style:{background:j?"var(--primary-blue)":"var(--background-secondary)",color:j?"white":"var(--text-primary)",borderColor:j?"var(--primary-blue)":"var(--gray-5)"},children:[u?"\uD83D\uDD34 LIVE":"⚫ OFFLINE",j?" Dashboard":" View"]}),n.jsx(el,{onClick:()=>e.push("/dashboard-onboarding"),children:"온보딩"}),n.jsx(ec,{onClick:()=>e.push("/onboarding"),children:"사용법"}),n.jsx(ec,{onClick:O,children:"로그아웃"})]})]}),(0,n.jsxs)(ep,{children:[(0,n.jsxs)(eu,{children:[(0,n.jsxs)(em,{children:[(0,n.jsxs)(ef,{children:[n.jsx(eg,{children:"학습 통계"}),n.jsx(eh,{onClick:()=>{e.push("/mypage")},children:"자세히 >"})]}),n.jsx(eb,{children:(0,n.jsxs)(ex,{children:[(0,n.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 120 120",children:[n.jsx("circle",{cx:"60",cy:"60",r:"45",fill:"none",stroke:"var(--gray-5)",strokeWidth:"10"}),n.jsx("circle",{cx:"60",cy:"60",r:"45",fill:"none",stroke:"var(--primary-blue)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${Z()/100*283.14} 283.14`,transform:"rotate(-90 60 60)",style:{transition:"stroke-dasharray 0.5s ease"}})]}),(0,n.jsxs)(ew,{children:[(0,n.jsxs)(ey,{children:[Z(),"%"]}),n.jsx(ev,{children:"완료"})]})]})})]}),(0,n.jsxs)(em,{children:[(0,n.jsxs)(ef,{children:[n.jsx(eg,{children:"월별 기록"}),n.jsx(eh,{onClick:()=>{e.push("/monthly")},children:"자세히 >"})]}),n.jsx(ek,{children:"\uD83D\uDCC5 달력 이미지"})]})]}),(0,n.jsxs)(eC,{children:[(0,n.jsxs)(eS,{onClick:R,children:[n.jsx(e_,{children:"⏰"}),n.jsx(ej,{children:"뽀모도로 시작하기"}),n.jsx(eD,{children:"집중력 향상을 위한 시간 관리 기법"})]}),(0,n.jsxs)(eS,{onClick:()=>{e.push("/pomodoro-ranking")},children:[n.jsx(e_,{children:"\uD83C\uDFC6"}),n.jsx(ej,{children:"뽀모도로 랭킹"}),n.jsx(eD,{children:"다른 사용자들과 비교해보세요"})]}),(0,n.jsxs)(eS,{onClick:()=>{},children:[n.jsx(e_,{children:"\uD83C\uDF89"}),n.jsx(ej,{children:"진행중인 이벤트"}),n.jsx(eD,{children:"특별한 혜택과 도전 과제"})]}),(0,n.jsxs)(eS,{onClick:()=>e.push("/meetings"),children:[n.jsx(e_,{children:"\uD83D\uDCC5"}),n.jsx(ej,{children:"모임 일정"}),n.jsx(eD,{children:"모임 일정을 확인하고 관리하세요"})]})]}),(0,n.jsxs)(eI,{children:[n.jsx(eP,{children:"진행중인 뽀모도로"}),i?(0,n.jsxs)(ez,{children:[(0,n.jsxs)(e$,{children:[n.jsx(eN,{children:i.title}),n.jsx(eF,{children:i.goal})]}),(0,n.jsxs)(eM,{children:[n.jsx(eA,{children:P(h)}),n.jsx(eq,{children:n.jsx(eU,{progress:(()=>{if(!i||0===h)return 0;let e=60*i.duration;return Math.min(100,(e-h)/e*100)})()})})]}),(0,n.jsxs)(eY,{children:[n.jsx(eB,{className:"pause",onClick:()=>{C(!k)},children:k?"재시작":"일시정지"}),n.jsx(eB,{className:"stop",onClick:()=>{i&&p()},children:"종료"})]})]}):(0,n.jsxs)(eO,{children:[n.jsx(eR,{children:"⏰"}),n.jsx(eZ,{children:"진행중인 뽀모도로가 없습니다"}),n.jsx(eE,{children:"뽀모도로를 시작해서 집중력을 높여보세요!"}),n.jsx(eT,{onClick:R,children:"뽀모도로 시작하기"})]})]}),(0,n.jsxs)(eI,{children:[n.jsx(eP,{children:"다가오는 모임"}),n.jsx(eK,{})]})]}),n.jsx(v,{}),n.jsx(x,{})]}):null}},6065:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});let n=(0,i(8570).createProxy)(String.raw`/home/devswha/workspace/pomodoro/app/(dashboard)/layout.js#default`)},8929:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});let n=(0,i(8570).createProxy)(String.raw`/home/devswha/workspace/pomodoro/app/(dashboard)/main/page.js#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[948,525,248],()=>i(9219));module.exports=n})();