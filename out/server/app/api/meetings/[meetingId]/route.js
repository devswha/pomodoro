"use strict";(()=>{var e={};e.id=324,e.ids=[324],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},7107:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>w,patchFetch:()=>Z,requestAsyncStorage:()=>_,routeModule:()=>y,serverHooks:()=>h,staticGenerationAsyncStorage:()=>R});var i={};a.r(i),a.d(i,{DELETE:()=>x,GET:()=>f,PUT:()=>g});var r=a(9303),o=a(8716),n=a(670),d=a(1595),s=a(7246),l=a(2859),m=a(7258);async function u(e,t){if(await new Promise((a,i)=>{(0,m.mk)(e,t,e=>{e?i(e):a()})}),!d.pR)return(0,l.y7)(t,"Database access not available",503);try{let a=e.userId,{meetingId:i}=e.params,{data:r,error:o}=await d.pR.from(d.ji.MEETINGS).select("*").eq("id",i).eq("user_id",a).single();if(o||!r)return(0,l.Ij)(t,"Meeting not found");return(0,l.Wr)(t,r)}catch(e){return console.error("Get meeting error:",e),(0,l.y7)(t,"Failed to retrieve meeting",500)}}async function p(e,t){if(await new Promise((a,i)=>{(0,m.mk)(e,t,e=>{e?i(e):a()})}),!d.pR)return(0,l.y7)(t,"Database access not available",503);let a=(0,s.Fv)(s.$p,e.body);if(!a.success)return(0,l.Gc)(t,a.errors);try{let i=e.userId,{meetingId:r}=e.params,o=a.data,{data:n,error:s}=await d.pR.from(d.ji.MEETINGS).select("*").eq("id",r).eq("user_id",i).single();if(s||!n)return(0,l.Ij)(t,"Meeting not found");if((o.date||o.time)&&(o.date!==n.date||o.time!==n.time)){let e=o.date||n.date,a=o.time||n.time,{data:s}=await d.pR.from(d.ji.MEETINGS).select("id, title").eq("user_id",i).eq("date",e).eq("time",a).neq("id",r);if(s&&s.length>0)return(0,l.y7)(t,"A meeting already exists at this time",409,{conflictingMeeting:s[0]})}let{data:m,error:u}=await d.pR.from(d.ji.MEETINGS).update({...o,updated_at:new Date().toISOString()}).eq("id",r).eq("user_id",i).select().single();if(u)return console.error("Failed to update meeting:",u),(0,l.y7)(t,"Failed to update meeting",500);return(0,l.Wr)(t,m,"Meeting updated successfully")}catch(e){return console.error("Update meeting error:",e),(0,l.y7)(t,"Failed to update meeting",500)}}async function c(e,t){if(await new Promise((a,i)=>{(0,m.mk)(e,t,e=>{e?i(e):a()})}),!d.pR)return(0,l.y7)(t,"Database access not available",503);try{let a=e.userId,{meetingId:i}=e.params,{data:r,error:o}=await d.pR.from(d.ji.MEETINGS).select("*").eq("id",i).eq("user_id",a).single();if(o||!r)return(0,l.Ij)(t,"Meeting not found");let{error:n}=await d.pR.from(d.ji.MEETINGS).delete().eq("id",i).eq("user_id",a);if(n)return console.error("Failed to delete meeting:",n),(0,l.y7)(t,"Failed to delete meeting",500);return(0,l.Wr)(t,null,"Meeting deleted successfully")}catch(e){return console.error("Delete meeting error:",e),(0,l.y7)(t,"Failed to delete meeting",500)}}let f=(0,l.bi)(u),g=(0,l.bi)(p),x=(0,l.bi)(c),y=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/meetings/[meetingId]/route",pathname:"/api/meetings/[meetingId]",filename:"route",bundlePath:"app/api/meetings/[meetingId]/route"},resolvedPagePath:"/home/devswha/workspace/pomodoro/app/api/meetings/[meetingId]/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:_,staticGenerationAsyncStorage:R,serverHooks:h}=y,w="/api/meetings/[meetingId]/route";function Z(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:R})}},7246:(e,t,a)=>{a.d(t,{$p:()=>_,CG:()=>R,Db:()=>g,Fv:()=>Z,Mk:()=>f,Vp:()=>p,W0:()=>w,bd:()=>y,dm:()=>u,g2:()=>h,gY:()=>m,sQ:()=>x,xH:()=>c});var i=a(1598),r=a(7254),o=a(9489);let n=i.Z_().email("Invalid email address").toLowerCase(),d=i.Z_().min(4,"Password must be at least 4 characters"),s=i.Z_().min(1,"Username is required").max(50,"Username too long");i.Z_().uuid("Invalid UUID format"),i.Rx().int().positive();let l=i.Z_().datetime("Invalid date format"),m=i.Ry({username:s,email:n,password:d,displayName:i.Z_().max(100).optional()}),u=i.Ry({username:s,password:i.Z_().min(1,"Password is required"),rememberMe:i.O7().default(!1)}),p=(i.Ry({currentPassword:i.Z_().min(1,"Current password is required"),newPassword:d}),i.Ry({displayName:i.Z_().max(100).optional(),email:n.optional(),bio:i.Z_().max(500).optional(),avatar:i.Z_().url().optional().or(i.i0(""))})),c=i.Ry({defaultPomodoroLength:i.Rx().int().min(1).max(120).default(25),breakLength:i.Rx().int().min(1).max(30).default(5),longBreakLength:i.Rx().int().min(1).max(60).default(15),weeklyGoal:i.Rx().int().min(1).max(1e3).default(140),theme:i.Km(["default","dark","minimal"]).default("default"),soundEnabled:i.O7().default(!0),notificationsEnabled:i.O7().default(!0),autoStartBreak:i.O7().default(!1),autoStartPomodoro:i.O7().default(!1)}),f=i.Ry({title:i.Z_().min(1,"Session title is required").max(200),goal:i.Z_().max(500).optional(),tags:i.Z_().max(200).optional(),location:i.Z_().max(100).optional(),duration:i.Rx().int().min(1).max(120).default(25),scheduledTime:l.optional()}),g=i.Ry({title:i.Z_().min(1).max(200).optional(),goal:i.Z_().max(500).optional(),tags:i.Z_().max(200).optional(),location:i.Z_().max(100).optional(),status:i.Km(["scheduled","active","completed","stopped"]).optional()}),x=i.Ry({page:r.Rx().int().min(1).default(1),limit:r.Rx().int().min(1).max(100).default(20),status:i.Km(["scheduled","active","completed","stopped"]).optional(),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional(),tags:i.Z_().optional()}),y=i.Ry({title:i.Z_().min(1,"Meeting title is required").max(200),description:i.Z_().max(1e3).optional(),date:i.Z_().date("Invalid date format"),time:i.Z_().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format (HH:MM)"),duration:i.Rx().int().min(15).max(480).default(60),location:i.Z_().max(200).optional(),participants:i.IX(i.Z_().email()).optional(),type:i.Km(["meeting","call","presentation","workshop","other"]).default("meeting"),priority:i.Km(["low","medium","high"]).default("medium"),reminderMinutes:i.Rx().int().min(0).max(10080).default(15)}),_=y.partial(),R=i.Ry({date:i.Z_().date().optional(),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional(),type:i.Km(["meeting","call","presentation","workshop","other"]).optional(),priority:i.Km(["low","medium","high"]).optional()}),h=i.Ry({period:i.Km(["day","week","month","year"]).default("week"),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional()}),w=i.Ry({period:i.Km(["week","month","year"]).default("week"),limit:r.Rx().int().min(1).max(100).default(10)}),Z=(i.Ry({page:r.Rx().int().min(1).default(1),limit:r.Rx().int().min(1).max(100).default(20)}),i.Ry({sortBy:i.Z_().optional(),sortOrder:i.Km(["asc","desc"]).default("desc")}),(e,t)=>{try{return{success:!0,data:e.parse(t),errors:null}}catch(e){if(e instanceof o.j)return{success:!1,data:null,errors:(e.errors||[]).map(e=>({field:e.path?.join(".")||"unknown",message:e.message,code:e.code}))};return{success:!1,data:null,errors:[{message:"Validation failed",code:"unknown_error"}]}}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[948,766,482,254,258],()=>a(7107));module.exports=i})();