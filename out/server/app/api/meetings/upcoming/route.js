"use strict";(()=>{var e={};e.id=749,e.ids=[749],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},2299:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c});var i={};r.r(i),r.d(i,{GET:()=>d});var o=r(9303),n=r(8716),a=r(670),s=r(1595),u=r(2859),p=r(7258);async function m(e,t){if((0,u.P)(e,t,["GET"])){if(await new Promise((r,i)=>{(0,p.mk)(e,t,e=>{e?i(e):r()})}),!s.pR)return(0,u.y7)(t,"Database access not available",503);try{let r=e.userId,{limit:i=5,hours:o=24}=e.query,n=new Date,a=new Date(n.getTime()+36e5*parseInt(o)),p=n.toISOString().split("T")[0],m=n.toTimeString().slice(0,5),d=a.toISOString().split("T")[0],l=a.toTimeString().slice(0,5),{data:g,error:c}=await s.pR.from(s.ji.MEETINGS).select("*").eq("user_id",r).or(`date.gt.${p},and(date.eq.${p},time.gte.${m})`).or(`date.lt.${d},and(date.eq.${d},time.lte.${l})`).order("date",{ascending:!0}).order("time",{ascending:!0}).limit(parseInt(i));if(c)return console.error("Failed to get upcoming meetings:",c),(0,u.y7)(t,"Failed to retrieve upcoming meetings",500);let h=g.map(e=>{let t=new Date(`${e.date}T${e.time}`),r=Math.round((t-n)/6e4),i=Math.round(r/60);return{...e,minutesUntil:r>0?r:0,hoursUntil:i>0?i:0,isToday:e.date===p,isSoon:r<=e.reminder_minutes,timeUntilText:function(e){if(e<0)return"Past due";if(0===e)return"Now";if(e<60)return`${e} minute${1!==e?"s":""}`;let t=Math.floor(e/60),r=e%60;return 0===r?`${t} hour${1!==t?"s":""}`:`${t}h ${r}m`}(r)}});return(0,u.Wr)(t,{meetings:h,total:h.length,queryInfo:{timeWindow:`${o} hours`,from:n.toISOString(),to:a.toISOString()}})}catch(e){return console.error("Get upcoming meetings error:",e),(0,u.y7)(t,"Failed to retrieve upcoming meetings",500)}}}let d=(0,u.bi)(m),l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/meetings/upcoming/route",pathname:"/api/meetings/upcoming",filename:"route",bundlePath:"app/api/meetings/upcoming/route"},resolvedPagePath:"/home/devswha/workspace/pomodoro/app/api/meetings/upcoming/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:c,serverHooks:h}=l,x="/api/meetings/upcoming/route";function f(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,766,482,258],()=>r(2299));module.exports=i})();