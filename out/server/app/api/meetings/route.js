"use strict";(()=>{var e={};e.id=643,e.ids=[643],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},441:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>R,requestAsyncStorage:()=>f,routeModule:()=>g,serverHooks:()=>_,staticGenerationAsyncStorage:()=>y});var i={};a.r(i),a.d(i,{GET:()=>c,POST:()=>x});var r=a(9303),o=a(8716),n=a(670),s=a(1595),d=a(7246),l=a(2859),m=a(7258);async function u(e,t){if(await new Promise((a,i)=>{(0,m.mk)(e,t,e=>{e?i(e):a()})}),!s.pR)return(0,l.y7)(t,"Database access not available",503);let a=(0,d.Fv)(d.CG,e.query||{});if(!a.success)return(0,l.Gc)(t,a.errors);try{let i=e.userId,{date:r,startDate:o,endDate:n,type:d,priority:m}=a.data,u=s.pR.from(s.ji.MEETINGS).select("*",{count:"exact"}).eq("user_id",i);r&&(u=u.eq("date",r)),o&&n?u=u.gte("date",o).lte("date",n):o?u=u.gte("date",o):n&&(u=u.lte("date",n)),d&&(u=u.eq("type",d)),m&&(u=u.eq("priority",m)),u=u.order("date",{ascending:!0}).order("time",{ascending:!0});let{data:p,count:c,error:x}=await u;if(x)return console.error("Failed to get meetings:",x),(0,l.y7)(t,"Failed to retrieve meetings",500);return(0,l.Wr)(t,p,"Meetings retrieved successfully")}catch(e){return console.error("Get meetings error:",e),(0,l.y7)(t,"Failed to retrieve meetings",500)}}async function p(e,t){if(await new Promise((a,i)=>{(0,m.mk)(e,t,e=>{e?i(e):a()})}),!s.pR)return(0,l.y7)(t,"Database access not available",503);let a=(0,d.Fv)(d.bd,e.body);if(!a.success)return(0,l.Gc)(t,a.errors);try{let i=e.userId,r=a.data,{data:o}=await s.pR.from(s.ji.MEETINGS).select("id, title, time").eq("user_id",i).eq("date",r.date).eq("time",r.time);if(o&&o.length>0)return(0,l.y7)(t,"A meeting already exists at this time",409,{conflictingMeeting:o[0]});let n=new Date,d={user_id:i,title:r.title,description:r.description||null,date:r.date,time:r.time,duration:r.duration,location:r.location||null,participants:r.participants||[],type:r.type,priority:r.priority,reminder_minutes:r.reminderMinutes,created_at:n.toISOString(),updated_at:n.toISOString()},{data:m,error:u}=await s.pR.from(s.ji.MEETINGS).insert(d).select().single();if(u)return console.error("Failed to create meeting:",u),(0,l.y7)(t,"Failed to create meeting",500);return(0,l.Wr)(t,m,"Meeting created successfully",201)}catch(e){return console.error("Create meeting error:",e),(0,l.y7)(t,"Failed to create meeting",500)}}let c=(0,l.bi)(u),x=(0,l.bi)(p),g=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/meetings/route",pathname:"/api/meetings",filename:"route",bundlePath:"app/api/meetings/route"},resolvedPagePath:"/home/devswha/workspace/pomodoro/app/api/meetings/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:y,serverHooks:_}=g,h="/api/meetings/route";function R(){return(0,n.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:y})}},7246:(e,t,a)=>{a.d(t,{$p:()=>_,CG:()=>h,Db:()=>g,Fv:()=>w,Mk:()=>x,Vp:()=>p,W0:()=>Z,bd:()=>y,dm:()=>u,g2:()=>R,gY:()=>m,sQ:()=>f,xH:()=>c});var i=a(1598),r=a(7254),o=a(9489);let n=i.Z_().email("Invalid email address").toLowerCase(),s=i.Z_().min(4,"Password must be at least 4 characters"),d=i.Z_().min(1,"Username is required").max(50,"Username too long");i.Z_().uuid("Invalid UUID format"),i.Rx().int().positive();let l=i.Z_().datetime("Invalid date format"),m=i.Ry({username:d,email:n,password:s,displayName:i.Z_().max(100).optional()}),u=i.Ry({username:d,password:i.Z_().min(1,"Password is required"),rememberMe:i.O7().default(!1)}),p=(i.Ry({currentPassword:i.Z_().min(1,"Current password is required"),newPassword:s}),i.Ry({displayName:i.Z_().max(100).optional(),email:n.optional(),bio:i.Z_().max(500).optional(),avatar:i.Z_().url().optional().or(i.i0(""))})),c=i.Ry({defaultPomodoroLength:i.Rx().int().min(1).max(120).default(25),breakLength:i.Rx().int().min(1).max(30).default(5),longBreakLength:i.Rx().int().min(1).max(60).default(15),weeklyGoal:i.Rx().int().min(1).max(1e3).default(140),theme:i.Km(["default","dark","minimal"]).default("default"),soundEnabled:i.O7().default(!0),notificationsEnabled:i.O7().default(!0),autoStartBreak:i.O7().default(!1),autoStartPomodoro:i.O7().default(!1)}),x=i.Ry({title:i.Z_().min(1,"Session title is required").max(200),goal:i.Z_().max(500).optional(),tags:i.Z_().max(200).optional(),location:i.Z_().max(100).optional(),duration:i.Rx().int().min(1).max(120).default(25),scheduledTime:l.optional()}),g=i.Ry({title:i.Z_().min(1).max(200).optional(),goal:i.Z_().max(500).optional(),tags:i.Z_().max(200).optional(),location:i.Z_().max(100).optional(),status:i.Km(["scheduled","active","completed","stopped"]).optional()}),f=i.Ry({page:r.Rx().int().min(1).default(1),limit:r.Rx().int().min(1).max(100).default(20),status:i.Km(["scheduled","active","completed","stopped"]).optional(),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional(),tags:i.Z_().optional()}),y=i.Ry({title:i.Z_().min(1,"Meeting title is required").max(200),description:i.Z_().max(1e3).optional(),date:i.Z_().date("Invalid date format"),time:i.Z_().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"Invalid time format (HH:MM)"),duration:i.Rx().int().min(15).max(480).default(60),location:i.Z_().max(200).optional(),participants:i.IX(i.Z_().email()).optional(),type:i.Km(["meeting","call","presentation","workshop","other"]).default("meeting"),priority:i.Km(["low","medium","high"]).default("medium"),reminderMinutes:i.Rx().int().min(0).max(10080).default(15)}),_=y.partial(),h=i.Ry({date:i.Z_().date().optional(),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional(),type:i.Km(["meeting","call","presentation","workshop","other"]).optional(),priority:i.Km(["low","medium","high"]).optional()}),R=i.Ry({period:i.Km(["day","week","month","year"]).default("week"),startDate:i.Z_().date().optional(),endDate:i.Z_().date().optional()}),Z=i.Ry({period:i.Km(["week","month","year"]).default("week"),limit:r.Rx().int().min(1).max(100).default(10)}),w=(i.Ry({page:r.Rx().int().min(1).default(1),limit:r.Rx().int().min(1).max(100).default(20)}),i.Ry({sortBy:i.Z_().optional(),sortOrder:i.Km(["asc","desc"]).default("desc")}),(e,t)=>{try{return{success:!0,data:e.parse(t),errors:null}}catch(e){if(e instanceof o.j)return{success:!1,data:null,errors:(e.errors||[]).map(e=>({field:e.path?.join(".")||"unknown",message:e.message,code:e.code}))};return{success:!1,data:null,errors:[{message:"Validation failed",code:"unknown_error"}]}}})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[948,766,482,254,258],()=>a(441));module.exports=i})();