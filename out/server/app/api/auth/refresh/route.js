"use strict";(()=>{var e={};e.id=575,e.ids=[575],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},5158:(e,r,n)=>{n.r(r),n.d(r,{originalPathname:()=>p,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var t={};n.r(t),n.d(t,{POST:()=>c});var s=n(9303),o=n(8716),i=n(670),u=n(1595),a=n(2859);async function l(e,r){if((0,a.P)(e,r,["POST"]))try{let{refreshToken:n}=e.body;if(!n)return(0,a.LW)(r,"Refresh token required");let{data:t,error:s}=await u.OQ.auth.refreshSession({refresh_token:n});if(s){if(s.message.includes("invalid_grant"))return(0,a.LW)(r,"Invalid or expired refresh token");return(0,a.y7)(r,s.message,400)}if(!t.session||!t.user)return(0,a.LW)(r,"Failed to refresh session");let o={session:{accessToken:t.session.access_token,refreshToken:t.session.refresh_token,expiresIn:t.session.expires_in,expiresAt:t.session.expires_at,tokenType:t.session.token_type},user:{id:t.user.id,email:t.user.email,emailConfirmed:!!t.user.email_confirmed_at},message:"Token refreshed successfully"};return(0,a.Wr)(r,o,o.message)}catch(e){return console.error("Token refresh error:",e),(0,a.y7)(r,"Token refresh failed",500)}}let c=(0,a.bi)(l),d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/refresh/route",pathname:"/api/auth/refresh",filename:"route",bundlePath:"app/api/auth/refresh/route"},resolvedPagePath:"/home/devswha/workspace/pomodoro/app/api/auth/refresh/route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:m}=d,p="/api/auth/refresh/route";function g(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},1595:(e,r,n)=>{n.d(r,{OQ:()=>c,ji:()=>h,pR:()=>d});var t=n(9498);let s="https://demo.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlbW8iLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY0NjkyODAwMCwiZXhwIjoxOTYyNTA0MDAwfQ.demo-key-for-local-development",i=process.env.SUPABASE_SERVICE_ROLE_KEY,u=e=>{if(!e||e.includes("your_supabase")||e.includes("placeholder")||e.includes("demo.supabase.co"))return!1;try{return new URL(e),e.includes("supabase.co")}catch{return!1}},a=u(s)&&o&&!o.includes("your_");console.log("Supabase Configuration Status:",{url:s?"Present":"Missing",urlValid:u(s),anonKey:o?"Present":"Missing",anonKeyValid:o&&!o.includes("your_"),hasValidConfig:a});let l=()=>{let e={select:function(){return this},insert:function(){return this},update:function(){return this},delete:function(){return this},eq:function(){return this},neq:function(){return this},gt:function(){return this},gte:function(){return this},lt:function(){return this},lte:function(){return this},like:function(){return this},ilike:function(){return this},is:function(){return this},in:function(){return this},contains:function(){return this},containedBy:function(){return this},rangeGt:function(){return this},rangeGte:function(){return this},rangeLt:function(){return this},rangeLte:function(){return this},rangeAdjacent:function(){return this},overlaps:function(){return this},textSearch:function(){return this},match:function(){return this},not:function(){return this},or:function(){return this},filter:function(){return this},order:function(){return this},limit:function(){return this},range:function(){return this},abortSignal:function(){return this},single:function(){return Promise.resolve({data:null,error:{message:"Using localStorage mode - no data available"}})},maybeSingle:function(){return Promise.resolve({data:null,error:null})},then:function(e){return e({data:[],error:null})},catch:function(){return this}};return{from:()=>e,auth:{signUp:()=>Promise.resolve({data:{user:null,session:null},error:{message:"Using localStorage mode"}}),signInWithPassword:()=>Promise.resolve({data:{user:null,session:null},error:{message:"Using localStorage mode"}}),signOut:()=>Promise.resolve({error:null}),getUser:()=>Promise.resolve({data:{user:null},error:{message:"Using localStorage mode"}}),getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},channel:()=>({on:function(){return this},subscribe:()=>Promise.resolve("SUBSCRIBED"),unsubscribe:()=>{},track:()=>Promise.resolve(),send:()=>Promise.resolve(),presenceState:()=>({})}),realtime:{disconnect:()=>{}}}},c=a?(0,t.eI)(s,o,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:void 0},realtime:{params:{eventsPerSecond:10}}}):l(),d=a&&i?(0,t.eI)(s,i,{auth:{autoRefreshToken:!1,persistSession:!1}}):l(),h={USERS:"users",USER_PREFERENCES:"user_preferences",USER_STATS:"user_stats",POMODORO_SESSIONS:"pomodoro_sessions",MEETINGS:"meetings",AUTH_SESSIONS:"auth_sessions"}},2859:(e,r,n)=>{n.d(r,{Gc:()=>m,Hm:()=>d,Ij:()=>h,LW:()=>c,P:()=>R,Wr:()=>a,Xs:()=>f,bi:()=>g,kv:()=>S,y7:()=>l});let t=(e,r=null,n=null,t={})=>{let s={success:e,timestamp:new Date().toISOString(),...t};return e?(s.data=r,n&&(s.message=n)):(s.error=n||"An error occurred",r&&(s.details=r)),s},s=(e,r=null,n={})=>t(!0,e,r,n),o=(e,r=null,n={})=>t(!1,r,e,n),i={OK:200,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,UNPROCESSABLE_ENTITY:422,INTERNAL_SERVER_ERROR:500},u=(e,r,n)=>Response.json(n,{status:r}),a=(e,r,n=null,t=i.OK,o={})=>u(e,t,s(r,n,o)),l=(e,r,n=i.INTERNAL_SERVER_ERROR,t=null,s={})=>u(e,n,o(r,t,s)),c=(e,r="Unauthorized")=>l(e,r,i.UNAUTHORIZED),d=(e,r="Forbidden")=>l(e,r,i.FORBIDDEN),h=(e,r="Resource not found")=>l(e,r,i.NOT_FOUND),f=(e,r="Resource conflict",n=null)=>l(e,r,i.CONFLICT,n),m=(e,r,n="Validation failed")=>l(e,n,i.UNPROCESSABLE_ENTITY,r),p=(e,r="Internal server error",n=null)=>(n&&console.error("Internal server error:",n),l(e,r,i.INTERNAL_SERVER_ERROR)),g=e=>async(r,n)=>{try{await e(r,n)}catch(e){if(console.error("API route error:",e),"ValidationError"===e.name)return m(n,e.errors,e.message);if("UnauthorizedError"===e.name)return c(n,e.message);if("ForbiddenError"===e.name)return d(n,e.message);if("NotFoundError"===e.name)return h(n,e.message);if("ConflictError"===e.name)return f(n,e.message,e.details);return p(n,"An unexpected error occurred",e)}},S=(e,r,n)=>{let t=Math.ceil(n/r);return{pagination:{currentPage:e,totalPages:t,totalCount:n,limit:r,hasNextPage:e<t,hasPrevPage:e>1}}},R=(e,r,n)=>!!n.includes(e.method)||(r.setHeader("Allow",n.join(", ")),l(r,`Method ${e.method} not allowed`,405))}};var r=require("../../../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),t=r.X(0,[948,766],()=>n(5158));module.exports=t})();