"use strict";(()=>{var e={};e.id=987,e.ids=[987],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},8658:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>q,requestAsyncStorage:()=>v,routeModule:()=>l,serverHooks:()=>S,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{POST:()=>c});var o=r(9303),i=r(8716),a=r(670),p=r(1595),n=r(2859),u=r(7258);async function d(e,t){if((0,n.P)(e,t,["POST"])){if(await new Promise((r,s)=>{(0,u.mk)(e,t,e=>{e?s(e):r()})}),!p.pR)return(0,n.y7)(t,"Database access not available",503);try{let r=e.userId,{data:s,error:o}=await p.pR.from(p.ji.POMODORO_SESSIONS).select("*").eq("user_id",r).eq("status","active").single();if(o||!s)return(0,n.Ij)(t,"No active session found to stop");let i=new Date,{data:a,error:u}=await p.pR.from(p.ji.POMODORO_SESSIONS).update({status:"stopped",stopped_at:i.toISOString(),updated_at:i.toISOString()}).eq("id",s.id).select().single();if(u)return console.error("Failed to stop session:",u),(0,n.y7)(t,"Failed to stop session",500);return(0,n.Wr)(t,a,"Session stopped successfully")}catch(e){return console.error("Stop session error:",e),(0,n.y7)(t,"Failed to stop session",500)}}}let c=(0,n.bi)(d),l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/sessions/active/stop/route",pathname:"/api/sessions/active/stop",filename:"route",bundlePath:"app/api/sessions/active/stop/route"},resolvedPagePath:"/home/devswha/workspace/pomodoro/app/api/sessions/active/stop/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:x,serverHooks:S}=l,m="/api/sessions/active/stop/route";function q(){return(0,a.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:x})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,766,482,258],()=>r(8658));module.exports=s})();