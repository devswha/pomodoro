(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{2276:function(e,r,t){Promise.resolve().then(t.bind(t,4965))},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},4965:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return k}});var n=t(5583),i=t(1780),o=t(7437),s=t(2265),a=t(9376),l=t(3954),d=t(419);let c=l.ZP.div.withConfig({componentId:"sc-95513a3d-0"})(["height:100%;display:flex;flex-direction:column;background:#ffffff;position:relative;@media (min-width:769px){justify-content:center;align-items:center;min-height:100vh;}"]),m=l.ZP.div.withConfig({componentId:"sc-95513a3d-1"})(["position:absolute;top:1rem;right:1.5rem;font-size:0.75rem;color:#6c757d;font-weight:400;z-index:1000;@media (min-width:769px){top:2rem;right:2rem;font-size:0.875rem;}"]),u=l.ZP.div.withConfig({componentId:"sc-95513a3d-2"})(["flex:1;padding:2rem 1.5rem;display:flex;flex-direction:column;justify-content:center;gap:3rem;@media (min-width:769px){max-width:450px;width:100%;padding:3rem;gap:3rem;flex:none;}@media (min-width:1200px){max-width:500px;padding:4rem;gap:4rem;}"]),h=l.ZP.div.withConfig({componentId:"sc-95513a3d-3"})(["text-align:center;"]),f=l.ZP.h1.withConfig({componentId:"sc-95513a3d-4"})(["font-size:2.5rem;font-weight:300;color:#000000;margin-bottom:0.5rem;letter-spacing:-0.02em;@media (min-width:769px){font-size:3rem;}@media (min-width:1200px){font-size:3.5rem;}"]),g=l.ZP.p.withConfig({componentId:"sc-95513a3d-5"})(["font-size:1rem;color:#6c757d;margin:0;font-weight:400;"]),p=l.ZP.div.withConfig({componentId:"sc-95513a3d-6"})(["display:flex;flex-direction:column;gap:2rem;"]),w=l.ZP.form.withConfig({componentId:"sc-95513a3d-7"})(["display:flex;flex-direction:column;gap:1.5rem;"]),x=l.ZP.div.withConfig({componentId:"sc-95513a3d-8"})(["display:flex;flex-direction:column;gap:0.5rem;"]),b=l.ZP.label.withConfig({componentId:"sc-95513a3d-9"})(["font-size:0.875rem;font-weight:500;color:#000000;text-transform:uppercase;letter-spacing:0.05em;"]),v=l.ZP.input.withConfig({componentId:"sc-95513a3d-10"})(["width:100%;padding:1rem;border:2px solid ",";border-radius:0;font-size:1rem;color:#000000;background:#ffffff;transition:border-color 0.2s ease;&::placeholder{color:#adb5bd;}&:focus{outline:none;border-color:#000000;}"],e=>e.error?"#dc3545":"#e9ecef"),y=l.ZP.button.withConfig({componentId:"sc-95513a3d-11"})(["width:100%;padding:1rem;background:#000000;color:#ffffff;border:none;border-radius:0;font-size:1rem;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:all 0.2s ease;margin-top:1rem;&:hover:not(:disabled){background:#333333;}&:disabled{background:#adb5bd;cursor:not-allowed;}"]),S=l.ZP.div.withConfig({componentId:"sc-95513a3d-12"})(["color:#dc3545;font-size:0.875rem;margin-top:0.25rem;opacity:",";transition:opacity 0.2s ease;"],e=>e.show?1:0),j=l.ZP.div.withConfig({componentId:"sc-95513a3d-13"})(["text-align:center;margin-top:2rem;color:#6c757d;font-size:0.875rem;button{background:none;border:none;color:#000000;text-decoration:underline;cursor:pointer;font-size:inherit;&:hover{opacity:0.7;}}"]),P=l.ZP.div.withConfig({componentId:"sc-95513a3d-14"})(['display:flex;align-items:center;gap:0.5rem;margin-top:1rem;input[type="checkbox"]{width:1rem;height:1rem;margin:0;}label{font-size:0.875rem;color:#6c757d;margin:0;cursor:pointer;text-transform:none;letter-spacing:normal;}']),C=l.ZP.div.withConfig({componentId:"sc-95513a3d-15"})(["width:1rem;height:1rem;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;animation:spin 1s linear infinite;margin-right:0.5rem;display:inline-block;@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]);function k(){let e=(0,a.useRouter)(),{loginUser:r,currentUser:t,authLoading:l,sessionWarning:k}=(0,d.a)(),[E,I]=(0,s.useState)({username:"",password:"",rememberMe:!1}),[z,Z]=(0,s.useState)(!1),[U,_]=(0,s.useState)(""),[M,V]=(0,s.useState)({});if((0,s.useEffect)(()=>{!l&&t&&e.push("/main")},[t,l,e]),l)return(0,o.jsxs)(c,{children:[(0,o.jsx)(m,{children:"v1.0.1"}),(0,o.jsx)(u,{children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,o.jsx)(C,{}),"Loading..."]})})]});let A=e=>{let{name:r,value:t,type:o,checked:s}=e.target;I(e=>(0,i._)((0,n._)({},e),{[r]:"checkbox"===o?s:t})),U&&_(""),M[r]&&V(e=>(0,i._)((0,n._)({},e),{[r]:""}))},O=()=>{let e={};return E.username.trim()||(e.username="사용자명을 입력해주세요."),E.password||(e.password="비밀번호를 입력해주세요."),V(e),0===Object.keys(e).length},T=async t=>{if(t.preventDefault(),_(""),V({}),O()){Z(!0);try{await r(E.username.trim(),E.password,E.rememberMe),e.push("/main")}catch(e){console.error("Login error:",e),_(e.message||"로그인에 실패했습니다. 다시 시도해주세요.")}finally{Z(!1)}}};return(0,o.jsxs)(c,{children:[(0,o.jsx)(m,{children:"v1.0.1"}),(0,o.jsxs)(u,{children:[(0,o.jsxs)(h,{children:[(0,o.jsx)(f,{children:"POMODORO"}),(0,o.jsx)(g,{children:"집중력 향상을 위한 시간 관리"})]}),(0,o.jsxs)(p,{children:[(0,o.jsxs)(w,{onSubmit:T,children:[(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"username",children:"사용자명"}),(0,o.jsx)(v,{id:"username",name:"username",type:"text",placeholder:"사용자명 입력",value:E.username,onChange:A,error:M.username,autoComplete:"username"}),(0,o.jsx)(S,{show:!!M.username,children:M.username})]}),(0,o.jsxs)(x,{children:[(0,o.jsx)(b,{htmlFor:"password",children:"비밀번호"}),(0,o.jsx)(v,{id:"password",name:"password",type:"password",placeholder:"비밀번호 입력",value:E.password,onChange:A,error:M.password,autoComplete:"current-password"}),(0,o.jsx)(S,{show:!!M.password,children:M.password})]}),(0,o.jsxs)(P,{children:[(0,o.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:E.rememberMe,onChange:A}),(0,o.jsx)("label",{htmlFor:"rememberMe",children:"로그인 상태 유지"})]}),k&&(0,o.jsx)(S,{show:!0,style:{textAlign:"center",marginTop:"1rem",color:"#ffc107"},children:k}),U&&(0,o.jsx)(S,{show:!0,style:{textAlign:"center",marginTop:"1rem"},children:U}),(0,o.jsxs)(y,{type:"submit",disabled:z,children:[z&&(0,o.jsx)(C,{}),z?"로그인 중...":"로그인"]})]}),(0,o.jsxs)(j,{children:["계정이 없나요?"," ",(0,o.jsx)("button",{type:"button",onClick:()=>{e.push("/signup")},children:"회원가입"})]})]})]})]})}},419:function(e,r,t){"use strict";t.d(r,{UserProvider:function(){return c},a:function(){return d}});var n=t(5583),i=t(1780),o=t(7437),s=t(2265),a=t(81);let l=(0,s.createContext)(),d=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useUser must be used within a UserProvider");return e},c=e=>{let{children:r}=e,[t,d]=(0,s.useState)(null),[c]=(0,s.useState)(()=>new a.w),[m,u]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[g,p]=(0,s.useState)(!1),[w,x]=(0,s.useState)(!0),[b,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=c.getCurrentSession();if(e){let r=c.getUser(e.userId);r?(d(r),f(e.token),p(!0),P(e.userId)):c.logoutSession()}}catch(e){console.error("Error initializing auth:",e),c.logoutSession()}finally{x(!1)}})();let e=setInterval(()=>{if(h){let e=c.validateSession(h);if(e){let r=new Date(e.expiresAt),t=new Date,n=r.getTime()-t.getTime();n>0&&n<=3e5&&!e.rememberMe?v("세션이 ".concat(Math.ceil(n/6e4),"분 후 만료됩니다.")):v(null)}else v("세션이 만료되어 자동으로 로그아웃됩니다."),setTimeout(()=>j(),3e3)}},3e4);return()=>clearInterval(e)},[c,h]);let y=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(x(!0),v(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!r)throw Error("비밀번호를 입력해주세요.");let n=await c.loginUser(e.trim(),r,t);return d(n.user),f(n.sessionToken),p(!0),P(n.user.id),n.user}catch(e){if(console.error("Login failed:",e),e.message.includes("존재하지 않는"))throw Error("존재하지 않는 사용자입니다. 사용자명을 확인해주세요.");if(e.message.includes("비밀번호가 올바르지"))throw e;if(e.message.includes("일시적으로 잠겼습니다"))throw e;throw Error("로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요.")}finally{x(!1)}},S=async(e,r)=>{try{var t;if(x(!0),v(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!(null==r?void 0:null===(t=r.email)||void 0===t?void 0:t.trim()))throw Error("이메일을 입력해주세요.");if(!(null==r?void 0:r.password))throw Error("비밀번호를 입력해주세요.");return await c.registerUser(e.trim(),(0,i._)((0,n._)({},r),{email:r.email.trim()}))}catch(e){if(console.error("Registration failed:",e),e.message.includes("이미 존재하는"))throw Error("이미 사용 중인 사용자명입니다. 다른 사용자명을 선택해주세요.");if(e.message.includes("이미 사용 중인 이메일"))throw Error("이미 사용 중인 이메일 주소입니다. 다른 이메일을 사용해주세요.");if(e.message.includes("비밀번호"))throw e;if(e.message.includes("이메일"))throw e;else if(e.message.includes("사용자명"))throw e;else throw Error("회원가입에 실패했습니다. 입력 정보를 확인하고 다시 시도해주세요.")}finally{x(!1)}},j=()=>{try{c.logoutSession(h),d(null),u(null),f(null),p(!1),v(null)}catch(e){console.error("Logout error:",e),d(null),u(null),f(null),p(!1),v(null)}},P=e=>{let r=c.getActiveSession(e);r&&(new Date<new Date(r.endTime)?u(r):(c.clearActiveSession(e),u(null)))},C=async e=>{if(!t)throw Error("No user logged in");try{let r=await c.updateUserProfile(t.id,e);return d(r),r}catch(e){throw console.error("Profile update failed:",e),e}};return(0,o.jsx)(l.Provider,{value:{currentUser:t,activeSession:m,sessionToken:h,isSessionValid:g,authLoading:w,sessionWarning:b,loginUser:y,registerUser:S,logoutUser:j,createPomodoroSession:e=>{if(!t)throw Error("No user logged in");let r=c.createPomodoroSession(t.id,e);return u(r),r},completePomodoroSession:()=>{t&&m&&(c.completePomodoroSession(t.id,m.id),u(null))},stopPomodoroSession:()=>{t&&m&&(c.stopPomodoroSession(t.id,m.id),u(null))},getUserStats:()=>t?c.getUserStats(t.id):null,getUserSessions:()=>t?c.getUserSessions(t.id):[],updateUserProfile:C,getUserActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return t?c.getUserActivity(t.id,e):null},validateCurrentSession:()=>!!h&&(!!c.validateSession(h)||(j(),!1)),checkPasswordStrength:e=>{if(!e)return{isValid:!1,errors:["비밀번호를 입력해주세요"],warnings:[],score:0,strength:"weak"};let r=[];e.length<4&&r.push("비밀번호는 4자 이상이어야 합니다");let t=Math.min(10*e.length,100),n={medium:t>=50&&t<80,strong:t>=80};return{isValid:0===r.length,errors:r,warnings:[],score:t,strength:n.strong?"strong":n.medium?"medium":"weak"}},validateEmail:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"이메일을 입력해주세요."};let r=e.trim().toLowerCase();return r.includes("@")?{isValid:!0,normalizedEmail:r}:{isValid:!1,error:"이메일에 @가 포함되어야 합니다."}},validateUsername:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"사용자명을 입력해주세요."};let r=e.trim();return r.length<1?{isValid:!1,error:"사용자명을 입력해주세요."}:r.length>50?{isValid:!1,error:"사용자명은 50자 이하여야 합니다."}:{isValid:!0,normalizedUsername:r.toLowerCase()}},extendSession:()=>!!(h&&c.validateSession(h))&&(v(null),!0),dismissSessionWarning:()=>{v(null)},userManager:c},children:r})}}},function(e){e.O(0,[954,81,971,966,744],function(){return e(e.s=2276)}),_N_E=e.O()}]);