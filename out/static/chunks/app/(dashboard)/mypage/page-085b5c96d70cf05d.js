(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{5799:function(e,t,i){Promise.resolve().then(i.bind(i,7377))},9376:function(e,t,i){"use strict";var n=i(5475);i.o(n,"usePathname")&&i.d(t,{usePathname:function(){return n.usePathname}}),i.o(n,"useRouter")&&i.d(t,{useRouter:function(){return n.useRouter}})},7377:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return eH}});var n=i(7437),o=i(2265),r=i(9376),s=i(3954),a=i(419),d=i(5583),c=i(1780);let l=s.ZP.div.withConfig({componentId:"sc-78a2c919-0"})(["max-width:600px;margin:0 auto;"]),p=s.ZP.div.withConfig({componentId:"sc-78a2c919-1"})(["background:#fff;border:2px solid #000;margin-bottom:24px;border-radius:0;@media (min-width:769px){margin-bottom:32px;}"]),h=s.ZP.div.withConfig({componentId:"sc-78a2c919-2"})(["padding:20px 24px;background:#000;color:#fff;font-weight:700;font-size:16px;text-transform:uppercase;letter-spacing:1px;@media (min-width:769px){padding:24px 32px;font-size:18px;}"]),x=s.ZP.div.withConfig({componentId:"sc-78a2c919-3"})(["padding:24px;@media (min-width:769px){padding:32px;}"]),m=s.ZP.div.withConfig({componentId:"sc-78a2c919-4"})(["margin-bottom:20px;&:last-child{margin-bottom:0;}@media (min-width:769px){margin-bottom:24px;}"]),u=s.ZP.label.withConfig({componentId:"sc-78a2c919-5"})(["display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#000;text-transform:uppercase;letter-spacing:0.5px;@media (min-width:769px){font-size:16px;}"]),g=s.ZP.input.withConfig({componentId:"sc-78a2c919-6"})(["width:100%;padding:12px 16px;border:2px solid #000;background:#fff;font-size:14px;border-radius:0;color:#000;transition:all 0.2s ease;&:focus{outline:none;background:#f8f9fa;}&:disabled{background:#e9ecef;color:#666;cursor:not-allowed;}@media (min-width:769px){padding:14px 18px;font-size:16px;}"]),f=s.ZP.textarea.withConfig({componentId:"sc-78a2c919-7"})(["width:100%;min-height:100px;padding:12px 16px;border:2px solid #000;background:#fff;font-size:14px;border-radius:0;color:#000;resize:vertical;font-family:inherit;transition:all 0.2s ease;&:focus{outline:none;background:#f8f9fa;}@media (min-width:769px){padding:14px 18px;font-size:16px;min-height:120px;}"]),w=s.ZP.button.withConfig({componentId:"sc-78a2c919-8"})(["padding:12px 24px;background:",";color:#fff;border:none;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:1px;cursor:pointer;border-radius:0;transition:all 0.2s ease;margin-right:12px;&:hover{opacity:0.9;}&:disabled{background:#ccc;cursor:not-allowed;opacity:0.7;}&:last-child{margin-right:0;}@media (min-width:769px){padding:14px 28px;font-size:16px;margin-right:16px;}"],e=>"danger"===e.variant?"#dc3545":"#000"),j=s.ZP.div.withConfig({componentId:"sc-78a2c919-9"})(["margin-top:8px;font-size:12px;color:",";font-weight:500;"],e=>{switch(e.strength){case"strong":return"#28a745";case"medium":return"#ffc107";case"weak":return"#dc3545";default:return"#666"}}),b=s.ZP.div.withConfig({componentId:"sc-78a2c919-10"})(["margin-top:8px;padding:8px 12px;background:#f8d7da;border:1px solid #f5c6cb;color:#721c24;font-size:14px;border-radius:0;"]),v=s.ZP.div.withConfig({componentId:"sc-78a2c919-11"})(["margin-top:8px;padding:8px 12px;background:#d4edda;border:1px solid #c3e6cb;color:#155724;font-size:14px;border-radius:0;"]),y=s.ZP.div.withConfig({componentId:"sc-78a2c919-12"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;"]),k=s.ZP.div.withConfig({componentId:"sc-78a2c919-13"})(["background:#fff;border:2px solid #000;padding:32px;max-width:400px;width:100%;text-align:center;"]),P=s.ZP.h3.withConfig({componentId:"sc-78a2c919-14"})(["margin:0 0 16px 0;font-size:18px;font-weight:700;color:#000;text-transform:uppercase;"]),C=s.ZP.p.withConfig({componentId:"sc-78a2c919-15"})(["margin:0 0 24px 0;font-size:14px;color:#666;line-height:1.4;"]),S=s.ZP.div.withConfig({componentId:"sc-78a2c919-16"})(["display:flex;gap:12px;justify-content:center;"]),I=e=>{let t=[];e.length<8&&t.push("Password must be at least 8 characters"),/(?=.*[a-z])/.test(e)||t.push("Must contain lowercase letter"),/(?=.*[A-Z])/.test(e)||t.push("Must contain uppercase letter"),/(?=.*\d)/.test(e)||t.push("Must contain number"),/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(e)||t.push("Must contain special character");let i={weak:t.length>2,medium:1===t.length||2===t.length,strong:0===t.length};return{isValid:0===t.length,errors:t,strength:i.strong?"strong":i.medium?"medium":"weak"}};function D(e){let{userProfile:t,setUserProfile:i,userManager:r,currentUser:s}=e,[a,D]=(0,o.useState)({displayName:"",email:"",bio:"",currentPassword:"",newPassword:"",confirmPassword:""}),[Z,z]=(0,o.useState)(null),[M,A]=(0,o.useState)(""),[U,B]=(0,o.useState)(""),[E,N]=(0,o.useState)(!1),[L,F]=(0,o.useState)(!1);(0,o.useEffect)(()=>{t&&D(e=>(0,c._)((0,d._)({},e),{displayName:t.displayName||"",email:t.email||"",bio:t.bio||""}))},[t]);let R=e=>{let{name:t,value:i}=e.target;D(e=>(0,c._)((0,d._)({},e),{[t]:i})),"newPassword"===t&&(i?z(I(i)):z(null)),A(""),B("")},_=async e=>{if(e.preventDefault(),r&&s){N(!0),A(""),B("");try{let e={displayName:a.displayName,email:a.email,bio:a.bio},t=await r.updateUserProfile(s.id,e);i(t),B("Profile updated successfully!")}catch(e){A(e.message||"Failed to update profile")}finally{N(!1)}}},T=async e=>{if(e.preventDefault(),r&&s){if(a.newPassword!==a.confirmPassword){A("New passwords do not match");return}if(!(null==Z?void 0:Z.isValid)){A("Password does not meet security requirements");return}N(!0),A(""),B("");try{let e={currentPassword:a.currentPassword,newPassword:a.newPassword};await r.updateUserProfile(s.id,e),D(e=>(0,c._)((0,d._)({},e),{currentPassword:"",newPassword:"",confirmPassword:""})),z(null),B("Password changed successfully!")}catch(e){A(e.message||"Failed to change password")}finally{N(!1)}}},O=async()=>{if(r&&s)try{await r.deleteUser(s.id),window.location.href="/login"}catch(e){A(e.message||"Failed to delete account"),F(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l,{children:[(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Personal Information"}),(0,n.jsx)(x,{children:(0,n.jsxs)("form",{onSubmit:_,children:[(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"displayName",children:"Display Name"}),(0,n.jsx)(g,{id:"displayName",name:"displayName",type:"text",value:a.displayName,onChange:R,placeholder:"Your display name"})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"email",children:"Email Address"}),(0,n.jsx)(g,{id:"email",name:"email",type:"email",value:a.email,onChange:R,placeholder:"your.email@example.com"})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"bio",children:"Bio"}),(0,n.jsx)(f,{id:"bio",name:"bio",value:a.bio,onChange:R,placeholder:"Tell us about yourself..."})]}),M&&(0,n.jsx)(b,{children:M}),U&&(0,n.jsx)(v,{children:U}),(0,n.jsx)(w,{type:"submit",disabled:E,children:E?"Updating...":"Update Profile"})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Change Password"}),(0,n.jsx)(x,{children:(0,n.jsxs)("form",{onSubmit:T,children:[(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"currentPassword",children:"Current Password"}),(0,n.jsx)(g,{id:"currentPassword",name:"currentPassword",type:"password",value:a.currentPassword,onChange:R,placeholder:"Enter your current password"})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"newPassword",children:"New Password"}),(0,n.jsx)(g,{id:"newPassword",name:"newPassword",type:"password",value:a.newPassword,onChange:R,placeholder:"Enter your new password"}),Z&&(0,n.jsxs)(j,{strength:Z.strength,children:["Password strength: ",Z.strength.toUpperCase(),Z.errors.length>0&&(0,n.jsx)("div",{style:{marginTop:"4px"},children:Z.errors.map((e,t)=>(0,n.jsxs)("div",{children:["• ",e]},t))})]})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,n.jsx)(g,{id:"confirmPassword",name:"confirmPassword",type:"password",value:a.confirmPassword,onChange:R,placeholder:"Confirm your new password"})]}),(0,n.jsx)(w,{type:"submit",disabled:E||!a.newPassword||!a.currentPassword,children:E?"Changing...":"Change Password"})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(h,{children:"Account Management"}),(0,n.jsxs)(x,{children:[(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{children:"Account Status"}),(0,n.jsxs)("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#666"},children:["Account created: ",(null==t?void 0:t.createdAt)?new Date(t.createdAt).toLocaleDateString():"Unknown"]})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{children:"Data Export"}),(0,n.jsx)("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#666"},children:"Download all your profile, statistics, sessions, and meeting data as a JSON file for backup or migration purposes."}),(0,n.jsx)("div",{style:{marginBottom:"16px"},children:(0,n.jsx)(w,{type:"button",onClick:()=>{try{let e={profile:t,stats:null==r?void 0:r.getUserStats(s.id),sessions:null==r?void 0:r.getUserSessions(s.id),meetings:null==r?void 0:r.getMeetings(s.id),exportDate:new Date().toISOString(),version:"4.0.0",userId:s.id},i=JSON.stringify(e,null,2),n=new Blob([i],{type:"application/json"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download="pomodoro-data-".concat(s.id,"-").concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),B("Data exported successfully!")}catch(e){A("Failed to export data: "+e.message)}},children:"Export My Data"})})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{children:"Data Import"}),(0,n.jsx)("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#666"},children:"Import profile settings from a previously exported file. This will merge with your existing data where possible."}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsx)(w,{type:"button",onClick:()=>document.getElementById("data-import-file").click(),children:"Import Data"}),(0,n.jsx)("input",{id:"data-import-file",type:"file",accept:".json",style:{display:"none"},onChange:e=>{let n=e.target.files[0];if(!n)return;let o=new FileReader;o.onload=e=>{try{let l=JSON.parse(e.target.result);if(!l.profile&&!l.stats&&!l.sessions)throw Error("Invalid data format - missing required sections");if(window.confirm("This will update your profile settings with imported data. Your statistics and sessions will not be modified for security. Continue?")){var n,o,a;let e={};(null===(n=l.profile)||void 0===n?void 0:n.displayName)&&(e.displayName=l.profile.displayName),(null===(o=l.profile)||void 0===o?void 0:o.bio)&&(e.bio=l.profile.bio),(null===(a=l.profile)||void 0===a?void 0:a.preferences)&&(e.preferences=(0,d._)({},null==t?void 0:t.preferences,l.profile.preferences)),Object.keys(e).length>0?null==r||r.updateUserProfile(s.id,e).then(e=>{i(e),D(t=>(0,c._)((0,d._)({},t),{displayName:e.displayName||"",bio:e.bio||""})),B("Profile data imported successfully!")}).catch(e=>{A("Failed to import data: "+e.message)}):A("No valid profile data found to import")}}catch(e){A("Failed to parse import file: "+e.message)}},o.readAsText(n),e.target.value=""}})]})]}),(0,n.jsxs)(m,{children:[(0,n.jsx)(u,{children:"Delete Account"}),(0,n.jsx)("div",{style:{marginBottom:"16px",fontSize:"14px",color:"#dc3545"},children:"Warning: This action cannot be undone. All your data will be permanently deleted."}),(0,n.jsx)(w,{type:"button",variant:"danger",onClick:()=>F(!0),children:"Delete Account"})]})]})]})]}),L&&(0,n.jsx)(y,{children:(0,n.jsxs)(k,{children:[(0,n.jsx)(P,{children:"Delete Account"}),(0,n.jsx)(C,{children:"Are you sure you want to delete your account? This action cannot be undone and all your data will be permanently lost."}),(0,n.jsxs)(S,{children:[(0,n.jsx)(w,{type:"button",onClick:()=>F(!1),children:"Cancel"}),(0,n.jsx)(w,{type:"button",variant:"danger",onClick:O,children:"Delete Account"})]})]})})]})}let Z=s.ZP.div.withConfig({componentId:"sc-efc25d2f-0"})(["max-width:600px;margin:0 auto;"]),z=s.ZP.div.withConfig({componentId:"sc-efc25d2f-1"})(["background:#fff;border:2px solid #000;margin-bottom:24px;border-radius:0;@media (min-width:769px){margin-bottom:32px;}"]),M=s.ZP.div.withConfig({componentId:"sc-efc25d2f-2"})(["padding:20px 24px;background:#000;color:#fff;font-weight:700;font-size:16px;text-transform:uppercase;letter-spacing:1px;@media (min-width:769px){padding:24px 32px;font-size:18px;}"]),A=s.ZP.div.withConfig({componentId:"sc-efc25d2f-3"})(["padding:24px;@media (min-width:769px){padding:32px;}"]),U=s.ZP.div.withConfig({componentId:"sc-efc25d2f-4"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #e9ecef;&:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none;}@media (min-width:769px){margin-bottom:24px;padding-bottom:24px;}@media (max-width:768px){flex-direction:column;align-items:flex-start;gap:12px;}"]),B=s.ZP.div.withConfig({componentId:"sc-efc25d2f-5"})(["flex:1;"]),E=s.ZP.div.withConfig({componentId:"sc-efc25d2f-6"})(["font-weight:600;font-size:14px;color:#000;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;@media (min-width:769px){font-size:16px;}"]),N=s.ZP.div.withConfig({componentId:"sc-efc25d2f-7"})(["font-size:13px;color:#666;line-height:1.4;@media (min-width:769px){font-size:14px;}"]),L=s.ZP.div.withConfig({componentId:"sc-efc25d2f-8"})(["margin-left:20px;@media (max-width:768px){margin-left:0;width:100%;}"]),F=s.ZP.select.withConfig({componentId:"sc-efc25d2f-9"})(["padding:8px 12px;border:2px solid #000;background:#fff;font-size:14px;border-radius:0;color:#000;min-width:120px;cursor:pointer;&:focus{outline:none;background:#f8f9fa;}@media (min-width:769px){padding:10px 14px;font-size:16px;min-width:140px;}@media (max-width:768px){width:100%;}"]),R=s.ZP.input.withConfig({componentId:"sc-efc25d2f-10"})(["padding:8px 12px;border:2px solid #000;background:#fff;font-size:14px;border-radius:0;color:#000;width:80px;text-align:center;&:focus{outline:none;background:#f8f9fa;}@media (min-width:769px){padding:10px 14px;font-size:16px;width:100px;}@media (max-width:768px){width:100%;}"]),_=s.ZP.label.withConfig({componentId:"sc-efc25d2f-11"})(['position:relative;display:inline-block;width:50px;height:24px;cursor:pointer;input{opacity:0;width:0;height:0;}span{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:0.2s;border-radius:0;border:2px solid #000;&:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#000;transition:0.2s;border-radius:0;}}input:checked + span{background-color:#000;}input:checked + span:before{background-color:#fff;transform:translateX(20px);}@media (min-width:769px){width:60px;height:28px;span:before{height:20px;width:20px;}input:checked + span:before{transform:translateX(26px);}}']),T=s.ZP.button.withConfig({componentId:"sc-efc25d2f-12"})(["padding:12px 24px;background:#000;color:#fff;border:none;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:1px;cursor:pointer;border-radius:0;transition:all 0.2s ease;margin-right:12px;&:hover{opacity:0.9;}&:disabled{background:#ccc;cursor:not-allowed;opacity:0.7;}&:last-child{margin-right:0;}@media (min-width:769px){padding:14px 28px;font-size:16px;margin-right:16px;}"]),O=s.ZP.div.withConfig({componentId:"sc-efc25d2f-13"})(["margin:16px 0;padding:12px 16px;background:#d4edda;border:2px solid #28a745;color:#155724;font-size:14px;border-radius:0;text-align:center;"]),V=s.ZP.div.withConfig({componentId:"sc-efc25d2f-14"})(["margin:16px 0;padding:12px 16px;background:#f8d7da;border:2px solid #dc3545;color:#721c24;font-size:14px;border-radius:0;text-align:center;"]),q=s.ZP.div.withConfig({componentId:"sc-efc25d2f-15"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin-top:16px;"]),G=s.ZP.div.withConfig({componentId:"sc-efc25d2f-16"})(["padding:16px;border:2px solid ",";background:",";color:",";text-align:center;cursor:pointer;font-size:12px;font-weight:600;text-transform:uppercase;transition:all 0.2s ease;&:hover{opacity:0.8;}@media (min-width:769px){padding:20px;font-size:14px;}"],e=>e.selected?"#000":"#ccc",e=>{switch(e.theme){case"dark":case"high-contrast":return"#000";default:return"#fff"}},e=>{switch(e.theme){case"dark":case"high-contrast":return"#fff";default:return"#000"}}),W=s.ZP.div.withConfig({componentId:"sc-efc25d2f-17"})(["display:flex;gap:12px;align-items:center;flex-wrap:wrap;@media (max-width:768px){flex-direction:column;align-items:stretch;}"]),H=s.ZP.input.withConfig({componentId:"sc-efc25d2f-18"})(["display:none;"]);function J(e){let{userProfile:t,setUserProfile:i,userManager:r,currentUser:s}=e,[a,l]=(0,o.useState)({defaultPomodoroLength:25,breakLength:5,longBreakLength:15,weeklyGoal:140,theme:"minimal",soundEnabled:!0,notificationsEnabled:!0,autoStartBreak:!1,autoStartPomodoro:!1,pomodorosUntilLongBreak:4,soundVolume:50,notificationSound:"bell",focusMode:"normal",showProgressBar:!0,showSessionStats:!0}),[p,h]=(0,o.useState)(!1),[x,m]=(0,o.useState)({type:"",text:""});(0,o.useEffect)(()=>{(null==t?void 0:t.preferences)&&l(e=>(0,d._)({},e,t.preferences))},[t]);let u=(e,t)=>{l(i=>(0,c._)((0,d._)({},i),{[e]:t})),m({type:"",text:""})},g=async()=>{if(r&&s){h(!0),m({type:"",text:""});try{let e=await r.updateUserProfile(s.id,{preferences:a});i(e),m({type:"success",text:"Preferences saved successfully!"})}catch(e){m({type:"error",text:e.message||"Failed to save preferences"})}finally{h(!1)}}};return(0,n.jsxs)(Z,{children:[(0,n.jsxs)(z,{children:[(0,n.jsx)(M,{children:"Pomodoro Settings"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Focus Session Length"}),(0,n.jsx)(N,{children:"Duration of each pomodoro session in minutes"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"10",max:"60",value:a.defaultPomodoroLength,onChange:e=>u("defaultPomodoroLength",parseInt(e.target.value)||25)})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Short Break Length"}),(0,n.jsx)(N,{children:"Duration of short breaks between sessions"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"1",max:"30",value:a.breakLength,onChange:e=>u("breakLength",parseInt(e.target.value)||5)})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Long Break Length"}),(0,n.jsx)(N,{children:"Duration of long breaks after multiple sessions"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"10",max:"60",value:a.longBreakLength,onChange:e=>u("longBreakLength",parseInt(e.target.value)||15)})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Pomodoros Until Long Break"}),(0,n.jsx)(N,{children:"Number of pomodoros before taking a long break"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"2",max:"8",value:a.pomodorosUntilLongBreak,onChange:e=>u("pomodorosUntilLongBreak",parseInt(e.target.value)||4)})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Weekly Goal"}),(0,n.jsx)(N,{children:"Target minutes of focused work per week"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"60",max:"1000",step:"10",value:a.weeklyGoal,onChange:e=>u("weeklyGoal",parseInt(e.target.value)||140)})})]})]})]}),(0,n.jsxs)(z,{children:[(0,n.jsx)(M,{children:"Automation & Behavior"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Auto-start Breaks"}),(0,n.jsx)(N,{children:"Automatically start break timer when pomodoro completes"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.autoStartBreak,onChange:e=>u("autoStartBreak",e.target.checked)}),(0,n.jsx)("span",{})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Auto-start Pomodoros"}),(0,n.jsx)(N,{children:"Automatically start next pomodoro when break completes"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.autoStartPomodoro,onChange:e=>u("autoStartPomodoro",e.target.checked)}),(0,n.jsx)("span",{})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Focus Mode"}),(0,n.jsx)(N,{children:"Block distracting websites during focus sessions"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(F,{value:a.focusMode,onChange:e=>u("focusMode",e.target.value),children:[(0,n.jsx)("option",{value:"normal",children:"Normal"}),(0,n.jsx)("option",{value:"strict",children:"Strict"}),(0,n.jsx)("option",{value:"minimal",children:"Minimal UI"})]})})]})]})]}),(0,n.jsxs)(z,{children:[(0,n.jsx)(M,{children:"Audio & Notifications"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Sound Notifications"}),(0,n.jsx)(N,{children:"Play sound when sessions start and end"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.soundEnabled,onChange:e=>u("soundEnabled",e.target.checked)}),(0,n.jsx)("span",{})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Browser Notifications"}),(0,n.jsx)(N,{children:"Show desktop notifications for session changes"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.notificationsEnabled,onChange:e=>u("notificationsEnabled",e.target.checked)}),(0,n.jsx)("span",{})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Sound Volume"}),(0,n.jsx)(N,{children:"Adjust notification sound volume (0-100)"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(R,{type:"number",min:"0",max:"100",value:a.soundVolume,onChange:e=>u("soundVolume",parseInt(e.target.value)||50)})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Notification Sound"}),(0,n.jsx)(N,{children:"Choose notification sound effect"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(F,{value:a.notificationSound,onChange:e=>u("notificationSound",e.target.value),children:[(0,n.jsx)("option",{value:"bell",children:"Bell"}),(0,n.jsx)("option",{value:"chime",children:"Chime"}),(0,n.jsx)("option",{value:"ding",children:"Ding"}),(0,n.jsx)("option",{value:"beep",children:"Beep"})]})})]})]})]}),(0,n.jsxs)(z,{children:[(0,n.jsx)(M,{children:"Theme & Display"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Theme"}),(0,n.jsx)(N,{children:"Choose your preferred visual theme"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(q,{children:[(0,n.jsx)(G,{theme:"minimal",selected:"minimal"===a.theme,onClick:()=>u("theme","minimal"),children:"Minimal"}),(0,n.jsx)(G,{theme:"dark",selected:"dark"===a.theme,onClick:()=>u("theme","dark"),children:"Dark"}),(0,n.jsx)(G,{theme:"high-contrast",selected:"high-contrast"===a.theme,onClick:()=>u("theme","high-contrast"),children:"High Contrast"})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Show Progress Bar"}),(0,n.jsx)(N,{children:"Display progress bar during sessions"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.showProgressBar,onChange:e=>u("showProgressBar",e.target.checked)}),(0,n.jsx)("span",{})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Show Session Statistics"}),(0,n.jsx)(N,{children:"Display real-time statistics on main page"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(_,{children:[(0,n.jsx)("input",{type:"checkbox",checked:a.showSessionStats,onChange:e=>u("showSessionStats",e.target.checked)}),(0,n.jsx)("span",{})]})})]})]})]}),(0,n.jsxs)(z,{children:[(0,n.jsx)(M,{children:"Import & Export"}),(0,n.jsxs)(A,{children:[(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Backup & Restore"}),(0,n.jsx)(N,{children:"Export or import your preference settings"})]}),(0,n.jsx)(L,{children:(0,n.jsxs)(W,{children:[(0,n.jsx)(T,{type:"button",onClick:()=>{let e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="pomodoro-preferences-".concat(s.id,".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)},children:"Export Settings"}),(0,n.jsx)(T,{type:"button",onClick:()=>document.getElementById("import-preferences").click(),children:"Import Settings"}),(0,n.jsx)(H,{id:"import-preferences",type:"file",accept:".json",onChange:e=>{let t=e.target.files[0];if(!t)return;let i=new FileReader;i.onload=e=>{try{let t=JSON.parse(e.target.result);l(e=>(0,d._)({},e,t)),m({type:"success",text:"Preferences imported successfully!"})}catch(e){m({type:"error",text:"Invalid preferences file format"})}},i.readAsText(t),e.target.value=""}})]})})]}),(0,n.jsxs)(U,{children:[(0,n.jsxs)(B,{children:[(0,n.jsx)(E,{children:"Reset to Defaults"}),(0,n.jsx)(N,{children:"Restore all settings to their default values"})]}),(0,n.jsx)(L,{children:(0,n.jsx)(T,{type:"button",onClick:()=>{l({defaultPomodoroLength:25,breakLength:5,longBreakLength:15,weeklyGoal:140,theme:"minimal",soundEnabled:!0,notificationsEnabled:!0,autoStartBreak:!1,autoStartPomodoro:!1,pomodorosUntilLongBreak:4,soundVolume:50,notificationSound:"bell",focusMode:"normal",showProgressBar:!0,showSessionStats:!0})},children:"Reset Defaults"})})]})]})]}),x.text&&("success"===x.type?(0,n.jsx)(O,{children:x.text}):(0,n.jsx)(V,{children:x.text})),(0,n.jsx)("div",{style:{textAlign:"center",marginTop:"32px"},children:(0,n.jsx)(T,{onClick:g,disabled:p,children:p?"Saving...":"Save All Preferences"})})]})}let X=s.ZP.div.withConfig({componentId:"sc-c337f771-0"})(["margin-top:32px;"]),Y=s.ZP.h3.withConfig({componentId:"sc-c337f771-1"})(["margin:0 0 24px 0;font-size:18px;font-weight:700;color:#000;text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid #000;padding-bottom:8px;@media (min-width:769px){font-size:20px;}"]),$=s.ZP.div.withConfig({componentId:"sc-c337f771-2"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:32px;@media (min-width:769px){gap:24px;}"]),K=s.ZP.div.withConfig({componentId:"sc-c337f771-3"})(["background:#fff;border:2px solid ",";padding:20px;border-radius:0;position:relative;opacity:",";transition:all 0.2s ease;&:hover{opacity:",";}@media (min-width:769px){padding:24px;}"],e=>e.unlocked?"#28a745":"#ccc",e=>e.unlocked?"1":"0.6",e=>e.unlocked?"0.95":"0.7"),Q=s.ZP.div.withConfig({componentId:"sc-c337f771-4"})(["width:60px;height:60px;background:",";border:2px solid #000;border-radius:0;display:flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:16px;color:#fff;@media (min-width:769px){width:70px;height:70px;font-size:32px;}"],e=>e.unlocked?"#28a745":"#ccc"),ee=s.ZP.h4.withConfig({componentId:"sc-c337f771-5"})(["margin:0 0 8px 0;font-size:16px;font-weight:700;color:",";text-transform:uppercase;letter-spacing:0.5px;@media (min-width:769px){font-size:18px;}"],e=>e.unlocked?"#000":"#666"),et=s.ZP.p.withConfig({componentId:"sc-c337f771-6"})(["margin:0 0 12px 0;font-size:13px;color:#666;line-height:1.4;@media (min-width:769px){font-size:14px;}"]),ei=s.ZP.div.withConfig({componentId:"sc-c337f771-7"})(["width:100%;height:8px;background:#e9ecef;border:1px solid #000;border-radius:0;overflow:hidden;margin-bottom:8px;"]),en=s.ZP.div.withConfig({componentId:"sc-c337f771-8"})(["height:100%;background:",";width:","%;transition:width 0.3s ease;"],e=>e.complete?"#28a745":"#000",e=>Math.min(e.progress,100)),eo=s.ZP.div.withConfig({componentId:"sc-c337f771-9"})(["font-size:12px;color:#666;font-weight:500;text-align:center;@media (min-width:769px){font-size:13px;}"]),er=s.ZP.div.withConfig({componentId:"sc-c337f771-10"})(["position:absolute;top:8px;right:8px;background:#28a745;color:#fff;padding:4px 8px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;border-radius:0;@media (min-width:769px){padding:6px 10px;font-size:11px;}"]),es=s.ZP.div.withConfig({componentId:"sc-c337f771-11"})(["background:#fff;border:2px solid #000;padding:24px;margin-bottom:32px;border-radius:0;@media (min-width:769px){padding:32px;}"]),ea=s.ZP.div.withConfig({componentId:"sc-c337f771-12"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;@media (min-width:769px){gap:24px;}"]),ed=s.ZP.div.withConfig({componentId:"sc-c337f771-13"})(["text-align:center;"]),ec=s.ZP.div.withConfig({componentId:"sc-c337f771-14"})(["font-size:32px;font-weight:700;color:#000;margin-bottom:8px;@media (min-width:769px){font-size:40px;}"]),el=s.ZP.div.withConfig({componentId:"sc-c337f771-15"})(["font-size:12px;color:#666;font-weight:600;text-transform:uppercase;letter-spacing:1px;@media (min-width:769px){font-size:14px;}"]),ep=s.ZP.div.withConfig({componentId:"sc-c337f771-16"})(["display:flex;align-items:center;justify-content:center;margin-top:4px;font-size:12px;color:",";"],e=>"up"===e.trend?"#28a745":"down"===e.trend?"#dc3545":"#666"),eh=[{id:"first_session",title:"Getting Started",description:"Complete your first pomodoro session",icon:"\uD83C\uDFAF",requirement:e=>e.completedSessions>=1,progress:e=>Math.min(e.completedSessions,1),maxProgress:1},{id:"five_sessions",title:"Focus Apprentice",description:"Complete 5 pomodoro sessions",icon:"\uD83D\uDCDA",requirement:e=>e.completedSessions>=5,progress:e=>Math.min(e.completedSessions,5),maxProgress:5},{id:"marathon",title:"Marathon Runner",description:"Complete 25 pomodoro sessions",icon:"\uD83C\uDFC3‍♂️",requirement:e=>e.completedSessions>=25,progress:e=>Math.min(e.completedSessions,25),maxProgress:25},{id:"centurion",title:"Centurion",description:"Complete 100 pomodoro sessions",icon:"\uD83C\uDFC6",requirement:e=>e.completedSessions>=100,progress:e=>Math.min(e.completedSessions,100),maxProgress:100},{id:"streak_7",title:"Week Warrior",description:"Maintain a 7-day streak",icon:"\uD83D\uDD25",requirement:e=>e.streakDays>=7,progress:e=>Math.min(e.streakDays,7),maxProgress:7},{id:"streak_30",title:"Month Master",description:"Maintain a 30-day streak",icon:"\uD83D\uDCAA",requirement:e=>e.streakDays>=30,progress:e=>Math.min(e.streakDays,30),maxProgress:30},{id:"perfectionist",title:"Perfectionist",description:"Achieve 90% completion rate with at least 20 sessions",icon:"⭐",requirement:e=>e.completionRate>=90&&e.totalSessions>=20,progress:e=>e.totalSessions>=20?Math.min(e.completionRate,90):0,maxProgress:90},{id:"time_master",title:"Time Master",description:"Accumulate 1000 minutes of focused work",icon:"⏰",requirement:e=>e.completedMinutes>=1e3,progress:e=>Math.min(e.completedMinutes,1e3),maxProgress:1e3},{id:"early_bird",title:"Early Bird",description:"Complete 10 sessions before 9 AM",icon:"\uD83C\uDF05",requirement:(e,t)=>t.filter(e=>"completed"===e.status&&9>new Date(e.startTime).getHours()).length>=10,progress:(e,t)=>Math.min(t.filter(e=>"completed"===e.status&&9>new Date(e.startTime).getHours()).length,10),maxProgress:10},{id:"night_owl",title:"Night Owl",description:"Complete 10 sessions after 8 PM",icon:"\uD83E\uDD89",requirement:(e,t)=>t.filter(e=>"completed"===e.status&&new Date(e.startTime).getHours()>=20).length>=10,progress:(e,t)=>Math.min(t.filter(e=>"completed"===e.status&&new Date(e.startTime).getHours()>=20).length,10),maxProgress:10},{id:"weekend_warrior",title:"Weekend Warrior",description:"Complete 20 sessions on weekends",icon:"\uD83C\uDFAE",requirement:(e,t)=>t.filter(e=>{if("completed"!==e.status)return!1;let t=new Date(e.startTime).getDay();return 0===t||6===t}).length>=20,progress:(e,t)=>Math.min(t.filter(e=>{if("completed"!==e.status)return!1;let t=new Date(e.startTime).getDay();return 0===t||6===t}).length,20),maxProgress:20},{id:"goal_achiever",title:"Goal Achiever",description:"Meet your weekly goal for 4 consecutive weeks",icon:"\uD83C\uDFAF",requirement:e=>Math.ceil(e.completedMinutes/(e.weeklyGoal||140))>=4,progress:e=>Math.min(Math.ceil(e.completedMinutes/(e.weeklyGoal||140)),4),maxProgress:4}];function ex(e){let{userStats:t,userSessions:i}=e,r=(0,o.useMemo)(()=>t&&i?eh.map(e=>{let n=e.requirement(t,i),o=e.progress(t,i),r=o/e.maxProgress*100;return(0,c._)((0,d._)({},e),{unlocked:n,progress:o,progressPercentage:r})}):[],[t,i]),s=r.filter(e=>e.unlocked),a=r.length,l=(0,o.useMemo)(()=>{if(!t||!i)return null;new Date().toISOString().split("T")[0];let e=new Date;e.setDate(e.getDate()-7);let n=new Date;n.setDate(n.getDate()-30);let o=i.filter(t=>new Date(t.createdAt)>=e&&"completed"===t.status),r=i.filter(e=>new Date(e.createdAt)>=n&&"completed"===e.status),a=t.completedSessions>0?Math.round(t.completedMinutes/t.completedSessions):0,d=t.weeklyGoal>0?Math.round(o.reduce((e,t)=>e+t.duration,0)/t.weeklyGoal*100):0;return{totalBadges:s.length,completionRate:t.completionRate||0,currentStreak:t.streakDays||0,avgSessionLength:a,weeklyProgress:d,monthlyMinutes:r.reduce((e,t)=>e+t.duration,0),bestStreak:t.longestStreak||0}},[t,i,s.length]);return t&&i&&l?(0,n.jsxs)(X,{children:[(0,n.jsx)(Y,{children:"Personal Analytics"}),(0,n.jsx)(es,{children:(0,n.jsxs)(ea,{children:[(0,n.jsxs)(ed,{children:[(0,n.jsx)(ec,{children:l.totalBadges}),(0,n.jsx)(el,{children:"Badges Earned"}),(0,n.jsxs)(ep,{children:[l.totalBadges,"/",a]})]}),(0,n.jsxs)(ed,{children:[(0,n.jsxs)(ec,{children:[l.completionRate,"%"]}),(0,n.jsx)(el,{children:"Completion Rate"}),(0,n.jsx)(ep,{trend:l.completionRate>=80?"up":l.completionRate>=60?"neutral":"down",children:l.completionRate>=80?"\uD83D\uDCC8 Excellent":l.completionRate>=60?"\uD83D\uDCCA Good":"\uD83D\uDCC9 Improve"})]}),(0,n.jsxs)(ed,{children:[(0,n.jsx)(ec,{children:l.currentStreak}),(0,n.jsx)(el,{children:"Current Streak"}),(0,n.jsxs)(ep,{children:["Best: ",l.bestStreak," days"]})]}),(0,n.jsxs)(ed,{children:[(0,n.jsx)(ec,{children:l.avgSessionLength}),(0,n.jsx)(el,{children:"Avg Session (min)"}),(0,n.jsx)(ep,{trend:l.avgSessionLength>=20?"up":"neutral",children:l.avgSessionLength>=20?"\uD83C\uDFAF Focused":"⏰ Building"})]}),(0,n.jsxs)(ed,{children:[(0,n.jsxs)(ec,{children:[l.weeklyProgress,"%"]}),(0,n.jsx)(el,{children:"Weekly Goal"}),(0,n.jsx)(ep,{trend:l.weeklyProgress>=100?"up":l.weeklyProgress>=75?"neutral":"down",children:l.weeklyProgress>=100?"✅ Achieved":l.weeklyProgress>=75?"\uD83C\uDFAF Close":"\uD83D\uDCAA Push"})]}),(0,n.jsxs)(ed,{children:[(0,n.jsx)(ec,{children:l.monthlyMinutes}),(0,n.jsx)(el,{children:"Monthly Minutes"}),(0,n.jsx)(ep,{trend:l.monthlyMinutes>=500?"up":"neutral",children:l.monthlyMinutes>=500?"\uD83D\uDD25 Active":"\uD83D\uDCC8 Growing"})]})]})}),(0,n.jsx)(Y,{children:"Achievement Badges"}),(0,n.jsx)($,{children:r.map(e=>(0,n.jsxs)(K,{unlocked:e.unlocked,children:[e.unlocked&&(0,n.jsx)(er,{children:"Unlocked"}),(0,n.jsx)(Q,{unlocked:e.unlocked,children:e.icon}),(0,n.jsx)(ee,{unlocked:e.unlocked,children:e.title}),(0,n.jsx)(et,{children:e.description}),(0,n.jsx)(ei,{children:(0,n.jsx)(en,{progress:e.progressPercentage,complete:e.unlocked})}),(0,n.jsxs)(eo,{children:[e.progress," / ",e.maxProgress,e.unlocked&&" ✓"]})]},e.id))})]}):(0,n.jsxs)(X,{children:[(0,n.jsx)(Y,{children:"Achievements & Analytics"}),(0,n.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Loading achievements..."})]})}let em=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-0"})(["height:100%;display:flex;flex-direction:column;background:var(--background-secondary);"]),eu=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-1"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--background-primary);border-bottom:1px solid var(--gray-5);"]),eg=s.ZP.button.withConfig({componentId:"sc-a68c3fd9-2"})(["background:none;border:none;color:var(--primary-blue);font-size:16px;font-weight:500;cursor:pointer;padding:8px 0;&:hover{opacity:0.7;}"]),ef=s.ZP.h1.withConfig({componentId:"sc-a68c3fd9-3"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0;"]),ew=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-4"})(["width:60px;"]);s.ZP.div.withConfig({componentId:"sc-a68c3fd9-5"})(["background:var(--background-primary);border-bottom:1px solid var(--gray-5);padding:16px 20px;"]),s.ZP.div.withConfig({componentId:"sc-a68c3fd9-6"})(["display:flex;align-items:center;gap:12px;"]),s.ZP.div.withConfig({componentId:"sc-a68c3fd9-7"})(["min-width:80px;"]),s.ZP.select.withConfig({componentId:"sc-a68c3fd9-8"})(["background:var(--background-secondary);border:1px solid var(--gray-5);border-radius:var(--border-radius-small);padding:8px 12px;font-size:14px;color:var(--text-primary);cursor:pointer;&:focus{outline:none;border-color:var(--primary-blue);}"]),s.ZP.div.withConfig({componentId:"sc-a68c3fd9-9"})(["flex:1;"]),s.ZP.button.withConfig({componentId:"sc-a68c3fd9-10"})(["width:100%;background:var(--background-secondary);border:1px solid var(--gray-5);border-radius:var(--border-radius-small);padding:8px 12px;font-size:14px;color:var(--text-primary);cursor:pointer;display:flex;justify-content:space-between;align-items:center;text-align:left;&:hover{background:var(--gray-6);}"]),s.ZP.button.withConfig({componentId:"sc-a68c3fd9-11"})(["background:var(--primary-blue);border:none;border-radius:var(--border-radius-small);padding:8px 12px;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;&:hover{background:#0056CC;}"]);let ej=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-12"})(["flex:1;padding:20px;overflow-y:auto;@media (min-width:769px){padding:30px;}"]),eb=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-13"})(["display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px;@media (min-width:769px){gap:20px;margin-bottom:32px;}"]),ev=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-14"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);border:1px solid var(--gray-6);text-align:center;&.primary{background:linear-gradient(135deg,var(--primary-blue) 0%,var(--primary-purple) 100%);color:white;border:none;*{color:white !important;}}&.achievement{border:2px solid var(--primary-green);background:rgba(52,199,89,0.05);}@media (min-width:769px){padding:24px;}"]),ey=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-15"})(["font-size:12px;font-weight:500;color:var(--text-secondary);margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px;"]),ek=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-16"})(["font-size:24px;font-weight:700;color:var(--text-primary);margin-bottom:4px;"]),eP=s.ZP.span.withConfig({componentId:"sc-a68c3fd9-17"})(["font-size:14px;font-weight:500;margin-left:4px;"]),eC=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-18"})(["margin-bottom:8px;"]),eS=s.ZP.span.withConfig({componentId:"sc-a68c3fd9-19"})(["font-size:12px;font-weight:600;color:var(--primary-green);background:rgba(52,199,89,0.1);padding:4px 8px;border-radius:var(--border-radius-small);"]),eI=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-20"})(["font-size:12px;color:var(--text-secondary);font-weight:500;"]),eD=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-21"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:24px;box-shadow:var(--shadow-small);border:1px solid var(--gray-6);margin-bottom:24px;@media (min-width:769px){margin-bottom:32px;}"]),eZ=s.ZP.h3.withConfig({componentId:"sc-a68c3fd9-22"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0 0 20px 0;text-align:center;"]),ez=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-23"})(["width:100%;height:200px;display:flex;align-items:center;justify-content:center;background:var(--gray-6);border-radius:var(--border-radius-medium);color:var(--text-secondary);font-size:14px;@media (min-width:769px){height:250px;}"]),eM=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-24"})(["display:flex;justify-content:center;align-items:center;position:relative;width:150px;height:150px;"]),eA=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-25"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;"]),eU=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-26"})(["font-size:32px;font-weight:700;color:var(--text-primary);line-height:1;"]),eB=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-27"})(["font-size:14px;color:var(--text-secondary);font-weight:500;margin-top:4px;"]),eE=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-28"})(["display:flex;background:var(--background-primary);border-bottom:2px solid #000;border-radius:0;"]),eN=s.ZP.button.withConfig({componentId:"sc-a68c3fd9-29"})(["flex:1;padding:16px;background:",";color:",";border:none;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:all 0.2s ease;&:hover{opacity:",";}@media (min-width:769px){padding:20px;font-size:16px;}"],e=>e.active?"#000":"transparent",e=>e.active?"#fff":"#000",e=>e.active?"1":"0.7"),eL=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-30"})(["flex:1;overflow-y:auto;padding:20px;background:#fff;@media (min-width:769px){padding:30px;}"]),eF=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-31"})(["display:flex;align-items:center;gap:20px;margin-bottom:32px;padding:24px;background:#fff;border:2px solid #000;border-radius:0;@media (min-width:769px){padding:32px;}"]),eR=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-32"})(["position:relative;"]),e_=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-33"})(["width:80px;height:80px;background:",";border:2px solid #000;border-radius:0;display:flex;align-items:center;justify-content:center;color:#fff;font-size:32px;font-weight:700;@media (min-width:769px){width:100px;height:100px;font-size:40px;}"],e=>e.src?"url(".concat(e.src,") center/cover"):"#000"),eT=s.ZP.input.withConfig({componentId:"sc-a68c3fd9-34"})(["position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer;"]),eO=s.ZP.div.withConfig({componentId:"sc-a68c3fd9-35"})(["flex:1;"]),eV=s.ZP.h2.withConfig({componentId:"sc-a68c3fd9-36"})(["margin:0 0 8px 0;font-size:24px;font-weight:700;color:#000;text-transform:uppercase;letter-spacing:1px;@media (min-width:769px){font-size:32px;}"]),eq=s.ZP.p.withConfig({componentId:"sc-a68c3fd9-37"})(["margin:0 0 12px 0;font-size:14px;color:#666;font-weight:500;@media (min-width:769px){font-size:16px;}"]),eG=s.ZP.p.withConfig({componentId:"sc-a68c3fd9-38"})(["margin:0;font-size:14px;color:#333;line-height:1.4;@media (min-width:769px){font-size:16px;}"]),eW=s.ZP.h3.withConfig({componentId:"sc-a68c3fd9-39"})(["margin:0 0 24px 0;font-size:18px;font-weight:700;color:#000;text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid #000;padding-bottom:8px;@media (min-width:769px){font-size:20px;}"]);function eH(){let e=(0,r.useRouter)(),{currentUser:t,getUserStats:i,getUserSessions:s,userManager:d}=(0,a.a)(),[c,l]=(0,o.useState)("month"),[p,h]=(0,o.useState)(null),[x,m]=(0,o.useState)([]),[u,g]=(0,o.useState)("overview"),[f,w]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(t&&d){let e=i(),n=s(),o=d.getUser(t.id);h(e),m(n),w(o)}},[t,i,s,d]);let j=(0,o.useMemo)(()=>{if(!p)return null;let e=p.totalSessions||0,t=p.completedSessions||0,i=p.totalMinutes||0,n=p.streakDays||0;p.longestStreak;let o=Math.floor(t/2);return{focusSessions:t,totalSessions:e,stickerCount:o,stickerPercentage:Math.min(100,o/100*100),seriesCount:n,seriesPercentage:Math.min(100,n/30*100),completionRate:e>0?Math.round(t/e*100):0,totalMinutes:i}},[p]),b=()=>{e.push("/main")},v=e=>{let i=e.target.files[0];if(i){let e=new FileReader;e.onload=e=>{let i=e.target.result;d&&t&&d.updateUserProfile(t.id,{avatar:i}).then(e=>{w(e)}).catch(console.error)},e.readAsDataURL(i)}};return t&&f&&j?(0,n.jsxs)(em,{children:[(0,n.jsxs)(eu,{children:[(0,n.jsx)(eg,{onClick:b,children:"Back"}),(0,n.jsx)(ef,{children:"My Profile"}),(0,n.jsx)(ew,{})]}),(0,n.jsxs)(eE,{children:[(0,n.jsx)(eN,{active:"overview"===u,onClick:()=>g("overview"),children:"Overview"}),(0,n.jsx)(eN,{active:"settings"===u,onClick:()=>g("settings"),children:"Settings"}),(0,n.jsx)(eN,{active:"preferences"===u,onClick:()=>g("preferences"),children:"Preferences"})]}),(0,n.jsx)(eL,{children:(()=>{switch(u){case"overview":return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsxs)(eR,{children:[(0,n.jsx)(e_,{src:null==f?void 0:f.avatar,children:!(null==f?void 0:f.avatar)&&((null==f?void 0:f.displayName)||(null==t?void 0:t.id)||"U")[0].toUpperCase()}),(0,n.jsx)(eT,{type:"file",accept:"image/*",onChange:v})]}),(0,n.jsxs)(eO,{children:[(0,n.jsx)(eV,{children:(null==f?void 0:f.displayName)||(null==t?void 0:t.id)||"User"}),(0,n.jsx)(eq,{children:(null==f?void 0:f.email)||"No email provided"}),(0,n.jsx)(eG,{children:(null==f?void 0:f.bio)||"No bio available"})]})]}),j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eW,{children:"Statistics Overview"}),(0,n.jsxs)(eb,{children:[(0,n.jsxs)(ev,{className:"primary",children:[(0,n.jsx)(ey,{children:"Focus Sessions"}),(0,n.jsxs)(ek,{children:[j.focusSessions,(0,n.jsx)(eP,{children:"sessions"})]})]}),(0,n.jsxs)(ev,{className:"primary",children:[(0,n.jsx)(ey,{children:"Total Pomodoros"}),(0,n.jsxs)(ek,{children:[j.totalSessions,(0,n.jsx)(eP,{children:"sessions"})]})]}),(0,n.jsxs)(ev,{className:"achievement",children:[(0,n.jsx)(eC,{children:(0,n.jsx)(eS,{children:"Achievements"})}),(0,n.jsxs)(ek,{children:[j.stickerCount,(0,n.jsx)(eP,{children:"badges"})]}),(0,n.jsxs)(eI,{children:["(",Math.round(j.stickerPercentage),"%)"]})]}),(0,n.jsxs)(ev,{className:"achievement",children:[(0,n.jsx)(eC,{children:(0,n.jsx)(eS,{children:"Streak"})}),(0,n.jsxs)(ek,{children:[j.seriesCount,(0,n.jsx)(eP,{children:"days"})]}),(0,n.jsxs)(eI,{children:["(",Math.round(j.seriesPercentage),"%)"]})]})]}),(0,n.jsxs)(eD,{children:[(0,n.jsx)(eZ,{children:"Completion Rate"}),(0,n.jsx)(ez,{children:(0,n.jsxs)(eM,{children:[(0,n.jsxs)("svg",{width:"150",height:"150",viewBox:"0 0 150 150",children:[(0,n.jsx)("circle",{cx:"75",cy:"75",r:"60",fill:"none",stroke:"#e9ecef",strokeWidth:"12"}),(0,n.jsx)("circle",{cx:"75",cy:"75",r:"60",fill:"none",stroke:"#000",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:"".concat(j.completionRate/100*377," 377"),transform:"rotate(-90 75 75)",style:{transition:"stroke-dasharray 0.5s ease"}})]}),(0,n.jsxs)(eA,{children:[(0,n.jsxs)(eU,{children:[j.completionRate,"%"]}),(0,n.jsx)(eB,{children:"Completion"})]})]})})]})]}),(0,n.jsx)(ex,{userStats:p,userSessions:x})]});case"settings":return(0,n.jsx)(D,{userProfile:f,setUserProfile:w,userManager:d,currentUser:t});case"preferences":return(0,n.jsx)(J,{userProfile:f,setUserProfile:w,userManager:d,currentUser:t});default:return(0,n.jsx)("div",{children:"Tab not found"})}})()})]}):(0,n.jsxs)(em,{children:[(0,n.jsxs)(eu,{children:[(0,n.jsx)(eg,{onClick:b,children:"Back"}),(0,n.jsx)(ef,{children:"My Profile"}),(0,n.jsx)(ew,{})]}),(0,n.jsx)(ej,{children:(0,n.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:"Loading profile data..."})})]})}},419:function(e,t,i){"use strict";i.d(t,{UserProvider:function(){return l},a:function(){return c}});var n=i(5583),o=i(1780),r=i(7437),s=i(2265),a=i(81);let d=(0,s.createContext)(),c=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useUser must be used within a UserProvider");return e},l=e=>{let{children:t}=e,[i,c]=(0,s.useState)(null),[l]=(0,s.useState)(()=>new a.w),[p,h]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[u,g]=(0,s.useState)(!1),[f,w]=(0,s.useState)(!0),[j,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=l.getCurrentSession();if(e){let t=l.getUser(e.userId);t?(c(t),m(e.token),g(!0),P(e.userId)):l.logoutSession()}}catch(e){console.error("Error initializing auth:",e),l.logoutSession()}finally{w(!1)}})();let e=setInterval(()=>{if(x){let e=l.validateSession(x);if(e){let t=new Date(e.expiresAt),i=new Date,n=t.getTime()-i.getTime();n>0&&n<=3e5&&!e.rememberMe?b("세션이 ".concat(Math.ceil(n/6e4),"분 후 만료됩니다.")):b(null)}else b("세션이 만료되어 자동으로 로그아웃됩니다."),setTimeout(()=>k(),3e3)}},3e4);return()=>clearInterval(e)},[l,x]);let v=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(w(!0),b(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!t)throw Error("비밀번호를 입력해주세요.");let n=await l.loginUser(e.trim(),t,i);return c(n.user),m(n.sessionToken),g(!0),P(n.user.id),n.user}catch(e){if(console.error("Login failed:",e),e.message.includes("존재하지 않는"))throw Error("존재하지 않는 사용자입니다. 사용자명을 확인해주세요.");if(e.message.includes("비밀번호가 올바르지"))throw e;if(e.message.includes("일시적으로 잠겼습니다"))throw e;throw Error("로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요.")}finally{w(!1)}},y=async(e,t)=>{try{var i;if(w(!0),b(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!(null==t?void 0:null===(i=t.email)||void 0===i?void 0:i.trim()))throw Error("이메일을 입력해주세요.");if(!(null==t?void 0:t.password))throw Error("비밀번호를 입력해주세요.");return await l.registerUser(e.trim(),(0,o._)((0,n._)({},t),{email:t.email.trim()}))}catch(e){if(console.error("Registration failed:",e),e.message.includes("이미 존재하는"))throw Error("이미 사용 중인 사용자명입니다. 다른 사용자명을 선택해주세요.");if(e.message.includes("이미 사용 중인 이메일"))throw Error("이미 사용 중인 이메일 주소입니다. 다른 이메일을 사용해주세요.");if(e.message.includes("비밀번호"))throw e;if(e.message.includes("이메일"))throw e;else if(e.message.includes("사용자명"))throw e;else throw Error("회원가입에 실패했습니다. 입력 정보를 확인하고 다시 시도해주세요.")}finally{w(!1)}},k=()=>{try{l.logoutSession(x),c(null),h(null),m(null),g(!1),b(null)}catch(e){console.error("Logout error:",e),c(null),h(null),m(null),g(!1),b(null)}},P=e=>{let t=l.getActiveSession(e);t&&(new Date<new Date(t.endTime)?h(t):(l.clearActiveSession(e),h(null)))},C=async e=>{if(!i)throw Error("No user logged in");try{let t=await l.updateUserProfile(i.id,e);return c(t),t}catch(e){throw console.error("Profile update failed:",e),e}};return(0,r.jsx)(d.Provider,{value:{currentUser:i,activeSession:p,sessionToken:x,isSessionValid:u,authLoading:f,sessionWarning:j,loginUser:v,registerUser:y,logoutUser:k,createPomodoroSession:e=>{if(!i)throw Error("No user logged in");let t=l.createPomodoroSession(i.id,e);return h(t),t},completePomodoroSession:()=>{i&&p&&(l.completePomodoroSession(i.id,p.id),h(null))},stopPomodoroSession:()=>{i&&p&&(l.stopPomodoroSession(i.id,p.id),h(null))},getUserStats:()=>i?l.getUserStats(i.id):null,getUserSessions:()=>i?l.getUserSessions(i.id):[],updateUserProfile:C,getUserActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return i?l.getUserActivity(i.id,e):null},validateCurrentSession:()=>!!x&&(!!l.validateSession(x)||(k(),!1)),checkPasswordStrength:e=>{if(!e)return{isValid:!1,errors:["비밀번호를 입력해주세요"],warnings:[],score:0,strength:"weak"};let t=[];e.length<4&&t.push("비밀번호는 4자 이상이어야 합니다");let i=Math.min(10*e.length,100),n={medium:i>=50&&i<80,strong:i>=80};return{isValid:0===t.length,errors:t,warnings:[],score:i,strength:n.strong?"strong":n.medium?"medium":"weak"}},validateEmail:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"이메일을 입력해주세요."};let t=e.trim().toLowerCase();return t.includes("@")?{isValid:!0,normalizedEmail:t}:{isValid:!1,error:"이메일에 @가 포함되어야 합니다."}},validateUsername:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"사용자명을 입력해주세요."};let t=e.trim();return t.length<1?{isValid:!1,error:"사용자명을 입력해주세요."}:t.length>50?{isValid:!1,error:"사용자명은 50자 이하여야 합니다."}:{isValid:!0,normalizedUsername:t.toLowerCase()}},extendSession:()=>!!(x&&l.validateSession(x))&&(b(null),!0),dismissSessionWarning:()=>{b(null)},userManager:l},children:t})}}},function(e){e.O(0,[954,81,971,966,744],function(){return e(e.s=5799)}),_N_E=e.O()}]);