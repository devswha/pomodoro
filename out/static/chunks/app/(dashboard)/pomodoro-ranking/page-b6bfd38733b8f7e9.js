(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{6874:function(e,r,t){Promise.resolve().then(t.bind(t,4307))},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},4307:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Y}});var n=t(5583),o=t(1780),i=t(7437),s=t(2265),a=t(9376),l=t(3954),d=t(419),c=t(81);let u=l.ZP.div.withConfig({componentId:"sc-4c857b19-0"})(["height:100%;display:flex;flex-direction:column;background:var(--background-secondary);"]),m=l.ZP.div.withConfig({componentId:"sc-4c857b19-1"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:var(--background-primary);border-bottom:1px solid var(--gray-5);"]),p=l.ZP.button.withConfig({componentId:"sc-4c857b19-2"})(["background:none;border:none;color:var(--primary-blue);font-size:16px;font-weight:500;cursor:pointer;padding:8px 0;&:hover{opacity:0.7;}"]),g=l.ZP.h1.withConfig({componentId:"sc-4c857b19-3"})(["font-size:18px;font-weight:600;color:var(--text-primary);margin:0;"]),h=l.ZP.div.withConfig({componentId:"sc-4c857b19-4"})(["width:60px;"]),f=l.ZP.div.withConfig({componentId:"sc-4c857b19-5"})(["flex:1;padding:20px;overflow-y:auto;@media (min-width:769px){padding:30px;}"]),x=l.ZP.div.withConfig({componentId:"sc-4c857b19-6"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:16px 0;"]),b=l.ZP.button.withConfig({componentId:"sc-4c857b19-7"})(["background:none;border:none;color:var(--primary-blue);font-size:14px;font-weight:500;cursor:pointer;padding:8px 12px;border-radius:var(--border-radius-small);&:hover{background:rgba(0,122,255,0.1);}&:disabled{color:var(--text-secondary);cursor:not-allowed;}"]),w=l.ZP.div.withConfig({componentId:"sc-4c857b19-8"})(["flex:1;display:flex;justify-content:center;"]),v=l.ZP.button.withConfig({componentId:"sc-4c857b19-9"})(["background:var(--background-primary);border:1px solid var(--gray-5);border-radius:var(--border-radius-medium);padding:8px 16px;font-size:16px;font-weight:600;color:var(--text-primary);cursor:pointer;display:flex;align-items:center;gap:8px;transition:var(--transition-fast);&:hover{background:var(--gray-6);}"]),y=l.ZP.div.withConfig({componentId:"sc-4c857b19-10"})(["display:flex;flex-direction:column;gap:12px;"]),k=l.ZP.div.withConfig({componentId:"sc-4c857b19-11"})(["background:var(--background-primary);border-radius:var(--border-radius-large);padding:20px;box-shadow:var(--shadow-small);border:1px solid var(--gray-6);display:flex;justify-content:space-between;align-items:center;transition:var(--transition-fast);&:hover{transform:translateY(-1px);box-shadow:var(--shadow-medium);}",""],e=>1===e.rank?"\n        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);\n        color: white;\n        border: none;\n        \n        * {\n          color: white !important;\n        }\n      ":2===e.rank?"\n        background: linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%);\n        color: white;\n        border: none;\n        \n        * {\n          color: white !important;\n        }\n      ":3===e.rank?"\n        background: linear-gradient(135deg, #CD7F32 0%, #B87333 100%);\n        color: white;\n        border: none;\n        \n        * {\n          color: white !important;\n        }\n      ":""),C=l.ZP.div.withConfig({componentId:"sc-4c857b19-12"})(["display:flex;flex-direction:column;gap:8px;"]),P=l.ZP.div.withConfig({componentId:"sc-4c857b19-13"})(["display:flex;align-items:center;gap:12px;"]),S=l.ZP.div.withConfig({componentId:"sc-4c857b19-14"})(["width:32px;height:32px;background:var(--primary-blue);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;margin-right:12px;",""],e=>1===e.rank?"background: #FFD700; color: #B8860B;":2===e.rank?"background: #C0C0C0; color: #696969;":3===e.rank?"background: #CD7F32; color: #8B4513;":""),j=l.ZP.span.withConfig({componentId:"sc-4c857b19-15"})(["font-size:18px;font-weight:600;color:var(--text-primary);"]),D=l.ZP.span.withConfig({componentId:"sc-4c857b19-16"})(["font-size:20px;"]),I=l.ZP.div.withConfig({componentId:"sc-4c857b19-17"})(["margin-left:44px;"]),E=l.ZP.span.withConfig({componentId:"sc-4c857b19-18"})(["font-size:14px;color:var(--text-secondary);font-weight:500;"]),Z=l.ZP.div.withConfig({componentId:"sc-4c857b19-19"})(["font-size:24px;font-weight:700;color:var(--text-primary);"]),z=l.ZP.div.withConfig({componentId:"sc-4c857b19-20"})(["text-align:center;padding:60px 20px;color:var(--text-secondary);font-size:16px;background:var(--background-primary);border-radius:12px;border:2px dashed #e9ecef;min-height:320px;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:all 0.3s ease;&:hover{border-color:var(--primary-blue);background:#fafbff;transform:translateY(-2px);}&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-blue),var(--primary-purple),var(--primary-blue));opacity:0;transition:opacity 0.3s ease;}&:hover::before{opacity:1;}"]),U=l.ZP.div.withConfig({componentId:"sc-4c857b19-21"})(["font-size:4rem;margin-bottom:1.5rem;opacity:0.8;transition:all 0.3s ease;",":hover &{transform:scale(1.1);opacity:1;}@media (min-width:769px){font-size:5rem;margin-bottom:2rem;}"],z),F=l.ZP.h3.withConfig({componentId:"sc-4c857b19-22"})(["font-size:1.25rem;font-weight:700;color:var(--text-primary);margin:0 0 0.75rem 0;text-transform:uppercase;letter-spacing:0.1em;transition:all 0.3s ease;",":hover &{color:var(--primary-blue);transform:translateY(-2px);}@media (min-width:769px){font-size:1.5rem;margin-bottom:1rem;}"],z),A=l.ZP.p.withConfig({componentId:"sc-4c857b19-23"})(["font-size:0.95rem;color:var(--text-secondary);margin:0 0 2rem 0;line-height:1.6;max-width:400px;transition:all 0.3s ease;",":hover &{color:var(--text-primary);transform:translateY(-1px);}@media (min-width:769px){font-size:1.1rem;max-width:500px;margin-bottom:2.5rem;}"],z),_=l.ZP.button.withConfig({componentId:"sc-4c857b19-24"})(["background:var(--primary-blue);color:white;border:none;padding:1rem 2rem;font-size:0.9rem;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;cursor:pointer;border-radius:6px;transition:all 0.3s ease;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s ease;}&:hover{background:var(--primary-blue-dark,#0056CC);transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,122,255,0.3);&::before{left:100%;}}&:active{transform:translateY(0);box-shadow:0 4px 12px rgba(0,122,255,0.2);}@media (min-width:769px){padding:1.25rem 2.5rem;font-size:1rem;border-radius:8px;}"]),V=e=>{if(!e)return[];let r=e.getAllUsers(),t=[];return Object.keys(r).forEach(n=>{let o=r[n],i=e.getUserStats(n);if(i&&i.completedSessions>0){let e=2*i.completedMinutes+10*i.completedSessions+5*i.streakDays;t.push({name:o.displayName||o.id,userId:n,score:e,completedSessions:i.completedSessions,completedMinutes:i.completedMinutes,streakDays:i.streakDays,achievement:M(e),medal:"\uD83C\uDFC6"})}}),t.sort((e,r)=>r.score-e.score).map((e,r)=>(0,o._)((0,n._)({},e),{rank:r+1}))},M=e=>e>=2e3?"뽀모도로 마스터":e>=1500?"뽀모도로 전문가":e>=1e3?"뽀모도로 숙련자":e>=500?"뽀모도로 입문자":"뽀모도로 새싹",N=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];function Y(){let e=(0,a.useRouter)(),{currentUser:r}=(0,d.a)(),[t,n]=(0,s.useState)(new Date().getMonth()),[o,l]=(0,s.useState)([]),[M]=(0,s.useState)(()=>new c.w);(0,s.useEffect)(()=>{l(V(M))},[r,M]);let Y=e=>{switch(e){case 1:return"\uD83E\uDD47";case 2:return"\uD83E\uDD48";case 3:return"\uD83E\uDD49";case 4:return"\uD83C\uDFC5";case 5:return"\uD83C\uDF96️";default:return"\uD83C\uDFC6"}};return(0,i.jsxs)(u,{children:[(0,i.jsxs)(m,{children:[(0,i.jsx)(p,{onClick:()=>{e.push("/main")},children:"뒤로"}),(0,i.jsx)(g,{children:"뽀모도로 랭킹"}),(0,i.jsx)(h,{})]}),(0,i.jsxs)(f,{children:[(0,i.jsxs)(x,{children:[(0,i.jsx)(b,{onClick:()=>{n(e=>(e-1+12)%12)},children:"< 이전 달"}),(0,i.jsx)(w,{children:(0,i.jsxs)(v,{children:[N[t],(0,i.jsx)("span",{style:{transform:"rotate(90deg)"},children:"›"})]})}),(0,i.jsx)(b,{onClick:()=>{n(e=>(e+1)%12)},children:"다음 달 >"})]}),(0,i.jsx)(y,{children:o.length>0?o.map((e,r)=>(0,i.jsxs)(k,{rank:e.rank,children:[(0,i.jsxs)(C,{children:[(0,i.jsxs)(P,{children:[(0,i.jsx)(S,{rank:e.rank,children:e.rank}),(0,i.jsx)(j,{children:e.name}),(0,i.jsx)(D,{children:Y(e.rank)})]}),(0,i.jsx)(I,{children:(0,i.jsxs)(E,{children:[e.achievement," • 세션 ",e.completedSessions,"회 • ",e.completedMinutes,"분"]})})]}),(0,i.jsx)(Z,{children:e.score.toLocaleString()})]},e.userId||e.name)):(0,i.jsxs)(z,{children:[(0,i.jsx)(U,{children:"\uD83C\uDFC6"}),(0,i.jsx)(F,{children:"아직 랭킹이 없습니다"}),(0,i.jsxs)(A,{children:["뽀모도로 세션을 완료한 사용자가 없습니다.",(0,i.jsx)("br",{}),"첫 번째 뽀모도로를 시작해서 랭킹에 도전해보세요!"]}),(0,i.jsx)(_,{onClick:()=>e.push("/pomodoro-start"),children:"뽀모도로 시작하기"})]})})]})]})}},419:function(e,r,t){"use strict";t.d(r,{UserProvider:function(){return c},a:function(){return d}});var n=t(5583),o=t(1780),i=t(7437),s=t(2265),a=t(81);let l=(0,s.createContext)(),d=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useUser must be used within a UserProvider");return e},c=e=>{let{children:r}=e,[t,d]=(0,s.useState)(null),[c]=(0,s.useState)(()=>new a.w),[u,m]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!0),[w,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=c.getCurrentSession();if(e){let r=c.getUser(e.userId);r?(d(r),g(e.token),f(!0),P(e.userId)):c.logoutSession()}}catch(e){console.error("Error initializing auth:",e),c.logoutSession()}finally{b(!1)}})();let e=setInterval(()=>{if(p){let e=c.validateSession(p);if(e){let r=new Date(e.expiresAt),t=new Date,n=r.getTime()-t.getTime();n>0&&n<=3e5&&!e.rememberMe?v("세션이 ".concat(Math.ceil(n/6e4),"분 후 만료됩니다.")):v(null)}else v("세션이 만료되어 자동으로 로그아웃됩니다."),setTimeout(()=>C(),3e3)}},3e4);return()=>clearInterval(e)},[c,p]);let y=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{if(b(!0),v(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!r)throw Error("비밀번호를 입력해주세요.");let n=await c.loginUser(e.trim(),r,t);return d(n.user),g(n.sessionToken),f(!0),P(n.user.id),n.user}catch(e){if(console.error("Login failed:",e),e.message.includes("존재하지 않는"))throw Error("존재하지 않는 사용자입니다. 사용자명을 확인해주세요.");if(e.message.includes("비밀번호가 올바르지"))throw e;if(e.message.includes("일시적으로 잠겼습니다"))throw e;throw Error("로그인에 실패했습니다. 사용자명과 비밀번호를 확인해주세요.")}finally{b(!1)}},k=async(e,r)=>{try{var t;if(b(!0),v(null),!(null==e?void 0:e.trim()))throw Error("사용자명을 입력해주세요.");if(!(null==r?void 0:null===(t=r.email)||void 0===t?void 0:t.trim()))throw Error("이메일을 입력해주세요.");if(!(null==r?void 0:r.password))throw Error("비밀번호를 입력해주세요.");return await c.registerUser(e.trim(),(0,o._)((0,n._)({},r),{email:r.email.trim()}))}catch(e){if(console.error("Registration failed:",e),e.message.includes("이미 존재하는"))throw Error("이미 사용 중인 사용자명입니다. 다른 사용자명을 선택해주세요.");if(e.message.includes("이미 사용 중인 이메일"))throw Error("이미 사용 중인 이메일 주소입니다. 다른 이메일을 사용해주세요.");if(e.message.includes("비밀번호"))throw e;if(e.message.includes("이메일"))throw e;else if(e.message.includes("사용자명"))throw e;else throw Error("회원가입에 실패했습니다. 입력 정보를 확인하고 다시 시도해주세요.")}finally{b(!1)}},C=()=>{try{c.logoutSession(p),d(null),m(null),g(null),f(!1),v(null)}catch(e){console.error("Logout error:",e),d(null),m(null),g(null),f(!1),v(null)}},P=e=>{let r=c.getActiveSession(e);r&&(new Date<new Date(r.endTime)?m(r):(c.clearActiveSession(e),m(null)))},S=async e=>{if(!t)throw Error("No user logged in");try{let r=await c.updateUserProfile(t.id,e);return d(r),r}catch(e){throw console.error("Profile update failed:",e),e}};return(0,i.jsx)(l.Provider,{value:{currentUser:t,activeSession:u,sessionToken:p,isSessionValid:h,authLoading:x,sessionWarning:w,loginUser:y,registerUser:k,logoutUser:C,createPomodoroSession:e=>{if(!t)throw Error("No user logged in");let r=c.createPomodoroSession(t.id,e);return m(r),r},completePomodoroSession:()=>{t&&u&&(c.completePomodoroSession(t.id,u.id),m(null))},stopPomodoroSession:()=>{t&&u&&(c.stopPomodoroSession(t.id,u.id),m(null))},getUserStats:()=>t?c.getUserStats(t.id):null,getUserSessions:()=>t?c.getUserSessions(t.id):[],updateUserProfile:S,getUserActivity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return t?c.getUserActivity(t.id,e):null},validateCurrentSession:()=>!!p&&(!!c.validateSession(p)||(C(),!1)),checkPasswordStrength:e=>{if(!e)return{isValid:!1,errors:["비밀번호를 입력해주세요"],warnings:[],score:0,strength:"weak"};let r=[];e.length<4&&r.push("비밀번호는 4자 이상이어야 합니다");let t=Math.min(10*e.length,100),n={medium:t>=50&&t<80,strong:t>=80};return{isValid:0===r.length,errors:r,warnings:[],score:t,strength:n.strong?"strong":n.medium?"medium":"weak"}},validateEmail:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"이메일을 입력해주세요."};let r=e.trim().toLowerCase();return r.includes("@")?{isValid:!0,normalizedEmail:r}:{isValid:!1,error:"이메일에 @가 포함되어야 합니다."}},validateUsername:e=>{if(!e||"string"!=typeof e)return{isValid:!1,error:"사용자명을 입력해주세요."};let r=e.trim();return r.length<1?{isValid:!1,error:"사용자명을 입력해주세요."}:r.length>50?{isValid:!1,error:"사용자명은 50자 이하여야 합니다."}:{isValid:!0,normalizedUsername:r.toLowerCase()}},extendSession:()=>!!(p&&c.validateSession(p))&&(v(null),!0),dismissSessionWarning:()=>{v(null)},userManager:c},children:r})}}},function(e){e.O(0,[954,81,971,966,744],function(){return e(e.s=6874)}),_N_E=e.O()}]);